<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>心梦</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-10-31T23:43:09.176Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>心梦</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>unity11-1</title>
    <link href="http://example.com/2022/11/01/unity11-1/"/>
    <id>http://example.com/2022/11/01/unity11-1/</id>
    <published>2022-10-31T23:43:09.000Z</published>
    <updated>2022-10-31T23:43:09.176Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>unity模板</title>
    <link href="http://example.com/2022/10/31/unity%E6%A8%A1%E6%9D%BF/"/>
    <id>http://example.com/2022/10/31/unity%E6%A8%A1%E6%9D%BF/</id>
    <published>2022-10-31T10:29:23.000Z</published>
    <updated>2022-10-31T15:38:44.104Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">本地存储管理类</span><br><span class="line">退出游戏函数</span><br><span class="line">随机音乐脚本</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="本地存储管理类"><a href="#本地存储管理类" class="headerlink" title="本地存储管理类"></a>本地存储管理类</h1><p><code>GameDataManage</code></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 本地数据管理类 </span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GameDataManager</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Bool</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetBool</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">bool</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetString(key + <span class="string">&quot;Bool&quot;</span>, <span class="keyword">value</span>.ToString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Bool</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">GetBool</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">bool</span>.Parse(PlayerPrefs.GetString(key + <span class="string">&quot;Bool&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存String</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetString</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">string</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetString(key, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取String</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">GetString</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> PlayerPrefs.GetString(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Float</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetFloat</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">float</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetFloat(key, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Float</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">GetFloat</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> PlayerPrefs.GetFloat(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Int</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetInt</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetInt(key, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Int</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">GetInt</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> PlayerPrefs.GetInt(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存IntArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetIntArray</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">int</span>[] <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">value</span>.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            PlayerPrefs.SetInt(key + <span class="string">&quot;IntArray&quot;</span> + i, <span class="keyword">value</span>[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        PlayerPrefs.SetInt(key + <span class="string">&quot;IntArray&quot;</span>, <span class="keyword">value</span>.Length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取IntArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span>[] <span class="title">GetIntArray</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] intArr = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (PlayerPrefs.GetInt(key + <span class="string">&quot;IntArray&quot;</span>) != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            intArr = <span class="keyword">new</span> <span class="built_in">int</span>[PlayerPrefs.GetInt(key + <span class="string">&quot;IntArray&quot;</span>)];</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; intArr.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                intArr[i] = PlayerPrefs.GetInt(key + <span class="string">&quot;IntArray&quot;</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> intArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存FloatArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetFloatArray</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">float</span>[] <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">value</span>.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            PlayerPrefs.SetFloat(key + <span class="string">&quot;FloatArray&quot;</span> + i, <span class="keyword">value</span>[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        PlayerPrefs.SetInt(key + <span class="string">&quot;FloatArray&quot;</span>, <span class="keyword">value</span>.Length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取FloatArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span>[] <span class="title">GetFloatArray</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span>[] floatArr = <span class="keyword">new</span> <span class="built_in">float</span>[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (PlayerPrefs.GetInt(key + <span class="string">&quot;FloatArray&quot;</span>) != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            floatArr = <span class="keyword">new</span> <span class="built_in">float</span>[PlayerPrefs.GetInt(key + <span class="string">&quot;FloatArray&quot;</span>)];</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; floatArr.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                floatArr[i] = PlayerPrefs.GetFloat(key + <span class="string">&quot;FloatArray&quot;</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> floatArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存StringArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetStringArray</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">string</span>[] <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">value</span>.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            PlayerPrefs.SetString(key + <span class="string">&quot;StringArray&quot;</span> + i, <span class="keyword">value</span>[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        PlayerPrefs.SetInt(key + <span class="string">&quot;StringArray&quot;</span>, <span class="keyword">value</span>.Length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取StringArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span>[] <span class="title">GetStringArray</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span>[] stringArr = <span class="keyword">new</span> <span class="built_in">string</span>[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (PlayerPrefs.GetInt(key + <span class="string">&quot;StringArray&quot;</span>) != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            stringArr = <span class="keyword">new</span> <span class="built_in">string</span>[PlayerPrefs.GetInt(key + <span class="string">&quot;StringArray&quot;</span>)];</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; stringArr.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                stringArr[i] = PlayerPrefs.GetString(key + <span class="string">&quot;StringArray&quot;</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stringArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Vector2</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetVector2</span>(<span class="params"><span class="built_in">string</span> key, Vector2 <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;Vector2X&quot;</span>, <span class="keyword">value</span>.x);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;Vector2Y&quot;</span>, <span class="keyword">value</span>.y);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Vector2</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Vector2 <span class="title">GetVector2</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Vector2 Vector2;</span><br><span class="line">        Vector2.x = PlayerPrefs.GetFloat(key + <span class="string">&quot;Vector2X&quot;</span>);</span><br><span class="line">        Vector2.y = PlayerPrefs.GetFloat(key + <span class="string">&quot;Vector2Y&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> Vector2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Vector3</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetVector3</span>(<span class="params"><span class="built_in">string</span> key, Vector3 <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;Vector3X&quot;</span>, <span class="keyword">value</span>.x);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;Vector3Y&quot;</span>, <span class="keyword">value</span>.y);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;Vector3Z&quot;</span>, <span class="keyword">value</span>.z);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Vector3</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Vector3 <span class="title">GetVector3</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Vector3 vector3;</span><br><span class="line">        vector3.x = PlayerPrefs.GetFloat(key + <span class="string">&quot;Vector3X&quot;</span>);</span><br><span class="line">        vector3.y = PlayerPrefs.GetFloat(key + <span class="string">&quot;Vector3Y&quot;</span>);</span><br><span class="line">        vector3.z = PlayerPrefs.GetFloat(key + <span class="string">&quot;Vector3Z&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> vector3;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Quaternion</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetQuaternion</span>(<span class="params"><span class="built_in">string</span> key, Quaternion <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;QuaternionX&quot;</span>, <span class="keyword">value</span>.x);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;QuaternionY&quot;</span>, <span class="keyword">value</span>.y);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;QuaternionZ&quot;</span>, <span class="keyword">value</span>.z);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;QuaternionW&quot;</span>, <span class="keyword">value</span>.w);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Quaternion</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Quaternion <span class="title">GetQuaternion</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Quaternion quaternion;</span><br><span class="line">        quaternion.x = PlayerPrefs.GetFloat(key + <span class="string">&quot;QuaternionX&quot;</span>);</span><br><span class="line">        quaternion.y = PlayerPrefs.GetFloat(key + <span class="string">&quot;QuaternionY&quot;</span>);</span><br><span class="line">        quaternion.z = PlayerPrefs.GetFloat(key + <span class="string">&quot;QuaternionZ&quot;</span>);</span><br><span class="line">        quaternion.w = PlayerPrefs.GetFloat(key + <span class="string">&quot;QuaternionW&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> quaternion;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="退出游戏函数"><a href="#退出游戏函数" class="headerlink" title="退出游戏函数"></a>退出游戏函数</h1><p><code>on_chick_exitgame()</code></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">on_chick_exitgame</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="meta">#<span class="keyword">if</span> UNITY_EDITOR</span></span><br><span class="line">                UnityEditor.EditorApplication.isPlaying = <span class="literal">false</span>;</span><br><span class="line">        <span class="meta">#<span class="keyword">else</span> </span></span><br><span class="line">        Application.Quit();</span><br><span class="line">        <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="随机音乐脚本"><a href="#随机音乐脚本" class="headerlink" title="随机音乐脚本"></a>随机音乐脚本</h1><p><code>randAudio</code></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">randAudio</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;所有的背景音乐&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> AudioClip[] audioClips;</span><br><span class="line">    <span class="keyword">public</span> AudioSource audioSource;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> i;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            i = Random.Range(<span class="number">0</span>,audioClips.Length);</span><br><span class="line">        &#125; <span class="keyword">while</span> (i == GameDataManager.GetInt(<span class="string">&quot;Previous_back_music&quot;</span>));</span><br><span class="line">        GameDataManager.SetInt(<span class="string">&quot;Previous_back_music&quot;</span>, i);</span><br><span class="line">        audioSource.clip = audioClips[i];</span><br><span class="line"></span><br><span class="line">        audioSource.Play();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;本地存储管理类&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;退出游戏函数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;随机音乐脚本&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="模板" scheme="http://example.com/categories/%E6%A8%A1%E6%9D%BF/"/>
    
    
    <category term="unity" scheme="http://example.com/tags/unity/"/>
    
  </entry>
  
  <entry>
    <title>unity10-31</title>
    <link href="http://example.com/2022/10/31/unity10-31/"/>
    <id>http://example.com/2022/10/31/unity10-31/</id>
    <published>2022-10-31T00:11:46.000Z</published>
    <updated>2022-10-31T14:41:17.977Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">优化初始界面小人动作，移动方向更贴合背景图片，并限制移动边界，到达边界自动转向</span><br><span class="line">登录界面的UI</span><br><span class="line">验证数据库没有查到结果怎么写</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="优化人物动作"><a href="#优化人物动作" class="headerlink" title="优化人物动作"></a>优化人物动作</h1><p><img src="/../images/image-20221031223924104.png" alt="image-20221031223924104"></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">actionAI</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//角色动作管理器</span></span><br><span class="line">    <span class="keyword">private</span> Animator animator;</span><br><span class="line">    <span class="comment">//角色动作枚举</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">enum</span> animation_action_enem</span><br><span class="line">    &#123;</span><br><span class="line">        Front,Back,Left,Right,Notmove</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//当前角色移动的方向</span></span><br><span class="line">    <span class="keyword">private</span> Vector3 move_vector;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;角色移动速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> v;</span><br><span class="line">    <span class="comment">//当前角色状态</span></span><br><span class="line">    <span class="keyword">private</span> animation_action_enem animation_Action;</span><br><span class="line">    <span class="keyword">public</span> animation_action_enem Animation_Action</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;<span class="keyword">return</span> animation_Action; &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            move_vector = Vector2.zero;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">value</span>==animation_action_enem.Notmove)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">switch</span> (animation_Action)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Front:</span><br><span class="line">                        animator.Play(<span class="string">&quot;前&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Back:</span><br><span class="line">                        animator.Play(<span class="string">&quot;后&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Left:</span><br><span class="line">                        animator.Play(<span class="string">&quot;左&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Right:</span><br><span class="line">                        animator.Play(<span class="string">&quot;右&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="literal">default</span>:</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                animation_Action = <span class="keyword">value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                animation_Action = <span class="keyword">value</span>;</span><br><span class="line">                <span class="keyword">switch</span> (animation_Action)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Front:</span><br><span class="line">                        animator.Play(<span class="string">&quot;前走&quot;</span>);</span><br><span class="line">                        move_vector = <span class="keyword">new</span> Vector2(<span class="number">-1</span>,<span class="number">-0.5863309f</span>).normalized;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Back:</span><br><span class="line">                        animator.Play(<span class="string">&quot;后走&quot;</span>);</span><br><span class="line">                        move_vector = -<span class="keyword">new</span> Vector2(<span class="number">-1</span>, <span class="number">-0.5863309f</span>).normalized;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Left:</span><br><span class="line">                        animator.Play(<span class="string">&quot;左走&quot;</span>);</span><br><span class="line">                        move_vector = <span class="keyword">new</span> Vector2(<span class="number">-1</span>, <span class="number">0.4139466f</span>).normalized;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Right:</span><br><span class="line">                        animator.Play(<span class="string">&quot;右走&quot;</span>);</span><br><span class="line">                        move_vector = -<span class="keyword">new</span> Vector2(<span class="number">-1</span>, <span class="number">0.4139466f</span>).normalized;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="literal">default</span>:</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//保持当前状态的时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> time;</span><br><span class="line">    <span class="comment">//更新角色状态</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Animation_Action_updata</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        time -= Time.deltaTime;</span><br><span class="line">        <span class="keyword">if</span>(time&lt;=<span class="number">0f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            time = Random.Range(<span class="number">2f</span>, <span class="number">5f</span>);</span><br><span class="line">            <span class="built_in">int</span> id = Random.Range(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">            <span class="keyword">switch</span> (Animation_Action)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> animation_action_enem.Front:</span><br><span class="line">                    <span class="keyword">switch</span> (id)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Back;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Left;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Notmove;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Right;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="literal">default</span>:</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> animation_action_enem.Back:</span><br><span class="line">                    <span class="keyword">switch</span> (id)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Front;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Left;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Notmove;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Right;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="literal">default</span>:</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> animation_action_enem.Left:</span><br><span class="line">                    <span class="keyword">switch</span> (id)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Front;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Back;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Notmove;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Right;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="literal">default</span>:</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> animation_action_enem.Right:</span><br><span class="line">                    <span class="keyword">switch</span> (id)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Front;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Back;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Notmove;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Left;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="literal">default</span>:</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> animation_action_enem.Notmove:</span><br><span class="line">                    <span class="keyword">switch</span> (id)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Front;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Back;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Left;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Right;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="literal">default</span>:</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="literal">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;左边最小值&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> leftmin;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;右边最大值&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> rightmax;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;向前最小值&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> frontmin;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;向后最大值&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> backmax;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 计算两点直线的k值和b值</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">twopoint</span>(<span class="params"><span class="built_in">float</span> x1,<span class="built_in">float</span> y1,<span class="built_in">float</span> x2,<span class="built_in">float</span> y2,<span class="keyword">out</span> <span class="built_in">float</span> k,<span class="keyword">out</span> <span class="built_in">float</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        b = (y1 * x2 - y2 * x1) / (x2 - x1);</span><br><span class="line">        k = (y1 - b) / x1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 判断在直线的位置</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>返回true 说明在左边，否则在右边<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="built_in">bool</span> <span class="title">judg</span>(<span class="params"><span class="built_in">float</span> x,<span class="built_in">float</span> y,<span class="built_in">float</span> k,<span class="built_in">float</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( y - k * x - b  &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">//Debug.Log(&quot;不让过！！&quot;);</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//上方直线方程为y=kx+b;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> k = <span class="number">-0.4485842f</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> b = <span class="number">-0.4285544f</span>;</span><br><span class="line">    <span class="comment">//右边直线方程为y=k1x+b1;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> k1 = <span class="number">-0.6358023f</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> b1 = <span class="number">-2.125926f</span>;</span><br><span class="line">    <span class="comment">//按照当前角色移动方式进行角色移动</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">move</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">float</span> x = transform.position.x + move_vector.x * Time.deltaTime * v;</span><br><span class="line">        <span class="built_in">float</span> y = transform.position.y + move_vector.y * Time.deltaTime * v;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (x &lt; leftmin)</span><br><span class="line">        &#123;</span><br><span class="line">            Animation_Action = animation_action_enem.Right;</span><br><span class="line">            <span class="comment">//Debug.Log(&quot;撞左边了！&quot;);</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (judg(x, y, k1, b1)||( x &gt; rightmax))</span><br><span class="line">        &#123;</span><br><span class="line">            Animation_Action = animation_action_enem.Left;</span><br><span class="line">            <span class="comment">//Debug.Log(&quot;撞右边了！&quot;);</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!judg(x, y, k, b)||y &gt; backmax)</span><br><span class="line">        &#123;</span><br><span class="line">            Animation_Action = animation_action_enem.Front;</span><br><span class="line">            <span class="comment">//Debug.Log(&quot;撞后边了！&quot;);</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (y &lt; frontmin)</span><br><span class="line">        &#123;</span><br><span class="line">            Animation_Action = animation_action_enem.Back;</span><br><span class="line">            <span class="comment">//Debug.Log(&quot;撞前边了！&quot;);</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        transform.position += move_vector * Time.deltaTime * v;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        time = <span class="number">2f</span>;</span><br><span class="line">        twopoint(<span class="number">3.34f</span>, <span class="number">-0.74f</span>,<span class="number">-3.4f</span>,<span class="number">2.05f</span>,<span class="keyword">out</span> k,<span class="keyword">out</span> b);</span><br><span class="line">        twopoint(<span class="number">0.78f</span>, <span class="number">-1.63f</span>,<span class="number">2.4f</span>,<span class="number">-0.6f</span>,<span class="keyword">out</span> k1,<span class="keyword">out</span> b1);</span><br><span class="line">        Debug.Log(<span class="string">&quot;k:&quot;</span> + k1 + <span class="string">&quot;  b:&quot;</span> + b1);</span><br><span class="line">        </span><br><span class="line">        animator = transform.GetComponent&lt;Animator&gt;();</span><br><span class="line">        Animation_Action = animation_action_enem.Left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Animation_Action_updata();</span><br><span class="line">        move();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="登录界面UI"><a href="#登录界面UI" class="headerlink" title="登录界面UI"></a>登录界面UI</h1><p><img src="/../images/image-20221031223940159.png" alt="image-20221031223940159"></p><p><img src="/../images/image-20221031223951414.png" alt="image-20221031223951414"></p><h1 id="验证数据库没有查到结果怎么写"><a href="#验证数据库没有查到结果怎么写" class="headerlink" title="验证数据库没有查到结果怎么写"></a>验证数据库没有查到结果怎么写</h1><p>验证代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DataSet dataSet = datamanage.<span class="built_in">query</span></span><br><span class="line">            (<span class="string">&quot;select * &quot;</span> +</span><br><span class="line">            <span class="string">&quot;from 菜单表 a &quot;</span> +</span><br><span class="line">            <span class="string">&quot;where a.菜品名称=&#x27;daf&#x27;&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (dataSet == null) Debug.<span class="built_in">Log</span>(<span class="string">&quot;1 没有查到结果！！&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(dataSet.Tables.Count==<span class="number">0</span>)Debug.<span class="built_in">Log</span>(<span class="string">&quot;2 没有查到结果！！&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(dataSet.Tables[<span class="number">0</span>].Rows.Count==<span class="number">0</span>)Debug.<span class="built_in">Log</span>(<span class="string">&quot;3 没有查到结果！！&quot;</span>);</span><br></pre></td></tr></table></figure><p>结果是第三种输出了<code>3 没有查到结果！！</code>，所有第三种可以判空</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;优化初始界面小人动作，移动方向更贴合背景图片，并限制移动边界，到达边界自动转向&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;登录界面的UI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;验证数据库没有查到结果怎么写&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="美食梦物语" scheme="http://example.com/tags/%E7%BE%8E%E9%A3%9F%E6%A2%A6%E7%89%A9%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>unity10-30</title>
    <link href="http://example.com/2022/10/30/unity10-30/"/>
    <id>http://example.com/2022/10/30/unity10-30/</id>
    <published>2022-10-30T00:36:51.000Z</published>
    <updated>2022-10-30T14:53:23.907Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">自适应组件 Content Size Fitter</span><br><span class="line"></span><br><span class="line">文档整理思路写的差不多了感觉后边的大部分重复，先写着这些功能，遇到问题再写</span><br><span class="line"></span><br><span class="line">学习解包整出游戏所用的素材，再去资源商店找找素材，明天就可以开工了</span><br><span class="line"></span><br><span class="line">写了个角色自动随机移动的脚本</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="玩家"><a href="#玩家" class="headerlink" title="玩家"></a>玩家</h1><h2 id="玩家信息类"><a href="#玩家信息类" class="headerlink" title="玩家信息类"></a>玩家信息类</h2><p><img src="/../images/e96091570dcd80e31ddb09633ae71a1.jpg" alt="e96091570dcd80e31ddb09633ae71a1"></p><p><img src="/../images/2fab2c587d81a7526e28d5b2c77cb65.jpg" alt="2fab2c587d81a7526e28d5b2c77cb65"></p><h2 id="玩家注册"><a href="#玩家注册" class="headerlink" title="玩家注册"></a>玩家注册</h2><p><img src="/../images/cb11c1d396a33c3225535c02b5c654c.jpg" alt="cb11c1d396a33c3225535c02b5c654c"></p><h1 id="店员"><a href="#店员" class="headerlink" title="店员"></a>店员</h1><h2 id="店员类"><a href="#店员类" class="headerlink" title="店员类"></a>店员类</h2><p><img src="/../images/26cd5e301741d94499af95fa9474af3.jpg" alt="26cd5e301741d94499af95fa9474af3"></p><h2 id="店员玩家类"><a href="#店员玩家类" class="headerlink" title="店员玩家类"></a>店员玩家类</h2><p><img src="/../images/16f463c6b98e5a8b84335fd7ec56ed2.jpg" alt="16f463c6b98e5a8b84335fd7ec56ed2"></p><h2 id="店员数据"><a href="#店员数据" class="headerlink" title="店员数据"></a>店员数据</h2><p><img src="/../images/900334cb279340c994a92c6d96f6d2e-16671202709481.jpg" alt="900334cb279340c994a92c6d96f6d2e"></p><h2 id="设置店员界面-上任店员界面"><a href="#设置店员界面-上任店员界面" class="headerlink" title="设置店员界面 上任店员界面"></a>设置店员界面 上任店员界面</h2><p><img src="/../images/5a1753b0b748a322d24f7ebbdb5082d.jpg" alt="5a1753b0b748a322d24f7ebbdb5082d"></p><h2 id="上任店员块"><a href="#上任店员块" class="headerlink" title="上任店员块"></a>上任店员块</h2><h2 id=""><a href="#" class="headerlink" title=""></a><img src="/../images/782f1b79bcc2aab7396d012fc546cbc.jpg" alt="782f1b79bcc2aab7396d012fc546cbc"></h2><h2 id="查看属性界面"><a href="#查看属性界面" class="headerlink" title="查看属性界面"></a>查看属性界面</h2><p><img src="/../images/6b6302c105a5ab6dae691295258e5e9.jpg" alt="6b6302c105a5ab6dae691295258e5e9"></p><h2 id="未上任店员界面"><a href="#未上任店员界面" class="headerlink" title="未上任店员界面"></a>未上任店员界面</h2><p><img src="/../images/395963f14ac7f91042e24a4964ab022.jpg" alt="395963f14ac7f91042e24a4964ab022"></p><h2 id="未上任店员块"><a href="#未上任店员块" class="headerlink" title="未上任店员块"></a>未上任店员块</h2><p><img src="/../images/21c8c04c1c34ed17520b48b2b2065b6.jpg" alt="21c8c04c1c34ed17520b48b2b2065b6"></p><h2 id="雇佣店员界面"><a href="#雇佣店员界面" class="headerlink" title="雇佣店员界面"></a>雇佣店员界面</h2><p><img src="/../images/1039ff5ab70cc091204be03262a55c9.jpg" alt="1039ff5ab70cc091204be03262a55c9"></p><h2 id="雇佣店员块"><a href="#雇佣店员块" class="headerlink" title="雇佣店员块"></a>雇佣店员块</h2><p><img src="/../images/36baaaae17d8718619721c12062ceb4.jpg" alt="36baaaae17d8718619721c12062ceb4"></p><h1 id="菜单"><a href="#菜单" class="headerlink" title="菜单"></a>菜单</h1><h2 id="菜单类"><a href="#菜单类" class="headerlink" title="菜单类"></a>菜单类</h2><p><img src="/../images/0463301d46c829ed4876a735b56677e.jpg" alt="0463301d46c829ed4876a735b56677e"></p><h2 id="菜单玩家类"><a href="#菜单玩家类" class="headerlink" title="菜单玩家类"></a>菜单玩家类</h2><p><img src="/../images/c8596eb70ca2df75d643ad31793237f.jpg" alt="c8596eb70ca2df75d643ad31793237f"></p><h2 id="菜单数据"><a href="#菜单数据" class="headerlink" title="菜单数据"></a>菜单数据</h2><p><img src="/../images/b7552d6c0a063a984f9c17caab46dea.jpg" alt="b7552d6c0a063a984f9c17caab46dea"></p><h2 id="更新菜单"><a href="#更新菜单" class="headerlink" title="更新菜单"></a>更新菜单</h2><p><img src="/../images/b24d414466940ff2542e42ae797a440.jpg" alt="b24d414466940ff2542e42ae797a440"></p><h2 id="店内菜单块类"><a href="#店内菜单块类" class="headerlink" title="店内菜单块类"></a>店内菜单块类</h2><p><img src="/../images/2503b390436e3c0a48fd8f18182333a.jpg" alt="2503b390436e3c0a48fd8f18182333a"></p><h2 id="点击菜单显示UI-菜单列表选择管理"><a href="#点击菜单显示UI-菜单列表选择管理" class="headerlink" title="点击菜单显示UI  菜单列表选择管理"></a>点击菜单显示UI  菜单列表选择管理</h2><p><img src="/../images/29043f1e3bfe2b28173aca0eb701ce5.jpg" alt="29043f1e3bfe2b28173aca0eb701ce5"></p><p><img src="/../images/49369517294bb929296ccaf0b936751.jpg" alt="49369517294bb929296ccaf0b936751"></p><h2 id="选择菜单菜单块"><a href="#选择菜单菜单块" class="headerlink" title="选择菜单菜单块"></a>选择菜单菜单块</h2><p><img src="/../images/974d66a3163e7a024fb606ed791a105.jpg" alt="974d66a3163e7a024fb606ed791a105"></p><h2 id="菜品开发界面"><a href="#菜品开发界面" class="headerlink" title="菜品开发界面"></a>菜品开发界面</h2><p><img src="/../images/552156f196908cf970eca4432675967.jpg" alt="552156f196908cf970eca4432675967"></p><h2 id="菜品开发管理类"><a href="#菜品开发管理类" class="headerlink" title="菜品开发管理类"></a>菜品开发管理类</h2><p><img src="/../images/b08f8bbe2dcf400ee1a87ca2543c005.jpg" alt="b08f8bbe2dcf400ee1a87ca2543c005"></p><h2 id="未开发菜单块"><a href="#未开发菜单块" class="headerlink" title="未开发菜单块"></a>未开发菜单块</h2><p><img src="/../images/2bfa18276292cf26c05c6367621a008.jpg" alt="2bfa18276292cf26c05c6367621a008"></p><h1 id="食材"><a href="#食材" class="headerlink" title="食材"></a>食材</h1><h2 id="食材类"><a href="#食材类" class="headerlink" title="食材类"></a>食材类</h2><p><img src="/../images/1c9a9db7212a605e9a8850d242679fe.jpg" alt="1c9a9db7212a605e9a8850d242679fe"></p><h2 id="食材玩家类"><a href="#食材玩家类" class="headerlink" title="食材玩家类"></a>食材玩家类</h2><p><img src="/../images/f886150c55f23f46a05311f6e0b2a50.jpg" alt="f886150c55f23f46a05311f6e0b2a50"></p><h2 id="食材数据"><a href="#食材数据" class="headerlink" title="食材数据"></a>食材数据</h2><p><img src="/../images/1ea67d2af64ef68a12b44182952231d.jpg" alt="1ea67d2af64ef68a12b44182952231d"></p><h2 id="背包UI"><a href="#背包UI" class="headerlink" title="背包UI"></a>背包UI</h2><p><img src="/../images/d8a4d93f0558bf23fb7579289a896b1.jpg" alt="d8a4d93f0558bf23fb7579289a896b1"></p><h2 id="背包管理类"><a href="#背包管理类" class="headerlink" title="背包管理类"></a>背包管理类</h2><p><img src="/../images/dc555e6d0e167cb5141791887fcca0c.jpg" alt="dc555e6d0e167cb5141791887fcca0c"></p><h2 id="背包块"><a href="#背包块" class="headerlink" title="背包块"></a>背包块</h2><p><img src="/../images/529a0a4f66758adc87b95aebcbf2f44.jpg" alt="529a0a4f66758adc87b95aebcbf2f44"></p><h2 id="显示菜单页面"><a href="#显示菜单页面" class="headerlink" title="显示菜单页面"></a>显示菜单页面</h2><p><img src="/../images/647bcbb209ef9ce8734218e2d00cf1d.jpg" alt="647bcbb209ef9ce8734218e2d00cf1d"></p><h2 id="菜品强化页面"><a href="#菜品强化页面" class="headerlink" title="菜品强化页面"></a>菜品强化页面</h2><h2 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="/../images/eda8affbba85b33b612901f8c6e943a.jpg" alt="eda8affbba85b33b612901f8c6e943a"></h2><h1 id="自动随机移动脚本"><a href="#自动随机移动脚本" class="headerlink" title="自动随机移动脚本"></a>自动随机移动脚本</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">actionAI</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//角色动作管理器</span></span><br><span class="line">    <span class="keyword">private</span> Animator animator;</span><br><span class="line">    <span class="comment">//角色动作枚举</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">enum</span> animation_action_enem</span><br><span class="line">    &#123;</span><br><span class="line">        Front,Back,Left,Right,Notmove</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//当前角色移动的方向</span></span><br><span class="line">    <span class="keyword">private</span> Vector3 move_vector;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;角色移动速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> v;</span><br><span class="line">    <span class="comment">//当前角色状态</span></span><br><span class="line">    <span class="keyword">private</span> animation_action_enem animation_Action;</span><br><span class="line">    <span class="keyword">public</span> animation_action_enem Animation_Action</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;<span class="keyword">return</span> animation_Action; &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            move_vector = Vector2.zero;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">value</span>==animation_action_enem.Notmove)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">switch</span> (animation_Action)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Front:</span><br><span class="line">                        animator.Play(<span class="string">&quot;前&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Back:</span><br><span class="line">                        animator.Play(<span class="string">&quot;后&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Left:</span><br><span class="line">                        animator.Play(<span class="string">&quot;左&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Right:</span><br><span class="line">                        animator.Play(<span class="string">&quot;右&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="literal">default</span>:</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                animation_Action = <span class="keyword">value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                animation_Action = <span class="keyword">value</span>;</span><br><span class="line">                <span class="keyword">switch</span> (animation_Action)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Front:</span><br><span class="line">                        animator.Play(<span class="string">&quot;前走&quot;</span>);</span><br><span class="line">                        move_vector = Vector2.down;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Back:</span><br><span class="line">                        animator.Play(<span class="string">&quot;后走&quot;</span>);</span><br><span class="line">                        move_vector = Vector2.up;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Left:</span><br><span class="line">                        animator.Play(<span class="string">&quot;左走&quot;</span>);</span><br><span class="line">                        move_vector = Vector2.left;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> animation_action_enem.Right:</span><br><span class="line">                        animator.Play(<span class="string">&quot;右走&quot;</span>);</span><br><span class="line">                        move_vector = Vector2.right;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="literal">default</span>:</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//保持当前状态的时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> time;</span><br><span class="line">    <span class="comment">//更新角色状态</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Animation_Action_updata</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        time -= Time.deltaTime;</span><br><span class="line">        <span class="keyword">if</span>(time&lt;=<span class="number">0f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            time = Random.Range(<span class="number">2f</span>, <span class="number">5f</span>);</span><br><span class="line">            <span class="built_in">int</span> id = Random.Range(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">            <span class="keyword">switch</span> (Animation_Action)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> animation_action_enem.Front:</span><br><span class="line">                    <span class="keyword">switch</span> (id)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Back;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Left;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Notmove;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Right;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="literal">default</span>:</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> animation_action_enem.Back:</span><br><span class="line">                    <span class="keyword">switch</span> (id)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Front;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Left;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Notmove;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Right;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="literal">default</span>:</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> animation_action_enem.Left:</span><br><span class="line">                    <span class="keyword">switch</span> (id)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Front;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Back;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Notmove;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Right;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="literal">default</span>:</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> animation_action_enem.Right:</span><br><span class="line">                    <span class="keyword">switch</span> (id)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Front;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Back;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Notmove;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Left;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="literal">default</span>:</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> animation_action_enem.Notmove:</span><br><span class="line">                    <span class="keyword">switch</span> (id)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Front;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Back;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Left;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                            Animation_Action = animation_action_enem.Right;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="literal">default</span>:</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="literal">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;左边最小值&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> leftmin;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;右边最大值&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> rightmax;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;向前最小值&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> frontmin;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;向后最大值&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> backmax;</span><br><span class="line">    <span class="comment">//按照当前角色移动方式进行角色移动</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">move</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (transform.position.x + move_vector.x * Time.deltaTime * v &lt; leftmin) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (transform.position.x + move_vector.x * Time.deltaTime * v &gt; rightmax) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (transform.position.y + move_vector.y * Time.deltaTime * v &gt; backmax) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (transform.position.y + move_vector.y * Time.deltaTime * v &lt; frontmin) <span class="keyword">return</span>;</span><br><span class="line">        transform.position += move_vector * Time.deltaTime * v;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        animator = transform.GetComponent&lt;Animator&gt;();</span><br><span class="line">        Animation_Action = animation_action_enem.Left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Animation_Action_updata();</span><br><span class="line">        move();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;自适应组件 Content Size Fitter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;文档整理思路写的差不多了感觉后边的大部分重复，先写着这些功能，遇到问题再写&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;学习解包整出游戏所用的素材，再去资源商店找找素材，明天就可以开工了&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;写了个角色自动随机移动的脚本&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="美食梦物语" scheme="http://example.com/tags/%E7%BE%8E%E9%A3%9F%E6%A2%A6%E7%89%A9%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>unity10-29</title>
    <link href="http://example.com/2022/10/29/unity10-29/"/>
    <id>http://example.com/2022/10/29/unity10-29/</id>
    <published>2022-10-29T00:11:04.000Z</published>
    <updated>2022-10-30T00:36:26.919Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">写一天策划文案没写完，明天写完放</span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;写一天策划文案没写完，明天写完放&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="美食梦物语" scheme="http://example.com/tags/%E7%BE%8E%E9%A3%9F%E6%A2%A6%E7%89%A9%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>unity10-28</title>
    <link href="http://example.com/2022/10/28/unity10-28/"/>
    <id>http://example.com/2022/10/28/unity10-28/</id>
    <published>2022-10-28T09:55:19.000Z</published>
    <updated>2022-10-29T00:12:00.717Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">美食梦物语筹备阶段</span><br><span class="line">连接sqlserver数据库</span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="链接数据库"><a href="#链接数据库" class="headerlink" title="链接数据库"></a>链接数据库</h1><h2 id="导入文件"><a href="#导入文件" class="headerlink" title="导入文件"></a>导入文件</h2><p>找到<code>E:\unity\2021.3.9f1c1\Editor\Data\MonoBleedingEdge\lib\mono\unityaot-win32</code>中的</p><p><img src="/../images/image-20221028182053741.png" alt="image-20221028182053741"></p><p>导入unity项目中</p><p>在解决方案中配置<code>Data.SqlClient</code></p><p><img src="/../images/image-20221028180154392.png" alt="image-20221028180154392"></p><h2 id="连接和操作代码"><a href="#连接和操作代码" class="headerlink" title="连接和操作代码"></a>连接和操作代码</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Data.SqlClient;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">database_manage</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//数据库连接的定义</span></span><br><span class="line">    <span class="keyword">private</span> SqlConnection sqlCon;</span><br><span class="line">    <span class="comment">//数据库连接地址</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> sqlAddress = <span class="string">&quot;server=192.168.127.1;database=美食梦物语;uid=sa;pwd=1258005369&quot;</span>;</span><br><span class="line">    <span class="comment">//适配器</span></span><br><span class="line">    SqlDataAdapter sda = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">//结果集</span></span><br><span class="line">    DataSet ds = <span class="keyword">new</span> DataSet();</span><br><span class="line">    <span class="comment">// Use this for initialization</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        sqlCon = new SqlConnection(sqlAddress);</span></span><br><span class="line"><span class="comment">        string sql = &quot;select * from 菜单表 &quot; +</span></span><br><span class="line"><span class="comment">                     &quot;select* from 店员表&quot;;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            sqlCon.Open();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果出现异常，抛出</span></span><br><span class="line">        <span class="keyword">catch</span> (System.Exception)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSet <span class="title">updata</span>(<span class="params"><span class="built_in">string</span> sql</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> 测试代码</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">                   //测试</span></span><br><span class="line"><span class="comment">                   //数据库操作</span></span><br><span class="line"><span class="comment">                   sda = new SqlDataAdapter(sql, sqlAddress);</span></span><br><span class="line"><span class="comment">                   //将查询的结果放入结果集</span></span><br><span class="line"><span class="comment">                   sda.Fill(ds);</span></span><br><span class="line"><span class="comment">                   for (int i = 0; i &lt; ds.Tables[0].Rows.Count; i++)</span></span><br><span class="line"><span class="comment">                   &#123;</span></span><br><span class="line"><span class="comment">                       for (int j = 0; j &lt; 5; j++)</span></span><br><span class="line"><span class="comment">                       &#123;</span></span><br><span class="line"><span class="comment">                           print(ds.Tables[0].Rows[i][j]);</span></span><br><span class="line"><span class="comment">                       &#125;</span></span><br><span class="line"><span class="comment">                   &#125;</span></span><br><span class="line"><span class="comment">                   for (int i = 0; i &lt; ds.Tables[1].Rows.Count; i++)</span></span><br><span class="line"><span class="comment">                   &#123;</span></span><br><span class="line"><span class="comment">                       for (int j = 0; j &lt; 8; j++)</span></span><br><span class="line"><span class="comment">                       &#123;</span></span><br><span class="line"><span class="comment">                           print(ds.Tables[1].Rows[i][j]);</span></span><br><span class="line"><span class="comment">                       &#125;</span></span><br><span class="line"><span class="comment">                   &#125;</span></span><br><span class="line"><span class="comment">                   return ds;</span></span><br><span class="line"><span class="comment">                   */</span></span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//数据库操作</span></span><br><span class="line">        sda = <span class="keyword">new</span> SqlDataAdapter(sql, sqlAddress);</span><br><span class="line">        <span class="comment">//结果集</span></span><br><span class="line">        DataSet ds = <span class="keyword">new</span> DataSet();</span><br><span class="line">        <span class="comment">//将查询的结果放入结果集</span></span><br><span class="line">        sda.Fill(ds, <span class="string">&quot;菜单表&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;美食梦物语筹备阶段&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;连接sqlserver数据库&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="美食梦物语" scheme="http://example.com/tags/%E7%BE%8E%E9%A3%9F%E6%A2%A6%E7%89%A9%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>unity10-27</title>
    <link href="http://example.com/2022/10/27/unity10-27/"/>
    <id>http://example.com/2022/10/27/unity10-27/</id>
    <published>2022-10-27T02:26:54.960Z</published>
    <updated>2022-10-28T01:17:31.751Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">玩家动画刚体  玩家死亡实现方式  flying bird代码</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="动画和刚体"><a href="#动画和刚体" class="headerlink" title="动画和刚体"></a>动画和刚体</h1><p><code>Animation</code> 和 <code>RigidBody </code>不能加在同一物体上，会产生冲突</p><p>一般挂载在两个物体上</p><h1 id="玩家死亡"><a href="#玩家死亡" class="headerlink" title="玩家死亡"></a>玩家死亡</h1><p>使用委托定义事件，当玩家死亡时，关心玩家是否死亡的人将向委托中添加函数，当玩家死亡时执行该委托即可</p><h1 id="分数系统"><a href="#分数系统" class="headerlink" title="分数系统"></a>分数系统</h1><p><code>using UnityEngine Events;</code></p><p><code>UntiyAction</code></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> UnityAction&lt;<span class="built_in">int</span>&gt;onscore;</span><br></pre></td></tr></table></figure><p>定义事件，当分数变化时当事件不为空执行</p><h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><h2 id="game-管理游戏面板和逻辑"><a href="#game-管理游戏面板和逻辑" class="headerlink" title="game 管理游戏面板和逻辑"></a>game 管理游戏面板和逻辑</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.UI;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">game</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 管道生成器</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> GameObject pipelineManage_gameobgect;</span><br><span class="line">    <span class="keyword">private</span> GameObject player;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 游戏状态枚举</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">enum</span> GamestateEnem</span><br><span class="line">    &#123;</span><br><span class="line">        Ingame,Begingame,Endgame</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当前游戏状态</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> GamestateEnem gamestate;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当前游戏状态属性</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 每次更新游戏状态更新面板</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> GamestateEnem Gamestate</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> gamestate; &#125;</span><br><span class="line">        <span class="keyword">set</span> </span><br><span class="line">        &#123; </span><br><span class="line">            gamestate = <span class="keyword">value</span>;</span><br><span class="line">            updata_Gamestate();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> Transform begingamePlane;</span><br><span class="line">    <span class="keyword">private</span> Transform ingamePlane;</span><br><span class="line">    <span class="keyword">private</span> Transform endgamePlane;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Text ingame_score_text;</span><br><span class="line">    <span class="keyword">private</span> Text endgame_score_text;</span><br><span class="line">    <span class="keyword">private</span> Text endgame_best_score_text;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        begingamePlane = transform.GetChild(<span class="number">0</span>);</span><br><span class="line">        ingamePlane = transform.GetChild(<span class="number">1</span>);</span><br><span class="line">        endgamePlane = transform.GetChild(<span class="number">2</span>);</span><br><span class="line">        player = GameObject.FindGameObjectWithTag(<span class="string">&quot;Player&quot;</span>);</span><br><span class="line">        Gamestate = GamestateEnem.Begingame;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//当玩家死亡时将游戏状态转化为Endgame</span></span><br><span class="line">        player.GetComponent&lt;playerControl&gt;().player_died_Action += player_died_game;</span><br><span class="line"></span><br><span class="line">        ingame_score_text = ingamePlane.GetChild(<span class="number">0</span>).GetComponent&lt;Text&gt;();</span><br><span class="line">        endgame_score_text=endgamePlane.GetChild(<span class="number">1</span>).GetComponent&lt;Text&gt;();</span><br><span class="line">        endgame_best_score_text=endgamePlane.GetChild(<span class="number">3</span>).GetComponent&lt;Text&gt;();</span><br><span class="line">        <span class="comment">//添加面板分数事件</span></span><br><span class="line">        player.GetComponent&lt;playerControl&gt;().score_Action += score_game;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当分数变化时界面做的事情</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;score&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">score_game</span>(<span class="params"><span class="built_in">int</span> score</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ingame_score_text.text = Convert.ToString(score);</span><br><span class="line">        endgame_score_text.text = Convert.ToString(score);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当玩家死亡时game做的事情</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">player_died_game</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Gamestate = GamestateEnem.Endgame;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当点击进行游戏按钮时，更新当前状态开始游戏</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onchick_beginbutton</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Gamestate = GamestateEnem.Ingame;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 更改游戏状态时进行游戏面板的更新</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updata_Gamestate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        set_begingamePlane(Gamestate==GamestateEnem.Begingame);</span><br><span class="line">        set_ingamePlane(Gamestate==GamestateEnem.Ingame);</span><br><span class="line">        set_endgamePlane(Gamestate==GamestateEnem.Endgame);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">set_begingamePlane</span>(<span class="params"><span class="built_in">bool</span> is_active</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        begingamePlane.gameObject.SetActive(is_active);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">set_ingamePlane</span>(<span class="params"><span class="built_in">bool</span> is_active</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ingamePlane.gameObject.SetActive(is_active);</span><br><span class="line">        <span class="comment">//当在游戏中是将开始生成障碍物</span></span><br><span class="line">        <span class="comment">//其他时候不生成</span></span><br><span class="line">        pipelineManage_gameobgect.GetComponent&lt;pipelineManage&gt;().Is_creat_barrier = is_active;</span><br><span class="line">        <span class="comment">//设置小鸟是否使用重力</span></span><br><span class="line">        player.transform.GetChild(<span class="number">0</span>).GetComponent&lt;Rigidbody2D&gt;().simulated = is_active;</span><br><span class="line">        <span class="comment">//设置角色控制器的状态</span></span><br><span class="line">        player.GetComponent&lt;playerControl&gt;().enabled = is_active;</span><br><span class="line">        <span class="keyword">if</span>(is_active)</span><br><span class="line">        &#123;</span><br><span class="line">            player.GetComponent&lt;playerControl&gt;().Score = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">set_endgamePlane</span>(<span class="params"><span class="built_in">bool</span> is_active</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_active)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">int</span> score = player.GetComponent&lt;playerControl&gt;().Score;</span><br><span class="line">            score=Mathf.Max( GameDataManager.GetInt(<span class="string">&quot;bastscore&quot;</span>),score);</span><br><span class="line">            endgame_best_score_text.text = Convert.ToString(score);</span><br><span class="line">            Debug.Log(<span class="string">&quot;分数为&quot;</span>+score);</span><br><span class="line">            GameDataManager.SetInt(<span class="string">&quot;bastscore&quot;</span>, score );</span><br><span class="line"></span><br><span class="line">            Debug.Log(<span class="string">&quot;最大分数为：&quot;</span> + GameDataManager.GetInt(<span class="string">&quot;bastscore&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        endgamePlane.gameObject.SetActive(is_active);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 退出按钮</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onchick_exit_game</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="meta">#<span class="keyword">if</span> UNITY_EDITOR</span></span><br><span class="line">            UnityEditor.EditorApplication.isPlaying = <span class="literal">false</span>;</span><br><span class="line">        <span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">            Application.Quit();</span><br><span class="line">        <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="GameDataManager-游戏数据管理"><a href="#GameDataManager-游戏数据管理" class="headerlink" title="GameDataManager 游戏数据管理"></a>GameDataManager 游戏数据管理</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 本地数据管理类 </span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GameDataManager</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Bool</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetBool</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">bool</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetString(key + <span class="string">&quot;Bool&quot;</span>, <span class="keyword">value</span>.ToString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Bool</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">GetBool</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">bool</span>.Parse(PlayerPrefs.GetString(key + <span class="string">&quot;Bool&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存String</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetString</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">string</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetString(key, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取String</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">GetString</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> PlayerPrefs.GetString(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Float</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetFloat</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">float</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetFloat(key, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Float</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">GetFloat</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> PlayerPrefs.GetFloat(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Int</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetInt</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetInt(key, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Int</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">GetInt</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> PlayerPrefs.GetInt(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存IntArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetIntArray</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">int</span>[] <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">value</span>.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            PlayerPrefs.SetInt(key + <span class="string">&quot;IntArray&quot;</span> + i, <span class="keyword">value</span>[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        PlayerPrefs.SetInt(key + <span class="string">&quot;IntArray&quot;</span>, <span class="keyword">value</span>.Length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取IntArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span>[] <span class="title">GetIntArray</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] intArr = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (PlayerPrefs.GetInt(key + <span class="string">&quot;IntArray&quot;</span>) != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            intArr = <span class="keyword">new</span> <span class="built_in">int</span>[PlayerPrefs.GetInt(key + <span class="string">&quot;IntArray&quot;</span>)];</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; intArr.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                intArr[i] = PlayerPrefs.GetInt(key + <span class="string">&quot;IntArray&quot;</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> intArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存FloatArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetFloatArray</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">float</span>[] <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">value</span>.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            PlayerPrefs.SetFloat(key + <span class="string">&quot;FloatArray&quot;</span> + i, <span class="keyword">value</span>[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        PlayerPrefs.SetInt(key + <span class="string">&quot;FloatArray&quot;</span>, <span class="keyword">value</span>.Length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取FloatArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span>[] <span class="title">GetFloatArray</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span>[] floatArr = <span class="keyword">new</span> <span class="built_in">float</span>[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (PlayerPrefs.GetInt(key + <span class="string">&quot;FloatArray&quot;</span>) != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            floatArr = <span class="keyword">new</span> <span class="built_in">float</span>[PlayerPrefs.GetInt(key + <span class="string">&quot;FloatArray&quot;</span>)];</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; floatArr.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                floatArr[i] = PlayerPrefs.GetFloat(key + <span class="string">&quot;FloatArray&quot;</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> floatArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存StringArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetStringArray</span>(<span class="params"><span class="built_in">string</span> key, <span class="built_in">string</span>[] <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">value</span>.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            PlayerPrefs.SetString(key + <span class="string">&quot;StringArray&quot;</span> + i, <span class="keyword">value</span>[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        PlayerPrefs.SetInt(key + <span class="string">&quot;StringArray&quot;</span>, <span class="keyword">value</span>.Length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取StringArray</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span>[] <span class="title">GetStringArray</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span>[] stringArr = <span class="keyword">new</span> <span class="built_in">string</span>[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (PlayerPrefs.GetInt(key + <span class="string">&quot;StringArray&quot;</span>) != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            stringArr = <span class="keyword">new</span> <span class="built_in">string</span>[PlayerPrefs.GetInt(key + <span class="string">&quot;StringArray&quot;</span>)];</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; stringArr.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                stringArr[i] = PlayerPrefs.GetString(key + <span class="string">&quot;StringArray&quot;</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stringArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Vector2</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetVector2</span>(<span class="params"><span class="built_in">string</span> key, Vector2 <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;Vector2X&quot;</span>, <span class="keyword">value</span>.x);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;Vector2Y&quot;</span>, <span class="keyword">value</span>.y);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Vector2</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Vector2 <span class="title">GetVector2</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Vector2 Vector2;</span><br><span class="line">        Vector2.x = PlayerPrefs.GetFloat(key + <span class="string">&quot;Vector2X&quot;</span>);</span><br><span class="line">        Vector2.y = PlayerPrefs.GetFloat(key + <span class="string">&quot;Vector2Y&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> Vector2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Vector3</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetVector3</span>(<span class="params"><span class="built_in">string</span> key, Vector3 <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;Vector3X&quot;</span>, <span class="keyword">value</span>.x);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;Vector3Y&quot;</span>, <span class="keyword">value</span>.y);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;Vector3Z&quot;</span>, <span class="keyword">value</span>.z);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Vector3</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Vector3 <span class="title">GetVector3</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Vector3 vector3;</span><br><span class="line">        vector3.x = PlayerPrefs.GetFloat(key + <span class="string">&quot;Vector3X&quot;</span>);</span><br><span class="line">        vector3.y = PlayerPrefs.GetFloat(key + <span class="string">&quot;Vector3Y&quot;</span>);</span><br><span class="line">        vector3.z = PlayerPrefs.GetFloat(key + <span class="string">&quot;Vector3Z&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> vector3;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 储存Quaternion</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;value&quot;&gt;</span>值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetQuaternion</span>(<span class="params"><span class="built_in">string</span> key, Quaternion <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;QuaternionX&quot;</span>, <span class="keyword">value</span>.x);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;QuaternionY&quot;</span>, <span class="keyword">value</span>.y);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;QuaternionZ&quot;</span>, <span class="keyword">value</span>.z);</span><br><span class="line">        PlayerPrefs.SetFloat(key + <span class="string">&quot;QuaternionW&quot;</span>, <span class="keyword">value</span>.w);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 取Quaternion</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;key&quot;&gt;</span>键<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Quaternion <span class="title">GetQuaternion</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Quaternion quaternion;</span><br><span class="line">        quaternion.x = PlayerPrefs.GetFloat(key + <span class="string">&quot;QuaternionX&quot;</span>);</span><br><span class="line">        quaternion.y = PlayerPrefs.GetFloat(key + <span class="string">&quot;QuaternionY&quot;</span>);</span><br><span class="line">        quaternion.z = PlayerPrefs.GetFloat(key + <span class="string">&quot;QuaternionZ&quot;</span>);</span><br><span class="line">        quaternion.w = PlayerPrefs.GetFloat(key + <span class="string">&quot;QuaternionW&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> quaternion;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="playerControl-角色控制死亡和分数"><a href="#playerControl-角色控制死亡和分数" class="headerlink" title="playerControl 角色控制死亡和分数"></a>playerControl 角色控制死亡和分数</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.Events;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.UI;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">playerControl</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;点击后向上的速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> up_v;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;重力速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> down_v;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">new</span> Rigidbody2D rigidbody2D;</span><br><span class="line">    <span class="keyword">private</span> Animator player_animator;</span><br><span class="line">    <span class="keyword">public</span> Text score_Text;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;声音片段&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> AudioClip[] audioClips;</span><br><span class="line">    <span class="comment">//角色死亡的事件</span></span><br><span class="line">    <span class="keyword">public</span> UnityAction player_died_Action;</span><br><span class="line">    <span class="keyword">public</span> UnityAction&lt;<span class="built_in">int</span>&gt; score_Action;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> score;</span><br><span class="line">    <span class="keyword">private</span> Transform player_rig_Transform;</span><br><span class="line">    <span class="keyword">private</span> AudioSource audioSource;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Score</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> score; &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            score = <span class="keyword">value</span>;</span><br><span class="line">            <span class="keyword">if</span>(score_Action!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                score_Action(Score);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> is_died;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> Is_died</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> is_died; &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            is_died = <span class="keyword">value</span>;</span><br><span class="line">            <span class="keyword">if</span>(is_died)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (player_died_Action != <span class="literal">null</span>) player_died_Action();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        rigidbody2D = transform.GetChild(<span class="number">0</span>).GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">        player_animator = transform.GetComponent&lt;Animator&gt;();</span><br><span class="line">        player_died_Action += palyer_died_palyerControl;</span><br><span class="line">        player_rig_Transform = transform.GetChild(<span class="number">0</span>);</span><br><span class="line">        audioSource = transform.GetComponent&lt;AudioSource&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当玩家死亡时玩家控制器做的事情</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">palyer_died_palyerControl</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        player_animator.SetTrigger(<span class="string">&quot;rest&quot;</span>);</span><br><span class="line">        player_rig_Transform.position = <span class="keyword">new</span> Vector2(<span class="number">0f</span>, <span class="number">0.8f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当角色控制器被启用时进行操作</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Is_died = <span class="literal">false</span>;</span><br><span class="line">        player_rig_Transform.position = <span class="keyword">new</span> Vector2(<span class="number">-1.85f</span>, <span class="number">0.8f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        is_fly();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 判断是否在fly</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">is_fly</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">0</span>) || Input.touchCount != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            audioSource.PlayOneShot(audioClips[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                player_animator.SetTrigger(<span class="string">&quot;fly&quot;</span>);</span><br><span class="line">                rigidbody2D.velocity = Vector2.zero;</span><br><span class="line">                rigidbody2D.AddForce(Vector2.up * up_v);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (Input.touchCount != <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Touch touch = Input.GetTouch(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">if</span> (touch.phase == TouchPhase.Began)</span><br><span class="line">                &#123;</span><br><span class="line">                    player_animator.SetTrigger(<span class="string">&quot;fly&quot;</span>);</span><br><span class="line">                    rigidbody2D.velocity = Vector2.zero;</span><br><span class="line">                    rigidbody2D.AddForce(Vector2.up * up_v);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            rigidbody2D.AddForce(Vector2.down * down_v * Time.deltaTime);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="playerRig-玩家刚体分数和死亡判定"><a href="#playerRig-玩家刚体分数和死亡判定" class="headerlink" title="playerRig 玩家刚体分数和死亡判定"></a>playerRig 玩家刚体分数和死亡判定</h2><p>using System.Collections;<br>using System.Collections.Generic;<br>using UnityEngine;</p><p>public class playerRig : MonoBehaviour<br>{<br>    private GameObject player;<br>    public AudioClip[] audioClips;<br>    void Start()<br>    {<br>        player &#x3D; transform.parent.gameObject;<br>    }<br>    &#x2F;&#x2F;&#x2F; <summary><br>    &#x2F;&#x2F;&#x2F; 当碰撞时玩家死亡<br>    &#x2F;&#x2F;&#x2F; </summary><br>    &#x2F;&#x2F;&#x2F; <param name="collision"></param><br>    private void OnCollisionStay2D(Collision2D collision)<br>    {<br>        Debug.Log(“玩家死亡了！”);<br>        player.GetComponent<playerControl>().Is_died &#x3D; true;<br>        AudioSource.PlayClipAtPoint(audioClips[1], transform.position);<br>    }<br>    private void OnTriggerEnter2D(Collider2D collision)<br>    {<br>        player.GetComponent<playerControl>().Score++;<br>        AudioSource.PlayClipAtPoint(audioClips[0], transform.position);<br>    }<br>}</p><h2 id="pipelineManage-管线生成和管理"><a href="#pipelineManage-管线生成和管理" class="headerlink" title="pipelineManage 管线生成和管理"></a>pipelineManage 管线生成和管理</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">pipelineManage</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;GameObject&gt; barrier;</span><br><span class="line">    <span class="keyword">private</span> Coroutine coroutine = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> end_barrier_id=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">private</span> GameObject player;</span><br><span class="line">    <span class="comment">//管线速度</span></span><br><span class="line">    [<span class="meta">HideInInspector</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> pipeline_v;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> begin_v;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 是否生成障碍物</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> is_creat_barrier;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 是否生成障碍物的属性</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 生成就开始生成障碍物的携程，否则关闭</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> Is_creat_barrier</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;<span class="keyword">return</span> is_creat_barrier; &#125;</span><br><span class="line">        <span class="keyword">set</span> </span><br><span class="line">        &#123;</span><br><span class="line">            is_creat_barrier=<span class="keyword">value</span>;</span><br><span class="line">            <span class="keyword">if</span> (is_creat_barrier) begin_creat_barrier();</span><br><span class="line">            <span class="keyword">else</span> end_creat_barrier();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        begin_v = <span class="number">5f</span>;</span><br><span class="line">        pipeline_v = begin_v;</span><br><span class="line">        barrier = <span class="keyword">new</span> List&lt;GameObject&gt;();</span><br><span class="line">        <span class="comment">//将所有子对象加入障碍物列表中</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;transform.childCount;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            GameObject child = transform.GetChild(i).gameObject;</span><br><span class="line">            barrier.Add(child);</span><br><span class="line">        &#125;</span><br><span class="line">        player = GameObject.FindGameObjectWithTag(<span class="string">&quot;Player&quot;</span>);</span><br><span class="line">        <span class="comment">//添加死亡事件</span></span><br><span class="line">        player.GetComponent&lt;playerControl&gt;().player_died_Action += player_died_pipelineManage;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//添加分数事件</span></span><br><span class="line">        player.GetComponent&lt;playerControl&gt;().score_Action += score_pipeline_Manage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当分数变化时，管线管理器要做的事情</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;score&quot;&gt;</span>分数<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">score_pipeline_Manage</span>(<span class="params"><span class="built_in">int</span> score</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> sc = score;</span><br><span class="line">        pipeline_v =begin_v*(<span class="number">100f</span> + sc) / <span class="number">100f</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 角色死亡时管道管理器做的事情</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 将生成的管线删除</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">player_died_pipelineManage</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=barrier.Count;i&lt;transform.childCount;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Destroy(transform.GetChild(i).gameObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 开始生成障碍物</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">begin_creat_barrier</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        coroutine = StartCoroutine(creat_barrier_coroutine());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 关闭生成障碍物</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">end_creat_barrier</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(coroutine!=<span class="literal">null</span>)</span><br><span class="line">        StopCoroutine(coroutine);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 创建生成障碍物携程</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>间隔秒数<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function">IEnumerator <span class="title">creat_barrier_coroutine</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            creat_barrier();</span><br><span class="line">            <span class="built_in">float</span> time = Random.Range(<span class="number">2f</span>, <span class="number">3f</span>);</span><br><span class="line">            <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params">time</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 最后一次生成位置的y值</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> last_y;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 最小的y值</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> min_y=<span class="number">-2.5f</span>;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 创建障碍物</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">creat_barrier</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">int</span> id ;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            id = Random.Range(<span class="number">0</span>, barrier.Count);</span><br><span class="line">        &#125; <span class="keyword">while</span> (id == end_barrier_id);</span><br><span class="line">        end_barrier_id = id;</span><br><span class="line">        last_y = Random.Range(min_y, -min_y);</span><br><span class="line">    </span><br><span class="line">        GameObject gameObject = Instantiate(barrier[id],<span class="keyword">new</span> Vector2(transform.position.x,last_y), Quaternion.identity);</span><br><span class="line">        Destroy(gameObject, <span class="number">5f</span>);</span><br><span class="line">        gameObject.transform.SetParent(transform);</span><br><span class="line">        gameObject.SetActive(<span class="literal">true</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="pipeline-控制管线速度"><a href="#pipeline-控制管线速度" class="headerlink" title="pipeline 控制管线速度"></a>pipeline 控制管线速度</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">pipeline</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;管线移动速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> v;</span><br><span class="line">    <span class="keyword">private</span> GameObject pipeline_Manage;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        pipeline_Manage = transform.parent.gameObject;</span><br><span class="line">        v = pipeline_Manage.GetComponent&lt;pipelineManage&gt;().pipeline_v;</span><br><span class="line">        Debug.Log(<span class="string">&quot;我的速度是&quot;</span> + v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 管线向左移动</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        transform.position = <span class="keyword">new</span> Vector2(transform.position.x -v * Time.deltaTime, transform.position.y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ground-控制地面移动速度"><a href="#ground-控制地面移动速度" class="headerlink" title="ground 控制地面移动速度"></a>ground 控制地面移动速度</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ground</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Animator animator;</span><br><span class="line">    <span class="keyword">private</span> GameObject player;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        animator = transform.GetComponent&lt;Animator&gt;();</span><br><span class="line">        player = GameObject.FindGameObjectWithTag(<span class="string">&quot;Player&quot;</span>);</span><br><span class="line">        player.GetComponent&lt;playerControl&gt;().score_Action += score_ground;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">score_ground</span>(<span class="params"><span class="built_in">int</span> score</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> sc = score;</span><br><span class="line">        animator.SetFloat(<span class="string">&quot;ground_v&quot;</span>,(<span class="number">100f</span>+sc)/<span class="number">100f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;玩家动画刚体  玩家死亡实现方式  flying bird代码&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="小鸟案例" scheme="http://example.com/tags/%E5%B0%8F%E9%B8%9F%E6%A1%88%E4%BE%8B/"/>
    
  </entry>
  
  <entry>
    <title>unity10-26</title>
    <link href="http://example.com/2022/10/26/unity10-26/"/>
    <id>http://example.com/2022/10/26/unity10-26/</id>
    <published>2022-10-25T23:58:23.914Z</published>
    <updated>2022-10-27T02:26:25.693Z</updated>
    
    <content type="html"><![CDATA[<h1 id="游戏开发技术领域"><a href="#游戏开发技术领域" class="headerlink" title="游戏开发技术领域"></a>游戏开发技术领域</h1><p><img src="/../images/image-20221026084042198.png" alt="image-20221026084042198"></p><span id="more"></span><h1 id="制作地面移动效果"><a href="#制作地面移动效果" class="headerlink" title="制作地面移动效果"></a>制作地面移动效果</h1><h2 id="动画曲线"><a href="#动画曲线" class="headerlink" title="动画曲线"></a>动画曲线</h2><p><img src="/../images/image-20221026152647020.png" alt="image-20221026152647020"></p><p>使用动画制作地面移动效果会出现平滑移动的效果，即移动速度不均匀</p><p>将左右曲线设置为liner即可</p><p><img src="/../images/image-20221026153004901.png" alt="image-20221026153004901"></p><h1 id="制作小鸟动画"><a href="#制作小鸟动画" class="headerlink" title="制作小鸟动画"></a>制作小鸟动画</h1><h2 id="设置物体的中心位置"><a href="#设置物体的中心位置" class="headerlink" title="设置物体的中心位置"></a>设置物体的中心位置</h2><p>点开所用素材，设置Pivot</p><p><img src="/../images/image-20221026161548071.png" alt="image-20221026161548071"></p><p>Any State 代表所有状态，连线代表所有状态都可以进行转移</p><p><img src="/../images/image-20221026171506225.png" alt="image-20221026171506225"></p><h1 id="更新面板状态代码"><a href="#更新面板状态代码" class="headerlink" title="更新面板状态代码"></a>更新面板状态代码</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">game</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 游戏状态枚举</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">enum</span> GamestateEnem</span><br><span class="line">    &#123;</span><br><span class="line">        Ingame,Begingame,Endgame</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当前游戏状态</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> GamestateEnem gamestate;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当前游戏状态属性</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 每次更新游戏状态更新面板</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> GamestateEnem Gamestate</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> gamestate; &#125;</span><br><span class="line">        <span class="keyword">set</span> </span><br><span class="line">        &#123; </span><br><span class="line">            gamestate = <span class="keyword">value</span>;</span><br><span class="line">            updata_Gamestate();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> Transform begingamePlane;</span><br><span class="line">    <span class="keyword">private</span> Transform ingamePlane;</span><br><span class="line">    <span class="keyword">private</span> Transform endgamePlane;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        begingamePlane = transform.GetChild(<span class="number">0</span>);</span><br><span class="line">        ingamePlane = transform.GetChild(<span class="number">1</span>);</span><br><span class="line">        endgamePlane = transform.GetChild(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        Gamestate = GamestateEnem.Begingame;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 当点击进行游戏按钮时，更新当前状态开始游戏</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onchick_beginbutton</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Gamestate = GamestateEnem.Ingame;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 更改游戏状态时进行游戏面板的更新</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updata_Gamestate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        begingamePlane.gameObject.SetActive(Gamestate==GamestateEnem.Begingame);</span><br><span class="line">        ingamePlane.gameObject.SetActive(Gamestate==GamestateEnem.Ingame);</span><br><span class="line">        endgamePlane.gameObject.SetActive(Gamestate==GamestateEnem.Endgame);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="管道生成"><a href="#管道生成" class="headerlink" title="管道生成"></a>管道生成</h1><p>随机数</p><p><strong>int型，随机值涵盖：最小值，不涵盖最大值</strong> 被坑了！！<br>例：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Random.Range(<span class="number">0</span>,<span class="number">1</span>)；<span class="comment">//返回结果永远是0!</span></span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">pipelineManage</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;GameObject&gt; barrier;</span><br><span class="line">    <span class="keyword">private</span> Coroutine coroutine = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> end_barrier_id=<span class="number">-1</span>;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 是否生成障碍物</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> is_creat_barrier;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 是否生成障碍物的属性</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 生成就开始生成障碍物的携程，否则关闭</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> Is_creat_barrier</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;<span class="keyword">return</span> is_creat_barrier; &#125;</span><br><span class="line">        <span class="keyword">set</span> </span><br><span class="line">        &#123;</span><br><span class="line">            is_creat_barrier=<span class="keyword">value</span>;</span><br><span class="line">            <span class="keyword">if</span> (is_creat_barrier) begin_creat_barrier();</span><br><span class="line">            <span class="keyword">else</span> end_creat_barrier();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        barrier = <span class="keyword">new</span> List&lt;GameObject&gt;();</span><br><span class="line">        <span class="comment">//将所有子对象加入障碍物列表中</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;transform.childCount;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            GameObject child = transform.GetChild(i).gameObject;</span><br><span class="line">            barrier.Add(child);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 开始生成障碍物</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">begin_creat_barrier</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        coroutine = StartCoroutine(creat_barrier_coroutine());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 关闭生成障碍物</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">end_creat_barrier</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(coroutine!=<span class="literal">null</span>)</span><br><span class="line">        StopCoroutine(coroutine);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 创建生成障碍物携程</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>间隔秒数<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function">IEnumerator <span class="title">creat_barrier_coroutine</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            creat_barrier();</span><br><span class="line">            <span class="built_in">float</span> time = Random.Range(<span class="number">2f</span>, <span class="number">3f</span>);</span><br><span class="line">            <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params">time</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 最后一次生成位置的y值</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> last_y;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 最小的y值</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> min_y=<span class="number">-2.5f</span>;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 创建障碍物</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">creat_barrier</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">int</span> id ;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            id = Random.Range(<span class="number">0</span>, barrier.Count);</span><br><span class="line">        &#125; <span class="keyword">while</span> (id == end_barrier_id);</span><br><span class="line">        end_barrier_id = id;</span><br><span class="line">        last_y = Random.Range(min_y, -min_y);</span><br><span class="line">    </span><br><span class="line">        GameObject gameObject = Instantiate(barrier[id],<span class="keyword">new</span> Vector2(transform.position.x,last_y), Quaternion.identity);</span><br><span class="line">        Destroy(gameObject, <span class="number">5f</span>);</span><br><span class="line">        gameObject.transform.SetParent(transform);</span><br><span class="line">        gameObject.SetActive(<span class="literal">true</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;游戏开发技术领域&quot;&gt;&lt;a href=&quot;#游戏开发技术领域&quot; class=&quot;headerlink&quot; title=&quot;游戏开发技术领域&quot;&gt;&lt;/a&gt;游戏开发技术领域&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/../images/image-20221026084042198.png&quot; alt=&quot;image-20221026084042198&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="小鸟案例" scheme="http://example.com/tags/%E5%B0%8F%E9%B8%9F%E6%A1%88%E4%BE%8B/"/>
    
  </entry>
  
  <entry>
    <title>圣经</title>
    <link href="http://example.com/2022/10/25/%E5%9C%A3%E7%BB%8F/"/>
    <id>http://example.com/2022/10/25/%E5%9C%A3%E7%BB%8F/</id>
    <published>2022-10-25T14:34:54.367Z</published>
    <updated>2022-10-26T06:33:24.117Z</updated>
    
    <content type="html"><![CDATA[<h1 id="团队四种人"><a href="#团队四种人" class="headerlink" title="团队四种人"></a>团队四种人</h1><p><img src="/../images/image-20221025223641429.png" alt="image-20221025223641429"></p><span id="more"></span><p>选择环境,获取信息，有知觉，选择角度，去做（专注）</p><p>入门：关注于过程  精通：关注于结果</p><h1 id="学习方式"><a href="#学习方式" class="headerlink" title="学习方式"></a>学习方式</h1><p><img src="/../images/image-20221026081620549.png" alt="image-20221026081620549"></p><p>学习是循序渐进放到过程，要有良好的心态</p><p><img src="/../images/image-20221026082020113.png" alt="image-20221026082020113"></p><p>经历跃迁的成长</p><p>于过去的自己进行对比</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;团队四种人&quot;&gt;&lt;a href=&quot;#团队四种人&quot; class=&quot;headerlink&quot; title=&quot;团队四种人&quot;&gt;&lt;/a&gt;团队四种人&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/../images/image-20221025223641429.png&quot; alt=&quot;image-20221025223641429&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="圣经" scheme="http://example.com/categories/%E5%9C%A3%E7%BB%8F/"/>
    
    
  </entry>
  
  <entry>
    <title>unity10-25</title>
    <link href="http://example.com/2022/10/25/unity10-25/"/>
    <id>http://example.com/2022/10/25/unity10-25/</id>
    <published>2022-10-25T00:07:52.714Z</published>
    <updated>2022-10-25T14:34:09.259Z</updated>
    
    <content type="html"><![CDATA[<h1 id="动画基础"><a href="#动画基础" class="headerlink" title="动画基础"></a>动画基础</h1><h2 id="动画面板"><a href="#动画面板" class="headerlink" title="动画面板"></a>动画面板</h2><p><img src="/../images/image-20221025081330434.png" alt="image-20221025081330434"></p><p>loop time循环时间</p><p>Loop Pose 循环姿势，使循环时更加流畅</p><p>cycle offset 偏移量，从哪来开始播放</p><span id="more"></span><p><img src="/../images/image-20221025081638244.png" alt="image-20221025081638244"></p><p>Back Into Pose 烘焙在姿势，勾选后将不在相应位置产生变化（锁定某属性）</p><p><img src="/../images/image-20221025082216295.png" alt="image-20221025082216295"></p><p>based upon 烘焙基准 </p><p>original 设置的中心， Center of Mass 质量的中心 真中心（对角线）</p><p>Feet 脚的位置</p><p><img src="/../images/image-20221025082632308.png" alt="image-20221025082632308"></p><p>mirror 镜像  动画将镜像播放</p><p><img src="/../images/image-20221025083339022.png" alt="image-20221025083339022"></p><p>Controller 动画控制器</p><p>Avatae 骨骼</p><p>Apply Root Motion 应用根文件 ，即是否应用动画的设置</p><h2 id="Animator-Controller"><a href="#Animator-Controller" class="headerlink" title="Animator Controller"></a>Animator Controller</h2><p><img src="/../images/image-20221025083821401.png" alt="image-20221025083821401"></p><p>set as Layer Default State 设置为本层默认动画</p><p><img src="/../images/image-20221025085441219.png" alt="image-20221025085441219"></p><p>Conditions 设置条件值 当条件满足时进行切换</p><p>Has Exit Time 是否等动画播放完才能进行切换</p><p>只需要执行一次的动画：设置Trigger触发，将Trigger设置为条件，设置触发的动画为有退出时间</p><h2 id="设置动画速度"><a href="#设置动画速度" class="headerlink" title="设置动画速度"></a>设置动画速度</h2><p><img src="/../images/image-20221025090800493.png" alt="image-20221025090800493"></p><p>勾选 parameter  设置参数  动画的播放速度就取决于参数的值</p><h2 id="脚本设置动画参数"><a href="#脚本设置动画参数" class="headerlink" title="脚本设置动画参数"></a>脚本设置动画参数</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Animator animator;</span><br><span class="line"><span class="comment">//动画参数名称可以转化为一个ID（int）</span></span><br><span class="line"><span class="built_in">int</span> id=Animator.StringYoHash(<span class="string">&quot;参数名称&quot;</span>);</span><br><span class="line">animation.SetBool(<span class="string">&quot;参数名称&quot;</span>||参数id,值);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/../images/image-20221025103540129.png" alt="image-20221025103540129"></p><p>设置插值变化，变化时间，变化速度</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//获取第0层的当前动画状态信息</span></span><br><span class="line">AnimatorStateInfo info = ani.GetCurrentAnimatorStateInfo(<span class="number">0</span>);  <span class="comment">//动画层级 </span></span><br><span class="line"><span class="comment">//判断当前播放的动画状态是不是Idle</span></span><br><span class="line"><span class="keyword">if</span>(info.IsName(<span class="string">&quot;Idle&quot;</span>))【通过名字判断】</span><br><span class="line"><span class="keyword">if</span>(info.IsTag(<span class="string">&quot;Idle&quot;</span>))【通过标签判断】</span><br><span class="line"><span class="keyword">if</span>(info.shortNameHash == Animator.StringToHash(<span class="string">&quot;Idle&quot;</span>))【通过hashid判断】【更高效】</span><br></pre></td></tr></table></figure><p><img src="/../images/image-20221025122133310.png" alt="image-20221025122133310"></p><p>剪切好的动画会出现在模型下，可以放入动画机中使用</p><h1 id="声音组件"><a href="#声音组件" class="headerlink" title="声音组件"></a>声音组件</h1><p><img src="/../images/image-20221025173601920.png" alt="image-20221025173601920"></p><p><code>Audio Source </code>组件</p><p><code>AudioClip</code>  声音源</p><p><code>mute</code>静音</p><p><code>Play on awake</code> 在开始时播放</p><p><code>loop</code> 循环</p><p><img src="/../images/image-20221025175202116.png" alt="image-20221025175202116"></p><p><code>Volume</code>音量</p><p><code>Spatial Blend</code> 设置音量为2D 3D  音量为计算为2D+3D*（f（距离））</p><p>Audio Listener  听声音的组件，一个场景只能有一个 Audio Listener组件</p><h2 id="3D声音的设置"><a href="#3D声音的设置" class="headerlink" title="3D声音的设置"></a>3D声音的设置</h2><p><img src="/../images/image-20221025180408632.png" alt="image-20221025180408632"></p><h2 id="发声方式"><a href="#发声方式" class="headerlink" title="发声方式"></a>发声方式</h2><p><img src="/../images/image-20221025183302175.png" alt="image-20221025183302175"></p><p><img src="/../images/image-20221025201856446.png" alt="image-20221025201856446"></p><p>第一种方法当一种声音没有播放完就要播放下一声音时会出问题</p><p>第二种播放方法可以避免第一种方法的问题，但是会频繁创建销毁对象，消耗内存，不过可以使用对象池方法缓解</p><h1 id="间隔一段时间后执行函数"><a href="#间隔一段时间后执行函数" class="headerlink" title="间隔一段时间后执行函数"></a>间隔一段时间后执行函数</h1><p><img src="/../images/image-20221025201950366.png" alt="image-20221025201950366"></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Invoke(<span class="string">&quot;方法名&quot;</span>, 多长时间后执行)；</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;动画基础&quot;&gt;&lt;a href=&quot;#动画基础&quot; class=&quot;headerlink&quot; title=&quot;动画基础&quot;&gt;&lt;/a&gt;动画基础&lt;/h1&gt;&lt;h2 id=&quot;动画面板&quot;&gt;&lt;a href=&quot;#动画面板&quot; class=&quot;headerlink&quot; title=&quot;动画面板&quot;&gt;&lt;/a&gt;动画面板&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/../images/image-20221025081330434.png&quot; alt=&quot;image-20221025081330434&quot;&gt;&lt;/p&gt;
&lt;p&gt;loop time循环时间&lt;/p&gt;
&lt;p&gt;Loop Pose 循环姿势，使循环时更加流畅&lt;/p&gt;
&lt;p&gt;cycle offset 偏移量，从哪来开始播放&lt;/p&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="动画" scheme="http://example.com/tags/%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>unity10-24</title>
    <link href="http://example.com/2022/10/24/unity10-24/"/>
    <id>http://example.com/2022/10/24/unity10-24/</id>
    <published>2022-10-24T09:00:36.000Z</published>
    <updated>2022-10-24T15:51:14.987Z</updated>
    
    <content type="html"><![CDATA[<h1 id="动画基础"><a href="#动画基础" class="headerlink" title="动画基础"></a>动画基础</h1><h2 id="创建动画"><a href="#创建动画" class="headerlink" title="创建动画"></a>创建动画</h2><p>选择需要设置动画的游戏对象，打开win-Animation-Animation，新建动画控制器，Animator Controller</p><p>创建动画片段Animator clip</p><p>任何属性都可以设置动画，如位置，颜色，精灵等</p><p>属性发生变化叫做动画</p><p>可以将模型拖动到动画中进行预览</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">None：不导入动画Animation Clip</span><br><span class="line">Legacy：用于早期动画设置，其不支持状态机Animator，无法对动画进行编辑，导入完后直接用Animation播放</span><br><span class="line">Generic：支持人形、非人形Model</span><br><span class="line">Humanoid：只支持人形Model，导入后用Animator播放（设置后Hirearchy模型里面自动添加Animator组件）Generic一样</span><br></pre></td></tr></table></figure><span id="more"></span><p><img src="/../images/image-20221024231718315.png" alt="image-20221024231718315"></p><h2 id="骨骼"><a href="#骨骼" class="headerlink" title="骨骼"></a>骨骼</h2><p><img src="/../images/image-20221024232840003.png" alt="image-20221024232840003"></p><p>人形骨骼，实线为必须骨骼，虚线为不必须骨骼</p><p>Muscles &amp; Settings  用测试骨骼做动作是否有问题</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;动画基础&quot;&gt;&lt;a href=&quot;#动画基础&quot; class=&quot;headerlink&quot; title=&quot;动画基础&quot;&gt;&lt;/a&gt;动画基础&lt;/h1&gt;&lt;h2 id=&quot;创建动画&quot;&gt;&lt;a href=&quot;#创建动画&quot; class=&quot;headerlink&quot; title=&quot;创建动画&quot;&gt;&lt;/a&gt;创建动画&lt;/h2&gt;&lt;p&gt;选择需要设置动画的游戏对象，打开win-Animation-Animation，新建动画控制器，Animator Controller&lt;/p&gt;
&lt;p&gt;创建动画片段Animator clip&lt;/p&gt;
&lt;p&gt;任何属性都可以设置动画，如位置，颜色，精灵等&lt;/p&gt;
&lt;p&gt;属性发生变化叫做动画&lt;/p&gt;
&lt;p&gt;可以将模型拖动到动画中进行预览&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;None：不导入动画Animation Clip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Legacy：用于早期动画设置，其不支持状态机Animator，无法对动画进行编辑，导入完后直接用Animation播放&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Generic：支持人形、非人形Model&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Humanoid：只支持人形Model，导入后用Animator播放（设置后Hirearchy模型里面自动添加Animator组件）Generic一样&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="动画" scheme="http://example.com/tags/%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>思维题</title>
    <link href="http://example.com/2022/10/23/%E6%80%9D%E7%BB%B4%E9%A2%98/"/>
    <id>http://example.com/2022/10/23/%E6%80%9D%E7%BB%B4%E9%A2%98/</id>
    <published>2022-10-23T09:34:47.000Z</published>
    <updated>2022-10-23T13:21:38.961Z</updated>
    
    <content type="html"><![CDATA[<h1 id="12个球有一个球异重，问怎样最多三次称出"><a href="#12个球有一个球异重，问怎样最多三次称出" class="headerlink" title="12个球有一个球异重，问怎样最多三次称出"></a>12个球有一个球异重，问怎样最多三次称出</h1><p><img src="/../images/image-20221023212053819.png" alt="image-20221023212053819"></p><!--more---><p><img src="/../images/image-20221023212109207.png" alt="image-20221023212109207"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;12个球有一个球异重，问怎样最多三次称出&quot;&gt;&lt;a href=&quot;#12个球有一个球异重，问怎样最多三次称出&quot; class=&quot;headerlink&quot; title=&quot;12个球有一个球异重，问怎样最多三次称出&quot;&gt;&lt;/a&gt;12个球有一个球异重，问怎样最多三次称出&lt;/h1&gt;&lt;</summary>
      
    
    
    
    <category term="思维题" scheme="http://example.com/categories/%E6%80%9D%E7%BB%B4%E9%A2%98/"/>
    
    
  </entry>
  
  <entry>
    <title>unity10-23</title>
    <link href="http://example.com/2022/10/23/unity10-23/"/>
    <id>http://example.com/2022/10/23/unity10-23/</id>
    <published>2022-10-23T01:26:01.536Z</published>
    <updated>2022-10-23T15:51:20.146Z</updated>
    
    <content type="html"><![CDATA[<h1 id="lua实现热更新"><a href="#lua实现热更新" class="headerlink" title="lua实现热更新"></a><code>lua</code>实现热更新</h1><p>用<code>lua</code>主要是为了代码的热更新，因为C#是编译形语言，在打包的时候会直接进行编译成各平台可识别的代码，然后在程序启动的时候同时加载，在加载之后就无法更改了，所以C#本身是不具备代码更新的能力的，<code>lua</code>属于解释性语言，解释性语言的特性是只有使用到的时候才会进行加载，这样的话就可以做到没加载之前替换掉，达到代码的热更新</p><p><img src="/../images/image-20221023094056456.png" alt="image-20221023094056456"></p><span id="more"></span><p>普通更新流程提交审核时间比较长，开发商不能承受</p><p>玩家需要在应用商店重新进行下载，比较繁琐</p><p><img src="/../images/image-20221023094247823.png" alt="image-20221023094247823"></p><p>开发商打包更新资源，上传服务器时间比较快</p><p>玩家更新在游戏中可以更新</p><p><img src="/../images/image-20221023094504272.png" alt="image-20221023094504272"></p><p>c#可以通过脚本打包成动态库<code>Dll</code>在安卓上实现更新,但是不支持苹果，并且只能更新游戏资源如材质预制体等，不能更新代码</p><p><code>lua</code>脚本可以对安卓和苹果进行更新，更新范围更广泛</p><h1 id="常见u3D的lua热更新框架"><a href="#常见u3D的lua热更新框架" class="headerlink" title="常见u3D的lua热更新框架"></a>常见<code>u3D</code>的<code>lua</code>热更新框架</h1><p><img src="/../images/image-20221023094813897.png" alt="image-20221023094813897"></p><p><code>xlua</code>为后起之秀，为腾讯研发，比较稳定，有人维护</p><p><code>xLua</code>支持在发布前临时加入热更新功能，但是比较完备的框架一般不使用此功能，bug可能会比较多</p><p><code>tolua</code>的前身为<code>ulua</code>在市场上存在一定的保有量</p><h1 id="xlua如何使用"><a href="#xlua如何使用" class="headerlink" title="xlua如何使用"></a><code>xlua</code>如何使用</h1><p><img src="/../images/image-20221023095228440.png" alt="image-20221023095228440"></p><p><code>xlua</code>只是一个插件，功能比较简单，需要框架师进行二次架构与开发，次才能投入使用中</p><p><img src="/../images/image-20221023095701065.png" alt="image-20221023095701065"></p><p>判断框架是否成熟，是否有使用这个框架的稳步运营的游戏</p><p>游戏需求类型比较多，架构不可能很完美</p><h1 id="xlua课程怎么学习"><a href="#xlua课程怎么学习" class="headerlink" title="xlua课程怎么学习"></a><code>xlua</code>课程怎么学习</h1><p><img src="/../images/image-20221023100321038.png" alt="image-20221023100321038"></p><h2 id="学习过程"><a href="#学习过程" class="headerlink" title="学习过程"></a>学习过程</h2><p><img src="/../images/image-20221023101843919.png" alt="image-20221023101843919"></p><p><img src="/../images/image-20221023101909109.png" alt="image-20221023101909109"></p><p><img src="/../images/image-20221023102114138.png" alt="image-20221023102114138"></p><p><img src="/../images/image-20221023102145049.png" alt="image-20221023102145049"></p><p><img src="/../images/image-20221023102217630.png" alt="image-20221023102217630"></p><p><img src="/../images/image-20221023102235742.png" alt="image-20221023102235742"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;lua实现热更新&quot;&gt;&lt;a href=&quot;#lua实现热更新&quot; class=&quot;headerlink&quot; title=&quot;lua实现热更新&quot;&gt;&lt;/a&gt;&lt;code&gt;lua&lt;/code&gt;实现热更新&lt;/h1&gt;&lt;p&gt;用&lt;code&gt;lua&lt;/code&gt;主要是为了代码的热更新，因为C#是编译形语言，在打包的时候会直接进行编译成各平台可识别的代码，然后在程序启动的时候同时加载，在加载之后就无法更改了，所以C#本身是不具备代码更新的能力的，&lt;code&gt;lua&lt;/code&gt;属于解释性语言，解释性语言的特性是只有使用到的时候才会进行加载，这样的话就可以做到没加载之前替换掉，达到代码的热更新&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/../images/image-20221023094056456.png&quot; alt=&quot;image-20221023094056456&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="lua" scheme="http://example.com/tags/lua/"/>
    
  </entry>
  
  <entry>
    <title>SKILL笔记4</title>
    <link href="http://example.com/2022/10/22/SKILL%E7%AC%94%E8%AE%B04/"/>
    <id>http://example.com/2022/10/22/SKILL%E7%AC%94%E8%AE%B04/</id>
    <published>2022-10-22T12:06:34.085Z</published>
    <updated>2022-10-22T14:17:35.192Z</updated>
    
    <content type="html"><![CDATA[<h1 id="求职流程"><a href="#求职流程" class="headerlink" title="求职流程"></a>求职流程</h1><p><img src="/../images/image-20221022200702949.png" alt="image-20221022200702949"></p><span id="more"></span><p><img src="/../images/image-20221022201359576.png" alt="image-20221022201359576"></p><p>中大厂希望你是一张白纸</p><p>实习去大厂，最佳实习时间是大三暑假，</p><p>项目经验：一个商业项目，两个小案例项目，一个热更新项目</p><p>不要都准备独立游戏，做一些服务端游戏，网络游戏</p><p>比赛经验：最好为游戏相关，大厂举办的比赛，表示你有竞争意识和团队协助能力</p><p>名气大的公司看重基础知识的考查，计算机组成原理，网络，语言，数据结构与算法</p><p>数学用到比较少，图形和渲染要用到</p><p>图像学：概念性的题目，除TA可以不用深入血</p><p>网络：状态同步，帧同步</p><p>设计模式：项目中使用的比较多</p><p>应届生热更新为加分项，转行为必须项</p><p>性能优化一般为UI层面</p><p>基础知识很重要，掌握知识必须需要应用</p><p>学习动机很重要，学习不要急，地基要打好</p><p>记笔记方法：需要产生联想</p><p>精力曲线：在自己精力比较好的时候学习一些比较难的</p><p><img src="/../images/image-20221022203752318.png" alt="image-20221022203752318"></p><p>前三年最多跳槽一次，主动性跳槽不要太频繁</p><p>避免长时间搬砖做重复性工作，没有成长</p><p>要学会做一些难度系数比较高的工作</p><p>进入一家公司要考虑是否有导师有人带</p><p>前几年最好不要过多做小游戏棋牌类游戏</p><p>小游戏公司：羊了个🐏</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">第一阶段（10天）：独立开发一款小游戏</span><br><span class="line"></span><br><span class="line">第二阶段（3个月）：中大型网络项目实战：MMORPG，SLG，FPS，联机卡牌，MOBA</span><br><span class="line"></span><br><span class="line">   实现常规的业务系统，背包，装备，商店，聊天，好友</span><br><span class="line"></span><br><span class="line">第三阶段（7天）：Lua+xlua </span><br><span class="line"></span><br><span class="line">第四阶段（15天）：以xlua插件为中心，学习热更新流程 </span><br><span class="line"></span><br><span class="line">第五阶段（30天）：准备就业，撰写简历，小游戏和lua，网络项目，技术复习</span><br><span class="line">   搜集面试题</span><br><span class="line">       可以去牛客</span><br><span class="line">​</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>系统学习：不要试图在这儿阶段设立把绝大部分基础都搞懂的目标</p><p>​搞清知识的概念，优缺点，应用场景，大概是做什么的</p><p><img src="/../images/image-20221022212113266.png" alt="image-20221022212113266"></p><p><img src="/../images/image-20221022212611659.png" alt="image-20221022212611659"></p><h1 id="简历"><a href="#简历" class="headerlink" title="简历"></a>简历</h1><h2 id="技术相关面试"><a href="#技术相关面试" class="headerlink" title="技术相关面试"></a>技术相关面试</h2><p><img src="/../images/image-20221022212809955.png" alt="image-20221022212809955"></p><p><img src="/../images/image-20221022213000737.png" alt="image-20221022213000737"></p><p>掌握不牢固的不要写</p><p>杂七杂八的经历不要写，跟行业有关的再写</p><p>项目经历不要多，要求精</p><p><img src="/../images/image-20221022213617233.png" alt="image-20221022213617233"></p><p><img src="/../images/image-20221022213744461.png" alt="image-20221022213744461"></p><p>做项目过程中不要刷题，不要并行</p><h2 id="非技术相关面试"><a href="#非技术相关面试" class="headerlink" title="非技术相关面试"></a>非技术相关面试</h2><p>规划：目标+规划的路径</p><p>规划不要超出自己的认知</p><p>刚入行规划以后的三年</p><p><img src="/../images/image-20221022214357672.png" alt="image-20221022214357672"></p><p><img src="/../images/image-20221022215224282.png" alt="image-20221022215224282"></p><p>公司希望有超前的认知</p><p><img src="/../images/image-20221022215752665.png" alt="image-20221022215752665"></p><p>项目阶段别挑选已经完成的，最好刚开始的</p><p>看公司背景，有没有实例资金，</p><p>问项目主程之前做过的项目</p><p>问项目阶段，项目人员的组成，客户端多少人，服务端多少人</p><p>不要压低自己的心理预期，要符合自己的心理预期，尽量追求自己的天花板</p><p>给自己正向激励，会激励自己更加努力</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;求职流程&quot;&gt;&lt;a href=&quot;#求职流程&quot; class=&quot;headerlink&quot; title=&quot;求职流程&quot;&gt;&lt;/a&gt;求职流程&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/../images/image-20221022200702949.png&quot; alt=&quot;image-20221022200702949&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="SKILL" scheme="http://example.com/categories/SKILL/"/>
    
    
  </entry>
  
  <entry>
    <title>SKILL笔记3</title>
    <link href="http://example.com/2022/10/21/SKILL%E7%AC%94%E8%AE%B03/"/>
    <id>http://example.com/2022/10/21/SKILL%E7%AC%94%E8%AE%B03/</id>
    <published>2022-10-21T15:00:05.133Z</published>
    <updated>2022-10-21T15:13:38.728Z</updated>
    
    <content type="html"><![CDATA[<h1 id="待补充ing…"><a href="#待补充ing…" class="headerlink" title="待补充ing…."></a>待补充ing….</h1><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;待补充ing…&quot;&gt;&lt;a href=&quot;#待补充ing…&quot; class=&quot;headerlink&quot; title=&quot;待补充ing….&quot;&gt;&lt;/a&gt;待补充ing….&lt;/h1&gt;</summary>
    
    
    
    <category term="SKILL" scheme="http://example.com/categories/SKILL/"/>
    
    
  </entry>
  
  <entry>
    <title>nuity10-21</title>
    <link href="http://example.com/2022/10/21/nuity10-21/"/>
    <id>http://example.com/2022/10/21/nuity10-21/</id>
    <published>2022-10-21T07:24:45.000Z</published>
    <updated>2022-10-22T14:16:45.524Z</updated>
    
    <content type="html"><![CDATA[<h1 id="实现撞上去会死跳上面没事"><a href="#实现撞上去会死跳上面没事" class="headerlink" title="实现撞上去会死跳上面没事"></a>实现撞上去会死跳上面没事</h1><p>思路：设置两个<code>collider</code> 一个用于放上面，用于检测上方碰撞，一个设为触发器，用于检测侧面碰撞死亡</p><p><img src="/../images/image-20221021152727237.png" alt="image-20221021152727237"></p><p><img src="/../images/image-20221021152740527.png" alt="image-20221021152740527"></p><span id="more"></span><h1 id="设计关卡"><a href="#设计关卡" class="headerlink" title="设计关卡"></a>设计关卡</h1><p>设计关卡，设置预制体</p><p><img src="/../images/image-20221021225817898.png" alt="image-20221021225817898"></p><p><img src="/../images/image-20221021225837035.png" alt="image-20221021225837035"></p><p>游戏基本成型</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;实现撞上去会死跳上面没事&quot;&gt;&lt;a href=&quot;#实现撞上去会死跳上面没事&quot; class=&quot;headerlink&quot; title=&quot;实现撞上去会死跳上面没事&quot;&gt;&lt;/a&gt;实现撞上去会死跳上面没事&lt;/h1&gt;&lt;p&gt;思路：设置两个&lt;code&gt;collider&lt;/code&gt; 一个用于放上面，用于检测上方碰撞，一个设为触发器，用于检测侧面碰撞死亡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/../images/image-20221021152727237.png&quot; alt=&quot;image-20221021152727237&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/../images/image-20221021152740527.png&quot; alt=&quot;image-20221021152740527&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
  </entry>
  
  <entry>
    <title>SKILL笔记2</title>
    <link href="http://example.com/2022/10/20/SKILL%E7%AC%94%E8%AE%B02/"/>
    <id>http://example.com/2022/10/20/SKILL%E7%AC%94%E8%AE%B02/</id>
    <published>2022-10-20T12:03:48.000Z</published>
    <updated>2022-10-20T13:50:48.907Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第三天"><a href="#第三天" class="headerlink" title="第三天"></a>第三天</h1><p><img src="/../images/image-20221020200611380.png" alt="image-20221020200611380"></p><span id="more"></span><h1 id="攻击"><a href="#攻击" class="headerlink" title="攻击"></a>攻击</h1><p>在前方放置一个小球，当进行攻击时，检测小球范围内的物体</p><p>使用动画帧事件控制是否可以攻击</p><p>设置列表，表示本次攻击已经攻击到的敌人，不可以在一次攻击中命中同一敌人两次，当停止攻击时清空列表</p><p>设置可以攻击的敌人的标签，判断当前可以攻击的敌人的标签</p><p>创建树被攻击的动画，当被攻击时触发，并播放动画</p><h1 id="掉落物品"><a href="#掉落物品" class="headerlink" title="掉落物品"></a>掉落物品</h1><p>当dead的时候生成掉落物</p><p><code>instantate</code> 并设置一定范围内的随机生成位置</p><p>最好给掉落物品设置脚本</p><h1 id="野猪AI"><a href="#野猪AI" class="headerlink" title="野猪AI"></a>野猪AI</h1><p>添加动画，导航组件 <code>Nav Mesh Agent</code></p><p>判断当前动画状态</p><p>烘焙导航  将地面设置为静态</p><p>为树设置导航遮挡组件<code> Nav Mesh Obstacle</code></p><p><img src="/../images/image-20221020210953925.png" alt="image-20221020210953925"></p><p>为猪设置攻击球体，设置碰撞器</p><p>待机：待机一段时间后进行巡逻</p><p>攻击：设置攻击，转向攻击目标，关闭移动</p><p>攻击结束：进行状态切换，结束攻击判断是否已经死亡，</p><p>死亡：导入死亡事件，当死亡话画面播放完毕才能销毁，掉落物品</p><h1 id="角色被攻击"><a href="#角色被攻击" class="headerlink" title="角色被攻击"></a>角色被攻击</h1><p>角色被攻击时会播放受击动画</p><p>设置变量受伤中禁止移动</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;第三天&quot;&gt;&lt;a href=&quot;#第三天&quot; class=&quot;headerlink&quot; title=&quot;第三天&quot;&gt;&lt;/a&gt;第三天&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/../images/image-20221020200611380.png&quot; alt=&quot;image-20221020200611380&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="SKILL" scheme="http://example.com/categories/SKILL/"/>
    
    
  </entry>
  
  <entry>
    <title>unity10-20</title>
    <link href="http://example.com/2022/10/20/unity10-20/"/>
    <id>http://example.com/2022/10/20/unity10-20/</id>
    <published>2022-10-20T02:16:27.457Z</published>
    <updated>2022-10-21T07:24:28.123Z</updated>
    
    <content type="html"><![CDATA[<h1 id="游戏暂停"><a href="#游戏暂停" class="headerlink" title="游戏暂停"></a>游戏暂停</h1><p>设置<code>Time.timeScale = 0;</code></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (gamedata.GetComponent&lt;gamedata&gt;().stop_game)</span><br><span class="line">&#123;</span><br><span class="line">      Time.timeScale = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="物体的旋转"><a href="#物体的旋转" class="headerlink" title="物体的旋转"></a>物体的旋转</h1><p>一般使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void Rotate(float xAngle, float yAngle, float zAngle, Space relativeTo = Space.Self);</span><br></pre></td></tr></table></figure><p>即可</p><p>但是当物体的中心点（pivot）不在物体的中心（center）时</p><p>可能达不到饶轴心旋转，此时可以在物体的中心设置一个空物体使用<code>transform.RotateAround</code>绕其旋转</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">coinfa</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;分数&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> coin_score;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;旋转角度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> Vector3 vector;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;旋转速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">private</span> Transform axie;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> v;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        axie = transform.GetChild(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        transform.RotateAround(axie.position,axie.up, v * Time.deltaTime);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.RotateAround(旋转中心，旋转轴，旋转速度);</span><br></pre></td></tr></table></figure><h1 id="获取未激活的游戏对象"><a href="#获取未激活的游戏对象" class="headerlink" title="获取未激活的游戏对象"></a>获取未激活的游戏对象</h1><p><code>GameObject.FindGameObjectWithTag();</code>找不到未激活的游戏对象</p><p><code>找到未激活游戏对象的方法</code></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">   <span class="comment"><span class="doctag">///</span> 根据名称找到物体（可以找到未激活的物体）</span></span><br><span class="line">   <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">   <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;str&quot;&gt;</span>物体名称<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">   <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> GameObject <span class="title">FindGameObject</span>(<span class="params"><span class="built_in">string</span> str</span>)</span></span><br><span class="line">   &#123;</span><br><span class="line">       GameObject instance = <span class="keyword">new</span> GameObject();</span><br><span class="line">       <span class="keyword">var</span> all = Resources.FindObjectsOfTypeAll&lt;GameObject&gt;();</span><br><span class="line">       <span class="keyword">foreach</span> (GameObject item <span class="keyword">in</span> all)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="keyword">if</span> (item.gameObject.name == str)</span><br><span class="line">           &#123;</span><br><span class="line">               instance =  item;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> instance;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h1 id="收取金币，通关，触碰障碍，设置音效"><a href="#收取金币，通关，触碰障碍，设置音效" class="headerlink" title="收取金币，通关，触碰障碍，设置音效"></a>收取金币，通关，触碰障碍，设置音效</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">palyerdied</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> GameObject diedUI;</span><br><span class="line">    <span class="keyword">private</span> GameObject player;</span><br><span class="line">    <span class="keyword">private</span> GameObject gamedata;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;音效&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> AudioClip[] audioClips;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> is_died;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        is_died = <span class="literal">false</span>;</span><br><span class="line">        player = GameObject.FindGameObjectWithTag(<span class="string">&quot;Player&quot;</span>);</span><br><span class="line">        gamedata = GameObject.FindGameObjectWithTag(<span class="string">&quot;gamedata&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!is_died&amp;&amp;<span class="keyword">this</span>.transform.position.y&lt;<span class="number">-10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            died();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnTriggerEnter</span>(<span class="params">Collider other</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(other.tag==<span class="string">&quot;barrier&quot;</span>)</span><br><span class="line">            died();</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(other.tag==<span class="string">&quot;coin&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            GameObject fa = other.transform.parent.gameObject;</span><br><span class="line">            gamedata.GetComponent&lt;gamedata&gt;().game_score += fa.GetComponent&lt;coinfa&gt;().coin_score;</span><br><span class="line">            Destroy(fa);</span><br><span class="line">            player.GetComponent&lt;AudioSource&gt;().PlayOneShot(audioClips[<span class="number">0</span>]);</span><br><span class="line">            <span class="comment">//Debug.Log(&quot;分数为&quot;+ gamedata.GetComponent&lt;gamedata&gt;().game_score);</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(other.tag==<span class="string">&quot;endplace&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Time.timeScale = <span class="number">0f</span>;</span><br><span class="line">            other.gameObject.GetComponent&lt;passgame&gt;().tongguan();</span><br><span class="line">            player.GetComponent&lt;AudioSource&gt;().PlayOneShot(audioClips[<span class="number">2</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">died</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_died) <span class="keyword">return</span>;</span><br><span class="line">        is_died = <span class="literal">true</span>;</span><br><span class="line">        player.GetComponent&lt;AudioSource&gt;().PlayOneShot(audioClips[<span class="number">1</span>]);</span><br><span class="line">        diedUI.SetActive(<span class="literal">true</span>);</span><br><span class="line">        GameObject.FindGameObjectWithTag(<span class="string">&quot;gamedata&quot;</span>).GetComponent&lt;gamedata&gt;().stop_game = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="设置跳跃"><a href="#设置跳跃" class="headerlink" title="设置跳跃"></a>设置跳跃</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">playercontrol</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> horizontal;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> vertical;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;左右移动的速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> v;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;跳跃的速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> vy;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;前后移动的速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> vz;</span><br><span class="line">    <span class="comment">//是否在跳跃中</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> is_jumping;</span><br><span class="line">    <span class="comment">//剩余的跳跃时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> last_jump_time;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;每次跳跃时间&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> jump_time;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;跳跃时向下的速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> vdown;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> time;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> s;</span><br><span class="line">    <span class="keyword">public</span> AudioClip[] audioClips;</span><br><span class="line">    <span class="keyword">private</span> AudioSource audioSource;</span><br><span class="line">    <span class="keyword">private</span> GameObject gamedata;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        s = transform.position.z;</span><br><span class="line"></span><br><span class="line">        gamedata = GameObject.FindGameObjectWithTag(<span class="string">&quot;gamedata&quot;</span>);</span><br><span class="line">        audioSource = transform.GetComponent&lt;AudioSource&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//如果暂停游戏就暂停</span></span><br><span class="line">        <span class="keyword">if</span> (gamedata.GetComponent&lt;gamedata&gt;().stop_game)</span><br><span class="line">        &#123;</span><br><span class="line">            Time.timeScale = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> Time.timeScale = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ver_move();</span><br><span class="line">        hor_move();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//并检查是否在跳跃中</span></span><br><span class="line">        <span class="keyword">if</span> (!is_jumping)</span><br><span class="line">        &#123;</span><br><span class="line">            judge_is_begin_jump();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//跳跃事件结束在检测是否跳跃</span></span><br><span class="line">            <span class="keyword">if</span>(last_jump_time&lt;=<span class="number">0</span>)</span><br><span class="line">                judge_is_end_jump();</span><br><span class="line">            <span class="comment">//否则进行跳跃</span></span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                jump();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ver_move</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        vertical= Input.GetAxisRaw(<span class="string">&quot;Vertical&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">float</span> v;</span><br><span class="line">        <span class="keyword">if</span>(vertical&lt;<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            v = (vz + vertical * <span class="number">1.5f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> v = (vz + vertical * <span class="number">2.5f</span>);</span><br><span class="line">        transform.position = <span class="keyword">new</span> Vector3(transform.position.x, transform.position.y, transform.position.z + v*Time.deltaTime);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 水平移动</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">hor_move</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        horizontal = Input.GetAxisRaw(<span class="string">&quot;Horizontal&quot;</span>);</span><br><span class="line">        transform.position = <span class="keyword">new</span> Vector3(transform.position.x + horizontal * v * Time.deltaTime,</span><br><span class="line">            transform.position.y, transform.position.z);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 判断是否开始跳跃</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">judge_is_begin_jump</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Input.GetKeyDown(KeyCode.Space))</span><br><span class="line">        &#123;</span><br><span class="line">            audioSource.PlayOneShot(audioClips[<span class="number">0</span>]);</span><br><span class="line">            is_jumping = <span class="literal">true</span>;</span><br><span class="line">            last_jump_time = jump_time;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 使用射线检测判断是否结束跳跃</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">judge_is_end_jump</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        transform.GetComponent&lt;Rigidbody&gt;().velocity -= Vector3.up * Time.deltaTime * vdown;</span><br><span class="line">        RaycastHit hit;</span><br><span class="line">        <span class="keyword">if</span> (Physics.Raycast(<span class="keyword">new</span> Ray(transform.position, -transform.up), <span class="keyword">out</span> hit, <span class="number">0.15f</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(hit.transform.tag==<span class="string">&quot;plane&quot;</span>)</span><br><span class="line">            is_jumping = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 进行跳跃</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">jump</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (last_jump_time &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        last_jump_time -= Time.deltaTime;</span><br><span class="line">        <span class="keyword">if</span>(Input.GetKey(KeyCode.Space))</span><br><span class="line">        transform.GetComponent&lt;Rigidbody&gt;().velocity += Vector3.up*Time.deltaTime*vy;</span><br><span class="line">        <span class="keyword">if</span>(Input.GetKeyUp(KeyCode.Space))</span><br><span class="line">        &#123;</span><br><span class="line">            last_jump_time = <span class="number">0f</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">region</span>   动画</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;游戏暂停&quot;&gt;&lt;a href=&quot;#游戏暂停&quot; class=&quot;headerlink&quot; title=&quot;游戏暂停&quot;&gt;&lt;/a&gt;游戏暂停&lt;/h1&gt;&lt;p&gt;设置&lt;code&gt;Time.timeScale = 0;&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight c#&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (gamedata.GetComponent&amp;lt;gamedata&amp;gt;().stop_game)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      Time.timeScale = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
  </entry>
  
  <entry>
    <title>SKLL笔记1</title>
    <link href="http://example.com/2022/10/19/SKLL%E7%AC%94%E8%AE%B01/"/>
    <id>http://example.com/2022/10/19/SKLL%E7%AC%94%E8%AE%B01/</id>
    <published>2022-10-19T06:51:26.000Z</published>
    <updated>2022-10-19T14:05:23.173Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二天实现功能"><a href="#第二天实现功能" class="headerlink" title="第二天实现功能"></a>第二天实现功能</h1><p><img src="/../images/image-20221019215204687.png" alt="image-20221019215204687"></p><span id="more"></span><h1 id="摄像机控制"><a href="#摄像机控制" class="headerlink" title="摄像机控制"></a>摄像机控制</h1><p>使用插值移动使移动更加平滑</p><p><code>[SerializeField] </code>只可以在游戏中编剧其他物体不能获取</p><h1 id="角色动画"><a href="#角色动画" class="headerlink" title="角色动画"></a>角色动画</h1><p>动画设置帧 在挂载的脚本上设置同名参数即可</p><h1 id="角色移动"><a href="#角色移动" class="headerlink" title="角色移动"></a>角色移动</h1><p>角色移动使用单例模式</p><p>获取输入 h： <code>Horizontal</code>  v： <code>Vertical </code></p><p>根据输入播放动画和控制移动</p><p>当两值都等于0 说明不移动 将动画机中的walk 设置为false</p><p>否则设置为true</p><p>设置转向设置位置 <code> Quaternion.LookRotation(Vector)</code>获取旋转角度</p><p>使用角色控制器的简单移动进行移动 </p><h1 id="角色攻击"><a href="#角色攻击" class="headerlink" title="角色攻击"></a>角色攻击</h1><p>斧头静态去掉</p><p>斧头大小：0.6</p><p>可以改scale缩放也可以改模型</p><p>修改斧头碰撞体</p><p>将斧头绑定到手部</p><p>可以将玩家拖动到动画中播放</p><p>设置动画事件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#region 动画事件</span><br><span class="line"></span><br><span class="line">#endregion</span><br></pre></td></tr></table></figure><p>设置一个<code>bool </code>设计攻击时不能移动或攻击</p><p><img src="/../images/image-20221019205718523.png" alt="image-20221019205718523"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">射线  返回射线检测到的物体 只检测哪些层</span><br></pre></td></tr></table></figure><h1 id="设置基类"><a href="#设置基类" class="headerlink" title="设置基类"></a>设置基类</h1><p><code>ObjectBase</code></p><p><img src="/../images/image-20221019210717031.png" alt="image-20221019210717031"></p><p>封装 <code>hp</code> 当生命值变为0是执行死亡函数</p><p>当 hp 变化时，调动hp变化函数，比如更新血条</p><h1 id="设置UI"><a href="#设置UI" class="headerlink" title="设置UI"></a>设置<code>UI</code></h1><p>将<code>UI</code>设置为随画布大小而变化</p><p>1920 1080</p><p>组件<code>outline</code> 外边框</p><p>将<code>UI</code>图片的射线检测都关掉</p><p><img src="/../images/image-20221019212356489.png" alt="image-20221019212356489"></p><p>将图片模式改为Filed（填充）方向改为垂直，可实现血条</p><p>设置饥饿值的get set  当饥饿值减少到0时掉血</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;第二天实现功能&quot;&gt;&lt;a href=&quot;#第二天实现功能&quot; class=&quot;headerlink&quot; title=&quot;第二天实现功能&quot;&gt;&lt;/a&gt;第二天实现功能&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/../images/image-20221019215204687.png&quot; alt=&quot;image-20221019215204687&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="SKILL" scheme="http://example.com/categories/SKILL/"/>
    
    
  </entry>
  
  <entry>
    <title>unity10-19</title>
    <link href="http://example.com/2022/10/19/unity10-19/"/>
    <id>http://example.com/2022/10/19/unity10-19/</id>
    <published>2022-10-19T06:50:58.000Z</published>
    <updated>2022-10-19T15:48:02.666Z</updated>
    
    <content type="html"><![CDATA[<h1 id="随机背景音乐"><a href="#随机背景音乐" class="headerlink" title="随机背景音乐"></a>随机背景音乐</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用rand函数实现随机背景音乐，并且记录上一首音乐序号防止连续重复</span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">randAudio</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> AudioClip[] audioClips =<span class="keyword">new</span> AudioClip[<span class="number">10</span>];</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> i;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            i = Random.Range(<span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">        &#125; <span class="keyword">while</span> (i == GameDataManager.GetInt(<span class="string">&quot;Previous_music&quot;</span>));</span><br><span class="line">        GameDataManager.SetInt(<span class="string">&quot;Previous_music&quot;</span>, i);</span><br><span class="line">        transform.GetComponent&lt;AudioSource&gt;().clip = audioClips[i - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        transform.GetComponent&lt;AudioSource&gt;().Play();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="存储游戏数据类"><a href="#存储游戏数据类" class="headerlink" title="存储游戏数据类"></a>存储游戏数据类</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">gamedata</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">HideInInspector</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> stop_game;</span><br><span class="line">    [<span class="meta">HideInInspector</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> gameing_level;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        stop_game = <span class="literal">false</span>;</span><br><span class="line">        gameing_level = GameDataManager.GetInt(<span class="string">&quot;seled_leave&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="通关时触发"><a href="#通关时触发" class="headerlink" title="通关时触发"></a>通关时触发</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.SceneManagement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">passgame</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> GameObject gamedata;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;通关游戏显示的界面&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> GameObject pass_Canvas;</span><br><span class="line">    <span class="keyword">private</span> GameObject <span class="keyword">set</span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        gamedata = GameObject.FindGameObjectWithTag(<span class="string">&quot;gamedata&quot;</span>);</span><br><span class="line">        <span class="keyword">set</span> = GameObject.FindGameObjectWithTag(<span class="string">&quot;set&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tongguan</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将游戏暂停</span></span><br><span class="line">        gamedata.GetComponent&lt;gamedata&gt;().stop_game = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">set</span>.SetActive(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">//设置最大通关数，更新关卡界面</span></span><br><span class="line">        <span class="built_in">int</span> x = GameObject.FindGameObjectWithTag(<span class="string">&quot;gamedata&quot;</span>).GetComponent&lt;gamedata&gt;().gameing_level;</span><br><span class="line">        <span class="built_in">int</span> y = GameDataManager.GetInt(<span class="string">&quot;has_unlock_leave&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(y&lt;x+<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            GameDataManager.SetInt(<span class="string">&quot;has_unlock_leave&quot;</span>, x + <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        pass_Canvas.SetActive(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="游戏中的设置选项"><a href="#游戏中的设置选项" class="headerlink" title="游戏中的设置选项"></a>游戏中的设置选项</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">setbutton</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> GameObject set_canvas;</span><br><span class="line">    <span class="keyword">private</span> GameObject gamedata;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        gamedata = GameObject.FindGameObjectWithTag(<span class="string">&quot;gamedata&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//按下esc时触发</span></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.Escape))</span><br><span class="line">            set_state();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//点击设置按钮也可以触发</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onchick_set</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        set_state();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 设置set状态</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">set_state</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (set_canvas.activeInHierarchy)</span><br><span class="line">        &#123;</span><br><span class="line">            set_canvas.SetActive(<span class="literal">false</span>);</span><br><span class="line">            gamedata.GetComponent&lt;gamedata&gt;().stop_game = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            set_canvas.SetActive(<span class="literal">true</span>);</span><br><span class="line">            gamedata.GetComponent&lt;gamedata&gt;().stop_game = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="一些按钮绑定事件"><a href="#一些按钮绑定事件" class="headerlink" title="一些按钮绑定事件"></a>一些按钮绑定事件</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.SceneManagement;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">seting</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> seled_leave;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        seled_leave = GameDataManager.GetInt(<span class="string">&quot;seled_leave&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//重新开始游戏</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onchick_resume</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        SceneManager.LoadScene(<span class="string">&quot;leave&quot;</span>+Convert.ToString(seled_leave));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//回到关卡选择</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onchick_back_levels</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        SceneManager.LoadScene(<span class="string">&quot;leaves&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//回到主界面</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onchick_back_main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        SceneManager.LoadScene(<span class="string">&quot;beginscenes&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//进入到下一关卡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nextlevel</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        GameDataManager.SetInt(<span class="string">&quot;seled_leave&quot;</span>, seled_leave + <span class="number">1</span>);</span><br><span class="line">        SceneManager.LoadScene(<span class="string">&quot;leave&quot;</span> + Convert.ToString(seled_leave+<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="设置文字显示当前关卡"><a href="#设置文字显示当前关卡" class="headerlink" title="设置文字显示当前关卡"></a>设置文字显示当前关卡</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.UI;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">setLevelText</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Text text;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> select_level = GameObject.FindGameObjectWithTag(<span class="string">&quot;gamedata&quot;</span>).GetComponent&lt;gamedata&gt;().gameing_level;</span><br><span class="line">        text.text = text.text + Convert.ToString(select_level);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="通关界面"><a href="#通关界面" class="headerlink" title="通关界面"></a>通关界面</h1><p><img src="/../images/image-20221019150456333.png" alt="image-20221019150456333"></p><h1 id="设置界面"><a href="#设置界面" class="headerlink" title="设置界面"></a>设置界面</h1><p><img src="/../images/image-20221019150530081.png" alt="image-20221019150530081"></p><h1 id="跳跃功能-未完成"><a href="#跳跃功能-未完成" class="headerlink" title="跳跃功能(未完成)"></a>跳跃功能(未完成)</h1><p>写了个跳跃功能，效果还不太好</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">playercontrol</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> horizontal;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;左右移动的速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> v;</span><br><span class="line">    [<span class="meta">Header(<span class="string">&quot;跳跃的速度&quot;</span>)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> vy;</span><br><span class="line">    <span class="comment">//是否在跳跃中</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> is_jumping;</span><br><span class="line">    <span class="comment">//剩余的跳跃时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> last_jump_time;</span><br><span class="line">    <span class="comment">//每次的跳跃时间</span></span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="built_in">float</span> jump_time;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> time;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> s;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        jump_time = <span class="number">1f</span>;</span><br><span class="line">        s = transform.position.z;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        time += Time.deltaTime;</span><br><span class="line">        Debug.Log((transform.position.z - s)/time);</span><br><span class="line">        <span class="comment">//如果没有在跳跃中可以左右移动，并检查是否在跳跃中</span></span><br><span class="line">        <span class="keyword">if</span>(!is_jumping)</span><br><span class="line">        &#123;</span><br><span class="line">            hor_move();</span><br><span class="line">            judge_is_begin_jump();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//跳跃中只能进行跳跃</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            jump();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">hor_move</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        horizontal = Input.GetAxisRaw(<span class="string">&quot;Horizontal&quot;</span>);</span><br><span class="line">        transform.position = <span class="keyword">new</span> Vector3(transform.position.x + horizontal * v * Time.deltaTime,</span><br><span class="line">            transform.position.y, transform.position.z);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">judge_is_begin_jump</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Input.GetKeyDown(KeyCode.Space))</span><br><span class="line">        &#123;</span><br><span class="line">            is_jumping = <span class="literal">true</span>;</span><br><span class="line">            last_jump_time = jump_time;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">jump</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        last_jump_time -= Time.deltaTime;</span><br><span class="line">        <span class="keyword">if</span> (last_jump_time &lt;= <span class="number">0f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            is_jumping = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        transform.GetComponent&lt;Rigidbody&gt;().velocity += Vector3.up*Time.deltaTime*vy;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">region</span>   动画</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>还要加一个射线检测是否碰到地面，明天在加</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;随机背景音乐&quot;&gt;&lt;a href=&quot;#随机背景音乐&quot; class=&quot;headerlink&quot; title=&quot;随机背景音乐&quot;&gt;&lt;/a&gt;随机背景音乐&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;使用rand函数实现随机背景音乐，并且记录上一首音乐序号防止连续重复&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight c#&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; System.Collections;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; System.Collections.Generic;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; UnityEngine;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;randAudio&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;MonoBehaviour&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; AudioClip[] audioClips =&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; AudioClip[&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Awake&lt;/span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            i = Random.Range(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (i == GameDataManager.GetInt(&lt;span class=&quot;string&quot;&gt;&amp;quot;Previous_music&amp;quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        GameDataManager.SetInt(&lt;span class=&quot;string&quot;&gt;&amp;quot;Previous_music&amp;quot;&lt;/span&gt;, i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        transform.GetComponent&amp;lt;AudioSource&amp;gt;().clip = audioClips[i - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        transform.GetComponent&amp;lt;AudioSource&amp;gt;().Play();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
  </entry>
  
</feed>
