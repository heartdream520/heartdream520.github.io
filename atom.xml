<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>心梦</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2023-02-22T08:55:00.221Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>心梦</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>设计模式</title>
    <link href="http://example.com/2023/02/19/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/2023/02/19/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</id>
    <published>2023-02-19T14:20:58.109Z</published>
    <updated>2023-02-22T08:55:00.221Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">设计模式六大原则</span><br><span class="line">单例模式</span><br><span class="line">状态模式</span><br><span class="line">外观模式</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="设计模式六大原则"><a href="#设计模式六大原则" class="headerlink" title="设计模式六大原则"></a>设计模式六大原则</h1><p>原文：<a href="https://blog.csdn.net/m0_50180963/article/details/108812271">https://blog.csdn.net/m0_50180963/article/details/108812271</a></p><h2 id="单一职责原则"><a href="#单一职责原则" class="headerlink" title="单一职责原则"></a>单一职责原则</h2><p>（类和方法，接口）</p><p>单一职责原则（Single Responsibility Principle，SRP）又称单一功能原则。这里的职责是指类变化的原因，单一职责原则规定一个类应该有且仅有一个引起它变化的原因，否则类应该被拆分（There should never be more than one reason for a class to change）。</p><p>该原则提出对象不应该承担太多职责，如果一个对象承担了太多的职责，至少存在以下两个缺点：</p><p>一个职责的变化可能会削弱或者抑制这个类实现其他职责的能力；</p><p>当客户端需要该对象的某一个职责时，不得不将其他不需要的职责全都包含进来，从而造成冗余代码或代码的浪费。</p><h3 id="单一职责原则的优点"><a href="#单一职责原则的优点" class="headerlink" title="单一职责原则的优点"></a>单一职责原则的优点</h3><p>单一职责原则的核心就是控制类的粒度大小、将对象解耦、提高其内聚性。如果遵循单一职责原则将有以下优点。</p><p>降低类的复杂度。一个类只负责一项职责，其逻辑肯定要比负责多项职责简单得多。</p><p>提高类的可读性。复杂性降低，自然其可读性会提高。</p><p>提高系统的可维护性。可读性提高，那自然更容易维护了。</p><p>变更引起的风险降低。变更是必然的，如果单一职责原则遵守得好，当修改一个功能时，可以显著降低对其他功能的影响</p><h2 id="开闭原则"><a href="#开闭原则" class="headerlink" title="开闭原则"></a>开闭原则</h2><p>（扩展开放，修改关闭）</p><p>开闭原则的实现方法：可以通过“抽象约束、封装变化”来实现开闭原则，即通过接口或者抽象类为软件实体定义一个相对稳定的抽象层，而将相同的可变因素封装在相同的具体实现类中。</p><p>因为抽象灵活性好，适应性广，只要抽象的合理，可以基本保持软件架构的稳定。而软件中易变的细节可以从抽象派生来的实现类来进行扩展，当软件需要发生变化时，只需要根据需求重新派生一个实现类来扩展就可以了。</p><h2 id="里氏替换原则"><a href="#里氏替换原则" class="headerlink" title="里氏替换原则"></a>里氏替换原则</h2><p>（基类和子类之间的关系）</p><p>里氏替换原则通俗来讲就是：子类可以扩展父类的功能，但不能改变父类原有的功能。也就是说：子类继承父类时，除添加新的方法完成新增功能外，尽量不要重写父类的方法。</p><p>根据上述理解，对里氏替换原则的定义可以总结如下：</p><p>子类可以实现父类的抽象方法，但不能覆盖父类的非抽象方法</p><p>子类中可以增加自己特有的方法</p><p>当子类的方法重载父类的方法时，方法的前置条件（即方法的输入参数）要比父类的方法更宽松</p><p>当子类的方法实现父类的方法时（重写&#x2F;重载或实现抽象方法），方法的后置条件（即方法的的输出&#x2F;返回值）要比父类的方法更严格或相等</p><p>通过重写父类的方法来完成新的功能写起来虽然简单，但是整个继承体系的可复用性会比较差，特别是运用多态比较频繁时，程序运行出错的概率会非常大。</p><p>如果程序违背了里氏替换原则，则继承类的对象在基类出现的地方会出现运行错误。</p><p>这时其修正方法是：取消原来的继承关系，重新设计它们之间的关系。</p><p>关于里氏替换原则的例子，最有名的是“正方形不是长方形”。当然，生活中也有很多类似的例子，例如，企鹅、鸵鸟和几维鸟从生物学的角度来划分，它们属于鸟类；但从类的继承关系来看，由于它们不能继承“鸟”会飞的功能，所以它们不能定义成“鸟”的子类。同样，由于“气球鱼”不会游泳，所以不能定义成“鱼”的子类；“玩具炮”炸不了敌人，所以不能定义成“炮”的子类等。</p><p>对于正方形和长方形最好的做法是再添加一个父类，他们同时继承自这个父类。</p><h2 id="依赖倒置原则"><a href="#依赖倒置原则" class="headerlink" title="依赖倒置原则"></a>依赖倒置原则</h2><p>（依赖抽象接口，而不是具体对象）</p><p>依赖倒置原则的主要作用如下。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">依赖倒置原则可以降低类间的耦合性。</span><br><span class="line"></span><br><span class="line">依赖倒置原则可以提高系统的稳定性。</span><br><span class="line"></span><br><span class="line">依赖倒置原则可以减少并行开发引起的风险。</span><br><span class="line"></span><br><span class="line">依赖倒置原则可以提高代码的可读性和可维护性。</span><br></pre></td></tr></table></figure><p>依赖倒置原则的实现方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">依赖倒置原则的目的是通过要面向接口的编程来降低类间的耦合性，所以我们在实际编程中只要遵循以下4点，就能在项目中满足这个规则。</span><br><span class="line"></span><br><span class="line">每个类尽量提供接口或抽象类，或者两者都具备。</span><br><span class="line"></span><br><span class="line">变量的声明类型尽量是接口或者是抽象类。</span><br><span class="line"></span><br><span class="line">任何类都不应该从具体类派生。</span><br><span class="line"></span><br><span class="line">使用继承时尽量遵循里氏替换原则。</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> principle;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DIPtest</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Customer wang=<span class="keyword">new</span> <span class="title class_">Customer</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;顾客购买以下商品：&quot;</span>); </span><br><span class="line">        wang.shopping(<span class="keyword">new</span> <span class="title class_">ShaoguanShop</span>()); </span><br><span class="line">        wang.shopping(<span class="keyword">new</span> <span class="title class_">WuyuanShop</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//商店</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Shop</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sell</span><span class="params">()</span>; <span class="comment">//卖</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//继承接口实现抽象方法</span></span><br><span class="line"><span class="comment">//韶关网店</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShaoguanShop</span> <span class="keyword">implements</span> <span class="title class_">Shop</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sell</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;韶关土特产：香菇、木耳……&quot;</span>; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//婺源网店</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WuyuanShop</span> <span class="keyword">implements</span> <span class="title class_">Shop</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sell</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;婺源土特产：绿茶、酒糟鱼……&quot;</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//顾客</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Customer</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shopping</span><span class="params">(Shop shop)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//购物</span></span><br><span class="line">        System.out.println(shop.sell()); </span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="接口隔离原则"><a href="#接口隔离原则" class="headerlink" title="接口隔离原则"></a>接口隔离原则</h2><p>（接口按照功能细分）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">接口要实现的功能应该尽量单一</span><br></pre></td></tr></table></figure><h3 id="接口隔离原则的优点"><a href="#接口隔离原则的优点" class="headerlink" title="接口隔离原则的优点"></a>接口隔离原则的优点</h3><p>接口隔离原则是为了约束接口、降低类对接口的依赖性，遵循接口隔离原则有以下 5 个优点。</p><p>将臃肿庞大的接口分解为多个粒度小的接口，可以预防外来变更的扩散，提高系统的灵活性和可维护性。</p><p>接口隔离提高了系统的内聚性，减少了对外交互，降低了系统的耦合性。</p><p>如果接口的粒度大小定义合理，能够保证系统的稳定性；但是，如果定义过小，则会造成接口数量过多，使设计复杂化；如果定义太大，灵活性降低，无法提供定制服务，给整体项目带来无法预料的风险。</p><p>使用多个专门的接口还能够体现对象的层次，因为可以通过接口的继承，实现对总接口的定义。</p><p>能减少项目工程中的代码冗余。过大的大接口里面通常放置许多不用的方法，当实现这个接口的时候，被迫设计冗余的代码。</p><h3 id="接口隔离原则的实现方法"><a href="#接口隔离原则的实现方法" class="headerlink" title="接口隔离原则的实现方法"></a>接口隔离原则的实现方法</h3><p>在具体应用接口隔离原则时，应该根据以下几个规则来衡量。</p><p>接口尽量小，但是要有限度。一个接口只服务于一个子模块或业务逻辑。</p><p>为依赖接口的类定制服务。只提供调用者需要的方法，屏蔽不需要的方法。</p><p>了解环境，拒绝盲从。每个项目或产品都有选定的环境因素，环境不同，接口拆分的标准就不同深入了解业务逻辑。</p><p>提高内聚，减少对外交互。使接口用最少的方法去完成最多的事情。</p><p>对于接口隔离，大家还是可以参考单一职责提到的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(String username, String password)</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">register</span><span class="params">(String email, String username, String password)</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logError</span><span class="params">(String msg)</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendEmail</span><span class="params">(String email)</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>这时候，应该就能理解拆分的好处了。</p><h2 id="迪米特法则-（最小知识原则）"><a href="#迪米特法则-（最小知识原则）" class="headerlink" title="迪米特法则 （最小知识原则）"></a>迪米特法则 （最小知识原则）</h2><p>（类与类之间的亲疏关系）</p><h3 id="迪米特法则的定义"><a href="#迪米特法则的定义" class="headerlink" title="迪米特法则的定义"></a>迪米特法则的定义</h3><p>只与你的直接朋友交谈，不跟“陌生人”说话（Talk only to your immediate friends and not to strangers）。其含义是：如果两个软件实体无须直接通信，那么就不应当发生直接的相互调用，可以通过第三方转发该调用。其目的是降低类之间的耦合度，提高模块的相对独立性。</p><p>迪米特法则中的“朋友”是指：当前对象本身、当前对象的成员对象、当前对象所创建的对象、当前对象的方法参数等，这些对象同当前对象存在关联、聚合或组合关系，可以直接访问这些对象的方法。</p><h3 id="迪米特法则的优点"><a href="#迪米特法则的优点" class="headerlink" title="迪米特法则的优点"></a>迪米特法则的优点</h3><p>迪米特法则要求限制软件实体之间通信的宽度和深度，正确使用迪米特法则将有以下两个优点。</p><p>降低了类之间的耦合度，提高了模块的相对独立性。</p><p>由于亲合度降低，从而提高了类的可复用率和系统的扩展性。</p><p>但是，过度使用迪米特法则会使系统产生大量的中介类，从而增加系统的复杂性，使模块之间的通信效率降低。所以，在釆用迪米特法则时需要反复权衡，确保高内聚和低耦合的同时，保证系统的结构清晰。</p><h3 id="迪米特法则的实现方法"><a href="#迪米特法则的实现方法" class="headerlink" title="迪米特法则的实现方法"></a>迪米特法则的实现方法</h3><p>从迪米特法则的定义和特点可知，它强调以下两点：</p><p>从依赖者的角度来说，只依赖应该依赖的对象。</p><p>从被依赖者的角度说，只暴露应该暴露的方法。</p><p>所以，在运用迪米特法则时要注意以下 6 点。</p><p>在类的划分上，应该创建弱耦合的类。类与类之间的耦合越弱，就越有利于实现可复用的目标。</p><p>在类的结构设计上，尽量降低类成员的访问权限。</p><p>在类的设计上，优先考虑将一个类设置成不变类。</p><p>在对其他类的引用上，将引用其他对象的次数降到最低。</p><p>不暴露类的属性成员，而应该提供相应的访问器（set 和 get 方法）。</p><p>谨慎使用序列化（Serializable）功能</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> principle;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoDtest</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Agent agent=<span class="keyword">new</span> <span class="title class_">Agent</span>();</span><br><span class="line">        agent.setStar(<span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&quot;林心如&quot;</span>));</span><br><span class="line">        agent.setFans(<span class="keyword">new</span> <span class="title class_">Fans</span>(<span class="string">&quot;粉丝韩丞&quot;</span>));</span><br><span class="line">        agent.setCompany(<span class="keyword">new</span> <span class="title class_">Company</span>(<span class="string">&quot;中国传媒有限公司&quot;</span>));</span><br><span class="line">        agent.meeting();</span><br><span class="line">        agent.business();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//经纪人</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Agent</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Star myStar;</span><br><span class="line">    <span class="keyword">private</span> Fans myFans;</span><br><span class="line">    <span class="keyword">private</span> Company myCompany;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStar</span><span class="params">(Star myStar)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.myStar=myStar;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFans</span><span class="params">(Fans myFans)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.myFans=myFans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCompany</span><span class="params">(Company myCompany)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.myCompany=myCompany;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">meeting</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(myFans.getName()+<span class="string">&quot;与明星&quot;</span>+myStar.getName()+<span class="string">&quot;见面了。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">business</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(myCompany.getName()+<span class="string">&quot;与明星&quot;</span>+myStar.getName()+<span class="string">&quot;洽淡业务。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//明星</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Star</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    Star(String name)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//粉丝</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fans</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    Fans(String name)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//媒体公司</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Company</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    Company(String name)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    程序的运行结果如下：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    粉丝韩丞与明星林心如见面了。</span></span><br><span class="line"><span class="comment">    中国传媒有限公司与明星林心如洽淡业务。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h1 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//普通单例</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Singleton</span>&lt;<span class="title">T</span>&gt; <span class="keyword">where</span> <span class="title">T</span> : <span class="title">new</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> T instance;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> T Instance</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> Equals(instance, <span class="literal">default</span>(T)) ? (instance = <span class="keyword">new</span> T()) : instance;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span>Mono单例</span></span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">MonoSingleton</span>&lt;<span class="title">T</span>&gt; : <span class="title">MonoBehaviour</span> <span class="keyword">where</span> <span class="title">T</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> <span class="keyword">global</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">static</span> T instance;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> T Instance</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (instance == <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                instance =(T)FindObjectOfType&lt;T&gt;();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">global</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(instance!=<span class="literal">null</span> &amp;&amp; instance!=<span class="keyword">this</span>.GetComponent&lt;T&gt;())</span><br><span class="line">            &#123;</span><br><span class="line">                Destroy(<span class="keyword">this</span>.gameObject);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            instance = <span class="keyword">this</span>.GetComponent&lt;T&gt;();</span><br><span class="line">            DontDestroyOnLoad(<span class="keyword">this</span>.gameObject);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.OnAwake();</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.OnStart();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnStart</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnAwake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.1&gt;、定义</span><br><span class="line"></span><br><span class="line">状态模式的核心思想是允许一个对象在它的内部状态改变时改变它的行为，即不同的状态对应不同的行为。</span><br><span class="line"></span><br><span class="line">状态模式的针对性很强，当有状态变化的时候可以选择状态模式。</span><br></pre></td></tr></table></figure><p>状态模式效果：</p><p>1&gt;、状态模式的本质是将条件语句的各个分支封装起来，从而实现了状态逻辑与动作的分离。当分支很多时，状态模式可以给代码的维护带来很大的便利。</p><p>2&gt;、多态性的实现。</p><p>3&gt;、状态转换的显示化。状态模式将状态的切换逻辑存放到状态对象中，可以实现状态的自动切换，使各个状态界限分明，相互独立。</p><p>4&gt;、采用分支结构时，Context对象需要关心所有状态的切换逻辑，当分支越来越多时，复杂度也会越来越大。而状态模式中Context无需关心状态的切换逻辑，每个状态对象也只需关心状态的下一个可能状态的切换逻辑。</p><p>状态模式主要解决的是当控制一个对象状态的条件表达式过于复杂时的情况。把状态的判断逻辑表示不同状态的一系列类中，可以把复杂的判断逻辑简化。状态模式的目的是为了将状态与不同状态下的行为进行分离，从而简化复杂的条件判断。</p><p>状态模式主要适用场景：</p><p>◊ 一个对象的行为取决于它的状态，并且必须在运行时刻根据状态改变其行为；</p><p>◊ 一个操作中包含庞大的分支结构，并且这些分支决定于对象的状态。</p><h1 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>外观模式（Facade Pattern）是一种结构型设计模式， 能为复杂系统、 程序库或框架提供一个简单 （但有限） 的接口。</p><p>外观定义了一个高层接口，让子系统更容易使用。使用外观模式时，我们创建了一个统一的类，用来包装子系统中一个或多个复杂的类，客户端可以直接通过外观类来调用内部子系统中方法，从而外观模式让客户和子系统之间避免了紧耦合。</p><h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><p><strong>外观角色（Facade）</strong>：在客户端可以调用它的方法，在外观角色中可以知道相关的（一个或者多个）子系统的功能和责任；在正常情况下，它将所有从客户端发来的请求委派到相应的子系统去，传递给相应的子系统对象处理。<br><strong>子系统角色（SubSystem Classes）</strong>：在软件系统中可以有一个或者多个子系统角色，每一个子系统可以不是一个单独的类，而是一个类的集合，它实现子系统的功能；每一个子系统都可以被客户端直接调用，或者被外观角色调用，它处理由外观类传过来的请求；子系统并不知道外观的存在，对于子系统而言，外观角色仅仅是另外一个客户端而已。</p><h1 id="中介系统"><a href="#中介系统" class="headerlink" title="中介系统"></a>中介系统</h1><h2 id="中介者模式的优点："><a href="#中介者模式的优点：" class="headerlink" title="中介者模式的优点："></a>中介者模式的优点：</h2><p>中介者模式简化了对象之间的交互，他用中介者和同事之间的一对多的关系代替了原本同事对象之间的多对多的关系。<br>将各个同事对象解耦，我们可以独立地改变每一个同事对象和中介者。</p><h2 id="中介者模式的缺点："><a href="#中介者模式的缺点：" class="headerlink" title="中介者模式的缺点："></a>中介者模式的缺点：</h2><p>在具体的中介类中包含了大量的同事之间的交互细节，这可能导致具体中介类非常复杂，当然我们可以通过命令模式来改造中介者模式。</p><h1 id="访问者模式"><a href="#访问者模式" class="headerlink" title="访问者模式"></a>访问者模式</h1><h2 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">访问者模式是封装一些施加于某种数据结构之上的操作。一旦这些操作需要修改的话，接受这个操作的数据结构则可以保存不变。访问者模式适用于数据结构相对稳定的系统， 它把数据结构和作用于数据结构之上的操作之间的耦合度降低，使得操作集合可以相对自由地改变。</span><br><span class="line"></span><br><span class="line">　数据结构的每一个节点都可以接受一个访问者的调用，此节点向访问者对象传入节点对象，而访问者对象则反过来执行节点对象的操作。这样的过程叫做“双重分派”。节点调用访问者，将它自己传入，访问者则将某算法针对此节点执行。</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;设计模式六大原则&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;单例模式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;状态模式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;外观模式&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="设计模式" scheme="http://example.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="设计模式" scheme="http://example.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>Xlua01</title>
    <link href="http://example.com/2023/02/13/Xlua01/"/>
    <id>http://example.com/2023/02/13/Xlua01/</id>
    <published>2023-02-13T13:47:04.000Z</published>
    <updated>2023-02-19T15:00:53.619Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">整包分包</span><br><span class="line">资源加载</span><br><span class="line">Lua管理</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="整包分包"><a href="#整包分包" class="headerlink" title="整包分包"></a>整包分包</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">整包：第一次下载时下载所有资源</span><br><span class="line">优点：首次更新少，直接启动</span><br><span class="line">缺点：安装包下载时间长</span><br><span class="line">分包：第一次下载下载少量资源，进入游戏在进行补充</span><br><span class="line">优点：安装包小，下载时间短，安装快</span><br><span class="line">缺点：首次更新时间长</span><br><span class="line"></span><br><span class="line">整包时，将只读目录考培到可读写目录  </span><br><span class="line">只读目录：Application.streamingAssetsPath</span><br><span class="line">可读写目录：Application.persistentDataPath</span><br><span class="line"></span><br><span class="line">// 全局查找lua函数</span><br><span class="line">XLua.LuaFunction function = Manager.Lua.luaEnv.Global.Get&lt;XLua.LuaFunction&gt;(&quot;Main&quot;);</span><br><span class="line">            function.Call();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="资源加载"><a href="#资源加载" class="headerlink" title="资源加载"></a>资源加载</h1><p><img src="/../images/image-20230216103247984.png" alt="image-20230216103247984"></p><p><img src="/../images/image-20230216103309991.png" alt="image-20230216103309991"></p><p><img src="/../images/image-20230216103729533.png" alt="image-20230216103729533"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">最后写入防止下载到一半退出</span><br></pre></td></tr></table></figure><h1 id="Lua管理"><a href="#Lua管理" class="headerlink" title="Lua管理"></a>Lua管理</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">异步加载 同步使用 预加载</span><br></pre></td></tr></table></figure><h2 id="Lua文件加载"><a href="#Lua文件加载" class="headerlink" title="Lua文件加载"></a>Lua文件加载</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在编辑器模式下，直接读取编辑器中的文件进行更新，写入脚本字典</span><br><span class="line">非编辑器模式，在解析bundle时将Lua脚本读出，并进行预加载，写入脚本字典</span><br><span class="line">注意资源加载为协程加载，只有当Lua脚本文件加载完毕时在执行Lua相关函数</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;整包分包&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;资源加载&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Lua管理&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Xlua" scheme="http://example.com/categories/Xlua/"/>
    
    
    <category term="Xlua" scheme="http://example.com/tags/Xlua/"/>
    
  </entry>
  
  <entry>
    <title>unity文件</title>
    <link href="http://example.com/2023/02/13/unity%E6%96%87%E4%BB%B6/"/>
    <id>http://example.com/2023/02/13/unity%E6%96%87%E4%BB%B6/</id>
    <published>2023-02-13T13:01:22.000Z</published>
    <updated>2023-02-13T13:52:24.009Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">一.Resources文件夹。</span><br><span class="line">可以使用Resources.Load(“文件名字，注：不包括文件后缀名”);把文件夹中的对象加载出来。</span><br><span class="line">注：此方可实现对文件实施“增删查改”等操作，但打包后不可以更改了。</span><br><span class="line"></span><br><span class="line">二.Windows平台文件处理</span><br><span class="line">在直接使用Application.dataPath来读取文件进行操作。</span><br><span class="line">注：移动端是没有访问权限的。</span><br><span class="line"></span><br><span class="line">三.StreamingAssets文件夹。</span><br><span class="line">1.可使用Application.dataPath来读取文件进行操作。</span><br><span class="line">2.直接使用Application.streamingAssetsPath来读取文件进行操作。</span><br><span class="line">注：此方法在pc/Mac电脑中可实现对文件实施“增删查改”等操作，但在移动端只支持读取操作。</span><br><span class="line"></span><br><span class="line">四.使用Application.persistentDataPath操作文件</span><br><span class="line">该文件存在手机沙盒中，因为不能直接存放文件，</span><br><span class="line">1.通过服务器直接下载保存到该位置，也可以通过Md5码比对下载更新新的资源</span><br><span class="line">2.没有服务器的，只有间接通过文件流的方式从本地读取并写入Application.persistentDataPath文件下，然后再通过Application.persistentDataPath来读取操作。</span><br><span class="line">注：在Pc/Mac电脑 以及android跟Ipad、ipone都可对文件进行任意操作，另外在IOS上该目录下的东西可以被iCloud自动备份。</span><br></pre></td></tr></table></figure><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.Resource：在Unity编辑器的Project窗口里创建，Resources文件夹下的资源全部会打包进.apk或者.ipa，并且打包时会将里面的资源压缩处理。加载方法是Resources.Load(文件名)，需要注意：文件名不包括扩展名，打包后不能更改Resources下的资源内容。但是从Resources文件夹中加载出来的资源可以更改。</span><br><span class="line"></span><br><span class="line">2.Application.dataPath：这个属性返回的是程序的数据文件所在文件夹的路径，例如在Editor中就是项目的Assets文件夹的路径，通过这个路径可以访问项目中任何文件夹中的资源，但是在移动端它是完全没用。</span><br><span class="line"></span><br><span class="line">3.Application.streamingAssetsPath：这个属性用于返回流数据的缓存目录，返回路径为相对路径，适合设置一些外部数据文件的路径。在Unity工程的Assets目录下起一个名为“StreamingAssets”的文件夹即可，然后用Application.streamingAssetsPath访问，这个文件夹中的资源在打包时会原封不动的打包进去，不会压缩，一般放置一些资源数据。在PC/MAC中可实现对文件的“增删改查”等操作，但在移动端是一个只读路径。</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;一.Resources文件夹。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;可以使用Resources.Load(“文件名字，注：不包括文件后缀名”);把文件夹中的对象加载出来。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;注：此方可实现对文件实施“增删查改”等操作，但打包后不可以更改了。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;二.Windows平台文件处理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在直接使用Application.dataPath来读取文件进行操作。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;注：移动端是没有访问权限的。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;三.StreamingAssets文件夹。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1.可使用Application.dataPath来读取文件进行操作。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2.直接使用Application.streamingAssetsPath来读取文件进行操作。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;注：此方法在pc/Mac电脑中可实现对文件实施“增删查改”等操作，但在移动端只支持读取操作。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;四.使用Application.persistentDataPath操作文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;该文件存在手机沙盒中，因为不能直接存放文件，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1.通过服务器直接下载保存到该位置，也可以通过Md5码比对下载更新新的资源&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2.没有服务器的，只有间接通过文件流的方式从本地读取并写入Application.persistentDataPath文件下，然后再通过Application.persistentDataPath来读取操作。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;注：在Pc/Mac电脑 以及android跟Ipad、ipone都可对文件进行任意操作，另外在IOS上该目录下的东西可以被iCloud自动备份。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="文件" scheme="http://example.com/tags/%E6%96%87%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>Lua01</title>
    <link href="http://example.com/2023/02/12/Lua01/"/>
    <id>http://example.com/2023/02/12/Lua01/</id>
    <published>2023-02-12T12:32:09.000Z</published>
    <updated>2023-02-13T04:19:44.277Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="可传函数"><a href="#可传函数" class="headerlink" title="可传函数"></a>可传函数</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(a,b )</span></span></span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(ff,a,b )</span></span></span><br><span class="line">    <span class="keyword">return</span> ff(a,b)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(f(add,<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure><h2 id="可变长度"><a href="#可变长度" class="headerlink" title="可变长度"></a>可变长度</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">add</span><span class="params">( ... )</span></span></span><br><span class="line">    <span class="keyword">local</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">local</span> A=&#123;...&#125;</span><br><span class="line">    <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(A) <span class="keyword">do</span></span><br><span class="line">    sum=sum+v</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">1</span>,<span class="number">11</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure><h2 id="阿斯克吗转字符串"><a href="#阿斯克吗转字符串" class="headerlink" title="阿斯克吗转字符串"></a>阿斯克吗转字符串</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\x66&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">b=<span class="string">&quot;sdf&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">upper</span>(<span class="string">&quot;fds&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">upper</span>(b))</span><br><span class="line"><span class="built_in">print</span>(b:<span class="built_in">upper</span>())</span><br><span class="line"><span class="built_in">print</span>(b.<span class="built_in">upper</span>(b))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">A=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line"><span class="comment">--正向遍历</span></span><br><span class="line"><span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(A) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(i,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--反向遍历</span></span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(A) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--某位置插入</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(A,<span class="number">3</span>,<span class="number">5</span>)</span><br><span class="line"><span class="comment">--所以位置后插入</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.<span class="built_in">concat</span>(A, <span class="number">1</span>))</span><br><span class="line"><span class="comment">--排序</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">sort</span>(A)</span><br><span class="line"></span><br><span class="line"><span class="comment">--从大到小排序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">low</span><span class="params">( a,b )</span></span></span><br><span class="line">    <span class="keyword">return</span> a&gt;b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">sort</span>(A,up)</span><br><span class="line"></span><br><span class="line"><span class="comment">--输入的一行  io.lines()</span></span><br><span class="line"><span class="keyword">local</span> a=&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">x</span><span class="params">(a)</span></span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">concat</span>(a,<span class="string">&quot;+&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">  a[#a+<span class="number">1</span>]=line</span><br><span class="line">  <span class="built_in">print</span>(x(a))</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h2 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--随机数种子</span></span><br><span class="line"><span class="built_in">math</span>.<span class="built_in">randomseed</span>(<span class="built_in">os</span>.<span class="built_in">time</span>())</span><br><span class="line"><span class="comment">--随机数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>,<span class="number">100</span>))</span><br></pre></td></tr></table></figure><h2 id="协程"><a href="#协程" class="headerlink" title="协程"></a>协程</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">关于协程的操作作为基础库的一个子库， 被放在一个独立表 <span class="built_in">coroutine</span> 中。 协程的介绍参见 §<span class="number">2.6</span> 。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">create</span> (f)</span><br><span class="line">创建一个主体函数为 f 的新协程。 f 必须是一个 Lua 的函数。 返回这个新协程，它是一个类型为 <span class="string">&quot;thread&quot;</span> 的对象。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span> (co [, val1, ···])</span><br><span class="line">开始或继续协程 co 的运行。 当你第一次延续一个协程，它会从主体函数处开始运行。 val1, ... 这些值会以参数形式传入主体函数。 如果该协程被让出，<span class="built_in">resume</span> 会重新启动它； val1, ... 这些参数会作为让出点的返回值。</span><br><span class="line"></span><br><span class="line">如果协程运行起来没有错误， <span class="built_in">resume</span> 返回 <span class="literal">true</span> 加上传给 <span class="built_in">yield</span> 的所有值 （当协程让出）， 或是主体函数的所有返回值（当协程中止）。 如果有任何错误发生， <span class="built_in">resume</span> 返回 <span class="literal">false</span> 加错误消息。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">yield</span> (···)</span><br><span class="line">挂起正在调用的协程的执行。 传递给 <span class="built_in">yield</span> 的参数都会转为 <span class="built_in">resume</span> 的额外返回值。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">wrap</span> (f)</span><br><span class="line">创建一个主体函数为 f 的新协程。 f 必须是一个 Lua 的函数。 返回一个函数， 每次调用该函数都会延续该协程。 传给这个函数的参数都会作为 <span class="built_in">resume</span> 的额外参数。 和 <span class="built_in">resume</span> 返回相同的值， 只是没有第一个布尔量。 如果发生任何错误，抛出这个错误。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">status</span> (co)</span><br><span class="line">以字符串形式返回协程 co 的状态： 当协程正在运行（它就是调用 <span class="built_in">status</span> 的那个） ，返回 <span class="string">&quot;running&quot;</span>； 如果协程调用 <span class="built_in">yield</span> 挂起或是还没有开始运行，返回 <span class="string">&quot;suspended&quot;</span>； 如果协程是活动的，但并不在运行（即它正在延续其它协程），返回 <span class="string">&quot;normal&quot;</span>； 如果协程运行完主体函数或因错误停止，返回 <span class="string">&quot;dead&quot;</span>。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.isyieldable ()</span><br><span class="line">如果正在运行的协程可以让出，则返回真。</span><br><span class="line"></span><br><span class="line">不在主线程中或不在一个无法让出的 C 函数中时，当前协程是可让出的。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">running</span> ()</span><br><span class="line">返回当前正在运行的协程加一个布尔量。 如果当前运行的协程是主线程，其为真。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="协程创建执行与返回"><a href="#协程创建执行与返回" class="headerlink" title="协程创建执行与返回"></a>协程创建执行与返回</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--创建运行协程</span></span><br><span class="line"><span class="comment">--[[coroutine.create (f)</span></span><br><span class="line"><span class="comment">创建一个主体函数为 f 的新协程。 f 必须是一个 Lua 的函数。 返回这个新协程，它是一个类型为 &quot;thread&quot; 的对象。]]</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">( ... )</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;coroutine is running...&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>(co)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)</span><br><span class="line"></span><br><span class="line"><span class="comment">--返回值 coroutine.yield() 返回后再次执行时从返回处开始执行</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">( ... )</span></span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;start&quot;</span>)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">yield</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;coroutine1 is running...&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="协程传参返回值"><a href="#协程传参返回值" class="headerlink" title="协程传参返回值"></a>协程传参返回值</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--传参  coroutine.resume(co,1,2,3,41,1)</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">(...)</span></span></span><br><span class="line"><span class="keyword">local</span> a = &#123;...&#125;</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line">        <span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">print</span>(i,v)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">41</span>,<span class="number">1</span>)</span><br><span class="line"><span class="comment">--返回值  返回的第一个值为执行成功与否</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">(...)</span></span></span><br><span class="line">    <span class="built_in">coroutine</span>.<span class="built_in">yield</span>(<span class="string">&quot;saf&quot;</span>,<span class="number">123</span>,dffs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line">a,b ,c,d= <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">41</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(a,b,c,d)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--注意传值时第二次传值不会进行覆盖</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">(a,b)</span></span></span><br><span class="line">    <span class="built_in">print</span>(a,b)</span><br><span class="line">    c,d = <span class="built_in">coroutine</span>.<span class="built_in">yield</span>(a,b)</span><br><span class="line">    <span class="built_in">print</span>(a,b)</span><br><span class="line">    <span class="built_in">print</span>(c,d)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用coroutine.wrap创建的协程 返回值为function</span></span><br><span class="line"><span class="comment">--创建一个主体函数为 f 的新协程。 f 必须是一个 Lua 的函数。 返回一个函数， 每次调用该函数都会延续该协程。 传给这个函数的参数都会作为 resume 的额外参数。 和 resume 返回相同的值， 只是没有第一个布尔量。 如果发生任何错误，抛出这个错误。</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">wrap</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">(a,b)</span></span></span><br><span class="line">    <span class="built_in">print</span>(a,b)</span><br><span class="line">    c,d=<span class="built_in">coroutine</span>.<span class="built_in">yield</span>(a,b)</span><br><span class="line">    <span class="built_in">print</span>(a,b)</span><br><span class="line">    <span class="built_in">print</span>(c,d)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(co))</span><br><span class="line">co(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">co(<span class="number">3</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> monster =&#123;</span><br><span class="line">    name=<span class="string">&quot;monster&quot;</span>,</span><br><span class="line">    Hp=<span class="number">100</span>,</span><br><span class="line">    pos=&#123;x=<span class="number">100</span>,y=<span class="number">200</span>&#125;,</span><br><span class="line">    <span class="string">[[</span></span><br><span class="line"><span class="string">    TakeDamage=function(self,demage)</span></span><br><span class="line"><span class="string">        self.Hp=self.Hp-demage</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">    ]]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(monster.Hp)</span><br><span class="line"><span class="comment">--定义函数加上self变量</span></span><br><span class="line">monster.TakeDamage=<span class="function"><span class="keyword">function</span><span class="params">(self,demage)</span></span></span><br><span class="line">        <span class="built_in">self</span>.Hp=<span class="built_in">self</span>.Hp-demage</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="string">[[</span></span><br><span class="line"><span class="string">使用语法糖改编 默认有self</span></span><br><span class="line"><span class="string">function monster:TakeDamage(demage)</span></span><br><span class="line"><span class="string">        self.Hp=self.Hp-demage</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line"></span><br><span class="line">monster.TakeDamage(monster,<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(monster.Hp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> monster1 =&#123;</span><br><span class="line">    name=<span class="string">&quot;monster&quot;</span>,</span><br><span class="line">    Hp=<span class="number">120</span>,</span><br><span class="line">    pos=&#123;x=<span class="number">100</span>,y=<span class="number">200</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--可进行传值</span></span><br><span class="line">monster.TakeDamage(monster1,<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(monster1.Hp)</span><br><span class="line"></span><br><span class="line"><span class="comment">--语法糖：将自身作为函数的第一个参数传入</span></span><br><span class="line">monster:TakeDamage(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--直接赋值为地址引用</span></span><br><span class="line"><span class="keyword">local</span> monster1 = monster</span><br><span class="line">monster1:TakeDamage(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(monster.Hp) <span class="comment">--输出为 0 </span></span><br></pre></td></tr></table></figure><h1 id="元表"><a href="#元表" class="headerlink" title="元表"></a>元表</h1><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--meta table 元表 原型</span></span><br><span class="line"></span><br><span class="line">monster =&#123;</span><br><span class="line">    name=<span class="string">&quot;monster&quot;</span>,</span><br><span class="line">    Hp=<span class="number">100</span>,</span><br><span class="line">    pos=&#123;x=<span class="number">100</span>,y=<span class="number">200</span>&#125;,</span><br><span class="line">    TakeDamage=<span class="function"><span class="keyword">function</span><span class="params">(self,demage)</span></span></span><br><span class="line">        <span class="built_in">self</span>.Hp=<span class="built_in">self</span>.Hp-demage</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">objMonster=&#123;x=<span class="number">1</span>,y=<span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(objMonster, &#123;<span class="built_in">__index</span>=monster&#125;)</span><br><span class="line">objMonster:TakeDamage(<span class="number">11</span>)</span><br><span class="line"><span class="built_in">print</span>(objMonster.Hp)</span><br><span class="line"><span class="comment">--设置元表后不会修改元表值</span></span><br><span class="line"><span class="built_in">print</span>(monster.Hp)</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建new函数</span></span><br><span class="line">monster=&#123;</span><br><span class="line">    name=<span class="string">&quot;monster&quot;</span>,</span><br><span class="line">    Hp=<span class="number">100</span>,</span><br><span class="line">    x=<span class="number">1</span>,y=<span class="number">2</span>,</span><br><span class="line">    TakeDamage=<span class="function"><span class="keyword">function</span><span class="params">(self,damage)</span></span></span><br><span class="line">        <span class="built_in">self</span>.Hp=<span class="built_in">self</span>.Hp-damage</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    showInfo=<span class="function"><span class="keyword">function</span><span class="params">(self)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;name:&quot;</span>,<span class="built_in">self</span>.name,<span class="string">&quot;Hp:&quot;</span>,<span class="built_in">self</span>.Hp,<span class="built_in">self</span>.x,<span class="built_in">self</span>.y)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">monster:new</span><span class="params">(name,Hp,x,y )</span></span></span><br><span class="line">    <span class="keyword">local</span> aa = &#123;&#125;</span><br><span class="line">    <span class="built_in">setmetatable</span>(aa,&#123;<span class="built_in">__index</span>=monster&#125;)</span><br><span class="line">    aa.name=name</span><br><span class="line">    aa.Hp=Hp</span><br><span class="line">    aa.x=x</span><br><span class="line">    aa.y=y</span><br><span class="line">    <span class="keyword">return</span> aa</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> a=monster:new(<span class="string">&quot;aaa&quot;</span>,<span class="number">11</span>,<span class="number">222</span>,<span class="number">333</span>)</span><br><span class="line">a:showInfo()</span><br><span class="line">a:TakeDamage(<span class="number">100</span>)</span><br><span class="line">a:showInfo()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--设置直接调用table名执行的函数</span></span><br><span class="line">monster=&#123;</span><br><span class="line">    name=<span class="string">&quot;monster&quot;</span>,</span><br><span class="line">    Hp=<span class="number">100</span>,</span><br><span class="line">    x=<span class="number">1</span>,y=<span class="number">2</span>,</span><br><span class="line">    TakeDamage=<span class="function"><span class="keyword">function</span><span class="params">(self,damage)</span></span></span><br><span class="line">        <span class="built_in">self</span>.Hp=<span class="built_in">self</span>.Hp-damage</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">monster:showInfo</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;name:&quot;</span>,<span class="built_in">self</span>.name,<span class="string">&quot;Hp:&quot;</span>,<span class="built_in">self</span>.Hp,<span class="built_in">self</span>.x,<span class="built_in">self</span>.y)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">monster:new</span><span class="params">(name,Hp,x,y )</span></span></span><br><span class="line">    <span class="keyword">local</span> aa = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    aa.name=name</span><br><span class="line">    aa.Hp=Hp</span><br><span class="line">    aa.x=x</span><br><span class="line">    aa.y=y</span><br><span class="line">    <span class="built_in">setmetatable</span>(aa,&#123;<span class="built_in">__index</span>=monster&#125;)</span><br><span class="line">    <span class="keyword">return</span> aa</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--设置table的__call</span></span><br><span class="line"><span class="built_in">setmetatable</span>(monster,</span><br><span class="line">&#123;   </span><br><span class="line">    <span class="built_in">__call</span>=</span><br><span class="line">    <span class="function"><span class="keyword">function</span><span class="params">(self,name,Hp,x,y )</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>:new(name,Hp,x,y)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">--直接调用函数</span></span><br><span class="line"><span class="keyword">local</span> a=monster(<span class="string">&quot;aaa&quot;</span>,<span class="number">11</span>,<span class="number">222</span>,<span class="number">333</span>)</span><br><span class="line">a:showInfo()</span><br><span class="line">a:TakeDamage(<span class="number">100</span>)</span><br><span class="line">a:showInfo()</span><br></pre></td></tr></table></figure><h1 id="实现私有成员"><a href="#实现私有成员" class="headerlink" title="实现私有成员"></a>实现私有成员</h1><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--实现思路，在new的时候只把可以使用的接口开放出来</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="string">[[</span></span><br><span class="line"><span class="string">rawset (table, index, value)</span></span><br><span class="line"><span class="string">在不触发任何元方法的情况下 将 table[index] 设为 value。 table 必须是一张表， index 可以是 nil 与 NaN 之外的任何值。 value 可以是任何 Lua 值。</span></span><br><span class="line"><span class="string">这个函数返回 table。</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line">monster=&#123;</span><br><span class="line">    name=<span class="string">&quot;monster&quot;</span>,</span><br><span class="line">    Hp=<span class="number">100</span>,</span><br><span class="line">    x=<span class="number">1</span>,y=<span class="number">2</span>,</span><br><span class="line">    <span class="built_in">type</span>=<span class="string">&quot;monster&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">monster:GetHp</span><span class="params">( )</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>.Hp</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">monster:TakeDamage</span><span class="params">( damage )</span></span></span><br><span class="line">    <span class="built_in">self</span>.Hp=<span class="built_in">self</span>.Hp-damage</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">monster.new</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> obj=&#123;Hp=monster.Hp,y=monster.y,x=monster.x&#125;</span><br><span class="line">    <span class="built_in">setmetatable</span>(obj,monster)</span><br><span class="line">    monster.<span class="built_in">__index</span> = &#123;GetHp=monster.GetHp,TakeDamage=monster.TakeDamage&#125;</span><br><span class="line">    <span class="comment">--当使用没用定义的变量时调用__newindex，可用来实现标量</span></span><br><span class="line">    monster.<span class="built_in">__newindex</span>=<span class="function"><span class="keyword">function</span><span class="params">(tab,key,value)</span></span></span><br><span class="line">                            <span class="keyword">if</span> key==<span class="string">&quot;type&quot;</span> <span class="keyword">then</span></span><br><span class="line">                            <span class="built_in">print</span>(<span class="string">&quot;not&quot;</span>)</span><br><span class="line">                            <span class="keyword">return</span></span><br><span class="line">                            <span class="keyword">end</span></span><br><span class="line">                        <span class="built_in">rawset</span>(tab,key,value)</span><br><span class="line">                        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> obj</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> x = monster.new()</span><br><span class="line"><span class="built_in">print</span>(x:GetHp())</span><br><span class="line">x.<span class="built_in">type</span>=<span class="string">&quot;fds&quot;</span></span><br><span class="line">x.hp=<span class="string">&quot;sdf&quot;</span></span><br><span class="line"><span class="built_in">print</span>(x.Hp)</span><br></pre></td></tr></table></figure><h1 id="闭包-1"><a href="#闭包-1" class="headerlink" title="闭包"></a>闭包</h1><p><a href="https://blog.csdn.net/u012861978/article/details/105796686?ops_request_misc=%7B%22request_id%22:%22167625967216782425647812%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=167625967216782425647812&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-105796686-null-null.142%5Ev73%5Einsert_down1,201%5Ev4%5Eadd_ask,239%5Ev1%5Econtrol&utm_term=lua%E9%97%AD%E5%8C%85&spm=1018.2226.3001.4187">(47条消息) lua闭包_汪汪富贵的博客-CSDN博客</a></p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--同一时间返回共用同一upvalue</span></span><br><span class="line"><span class="comment">--不同时间upvalue不同</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span><span class="params">( n )</span></span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">()</span></span></span><br><span class="line">    n=n+<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span><span class="params">()</span></span></span><br><span class="line">    n=n+<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> a,b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">x=c(<span class="number">10</span>)</span><br><span class="line">y=c(<span class="number">10</span>)</span><br><span class="line">x()</span><br><span class="line">y()</span><br><span class="line">x()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="lua" scheme="http://example.com/categories/lua/"/>
    
    
    <category term="lua" scheme="http://example.com/tags/lua/"/>
    
  </entry>
  
  <entry>
    <title>极世界-好友系统</title>
    <link href="http://example.com/2023/01/16/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%A5%BD%E5%8F%8B%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2023/01/16/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%A5%BD%E5%8F%8B%E7%B3%BB%E7%BB%9F/</id>
    <published>2023-01-16T08:12:09.000Z</published>
    <updated>2023-01-17T02:48:24.566Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">好友添加流程：请求人添加好友，服务器向响应方发送请求消息，响应方发送响应信息，服务器根据响应信息向请求方和响应方添加信息</span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;好友添加流程：请求人添加好友，服务器向响应方发送请求消息，响应方发送响应信息，服务器根据响应信息向请求方和响应方添加信息&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-刷怪系统</title>
    <link href="http://example.com/2023/01/13/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%88%B7%E6%80%AA%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2023/01/13/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%88%B7%E6%80%AA%E7%B3%BB%E7%BB%9F/</id>
    <published>2023-01-13T03:27:36.000Z</published>
    <updated>2023-01-16T08:12:43.229Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">刷怪逻辑：</span><br><span class="line">地图创建刷怪管理，刷怪管理存储刷怪规则，刷怪规则每帧判断是否需要刷怪需要则，地图管理器刷怪，传递给地图通知地图中所有玩家</span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;刷怪逻辑：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;地图创建刷怪管理，刷怪管理存储刷怪规则，刷怪规则每帧判断是否需要刷怪需要则，地图管理器刷怪，传递给地图通知地图中所有玩家&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-任务系统</title>
    <link href="http://example.com/2023/01/11/%E6%9E%81%E4%B8%96%E7%95%8C-%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2023/01/11/%E6%9E%81%E4%B8%96%E7%95%8C-%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/</id>
    <published>2023-01-11T08:30:08.000Z</published>
    <updated>2023-01-13T03:26:48.077Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><p><img src="/../images/image-20230113112519212.png" alt="image-20230113112519212"></p><p><img src="/../images/image-20230113112533890.png" alt="image-20230113112533890"></p><p><img src="/../images/image-20230113112546424.png" alt="image-20230113112546424"></p><p><img src="/../images/image-20230113112556148.png" alt="image-20230113112556148"></p><p><img src="/../images/image-20230113112606055.png" alt="image-20230113112606055"></p><p><img src="/../images/image-20230113112615013.png" alt="image-20230113112615013"></p><p><img src="/../images/image-20230113112624099.png" alt="image-20230113112624099"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-装备系统</title>
    <link href="http://example.com/2023/01/04/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%A3%85%E5%A4%87%E7%B3%BB%E7%BB%9F-1/"/>
    <id>http://example.com/2023/01/04/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%A3%85%E5%A4%87%E7%B3%BB%E7%BB%9F-1/</id>
    <published>2023-01-04T11:06:07.000Z</published>
    <updated>2023-01-04T11:06:07.269Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>极世界-装备系统</title>
    <link href="http://example.com/2023/01/03/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%A3%85%E5%A4%87%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2023/01/03/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%A3%85%E5%A4%87%E7%B3%BB%E7%BB%9F/</id>
    <published>2023-01-03T03:33:05.000Z</published>
    <updated>2023-01-05T03:53:04.593Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">接口 IPointerClickHandler</span><br></pre></td></tr></table></figure><span id="more"></span><p><img src="/../images/image-20230104190912135.png" alt="image-20230104190912135"></p><p><img src="/../images/image-20230104190925642.png" alt="image-20230104190925642"></p><p><img src="/../images/image-20230104190938466.png" alt="image-20230104190938466"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;接口 IPointerClickHandler&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-商店系统</title>
    <link href="http://example.com/2022/12/30/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%95%86%E5%BA%97%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2022/12/30/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%95%86%E5%BA%97%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-12-30T02:11:09.000Z</published>
    <updated>2023-01-03T03:36:41.243Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">选择时组件 Selectable</span><br><span class="line">当绑定组件后，继承 ISelectHandler 接口 实现 OnSelect函数，当选择时则执行此函数</span><br></pre></td></tr></table></figure><span id="more"></span><p><img src="/../images/image-20230103113612563.png" alt="image-20230103113612563"></p><p><img src="/../images/image-20230103113626905.png" alt="image-20230103113626905"></p><p><img src="/../images/image-20230103113635096.png" alt="image-20230103113635096"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;选择时组件 Selectable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;当绑定组件后，继承 ISelectHandler 接口 实现 OnSelect函数，当选择时则执行此函数&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-背包系统</title>
    <link href="http://example.com/2022/12/28/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%83%8C%E5%8C%85%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2022/12/28/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%83%8C%E5%8C%85%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-12-28T02:14:02.000Z</published>
    <updated>2022-12-29T04:47:06.729Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">数据库用二进制存储</span><br><span class="line"></span><br><span class="line">更新协议 更新Define 制作背包UI 背包小格子脚本 背包数据库建立</span><br><span class="line"></span><br><span class="line">bagitem使用结构体，为了方便进行交换</span><br><span class="line"></span><br><span class="line">背包作用</span><br><span class="line">背包系统组成</span><br><span class="line"></span><br><span class="line">[StructLayout(LayoutKind.Sequential, Pack =1)]解释</span><br><span class="line"></span><br><span class="line">GetComponentsInChildren(); 使用方法</span><br><span class="line"></span><br><span class="line">通过二进制存储数据</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="背包作用"><a href="#背包作用" class="headerlink" title="背包作用"></a>背包作用</h1><p><img src="/../images/image-20221228162200670.png" alt="image-20221228162200670"></p><h1 id="背包系统组成"><a href="#背包系统组成" class="headerlink" title="背包系统组成"></a>背包系统组成</h1><p><img src="/../images/image-20221228162225821.png" alt="image-20221228162225821"></p><h1 id="StructLayout-LayoutKind-Sequential-Pack-x3D-1-解释"><a href="#StructLayout-LayoutKind-Sequential-Pack-x3D-1-解释" class="headerlink" title="[StructLayout(LayoutKind.Sequential, Pack &#x3D;1)]解释"></a>[StructLayout(LayoutKind.Sequential, Pack &#x3D;1)]解释</h1><p><code>[StructLayout(LayoutKind.Sequential)]</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">结构体是由若干成员组成的.布局有两种</span><br><span class="line">1.Sequential,顺序布局,比如</span><br><span class="line">struct S1</span><br><span class="line">&#123;</span><br><span class="line">  int a;</span><br><span class="line">  int b;</span><br><span class="line">&#125;</span><br><span class="line">那么默认情况下在内存里是先排a,再排b</span><br><span class="line">也就是如果能取到a的地址,和b的地址,则相差一个int类型的长度,4字节</span><br><span class="line">[StructLayout(LayoutKind.Sequential)] </span><br><span class="line">struct S1</span><br><span class="line">&#123;</span><br><span class="line">  int a;</span><br><span class="line">  int b;</span><br><span class="line">&#125;</span><br><span class="line">这样和上一个是一样的.因为默认的内存排列就是Sequential,也就是按成员的先后顺序排列.</span><br><span class="line">2.Explicit,精确布局</span><br><span class="line">需要用FieldOffset()设置每个成员的位置</span><br><span class="line">这样就可以实现类似c的公用体的功能</span><br><span class="line">[StructLayout(LayoutKind.Explicit)] </span><br><span class="line">struct S1</span><br><span class="line">&#123;</span><br><span class="line">  [FieldOffset(0)]</span><br><span class="line">  int a;</span><br><span class="line">  [FieldOffset(0)]</span><br><span class="line">  int b;</span><br><span class="line">&#125;</span><br><span class="line">这样a和b在内存中地址相同</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">StructLayout特性支持三种附加字段：CharSet、Pack、Size。     </span><br></pre></td></tr></table></figure><p>·  CharSet定义在结构中的字符串成员在结构被传给DLL时的排列方式。可以是Unicode、Ansi或Auto。<br> 默认为Auto，在WIN  NT&#x2F;2000&#x2F;XP中表示字符串按照Unicode字符串进行排列，在WIN  95&#x2F;98&#x2F;Me中则表示按照ANSI字符串进行排列。<br>·  Pack定义了结构的封装大小。可以是1、2、4、8、16、32、64、128或特殊值0。特殊值0表示当前操作平台默认的压缩大小。   </p><h1 id="c-GetComponentsInChildren-lt-组件-gt"><a href="#c-GetComponentsInChildren-lt-组件-gt" class="headerlink" title="c# GetComponentsInChildren&lt;组件&gt;();"></a>c# <code>GetComponentsInChildren</code>&lt;组件&gt;();</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">c# GetComponentsInChildren&lt;组件&gt;();</span><br><span class="line">这种方式是 大家经常用到的，这种是获取自己和它的孩子有同样的组件（比如 Rigidbody），返回一个数组，数组包括自己和它的孩子。如果他的孩子里面有的是不活跃SetActive(false);则获取不到。</span><br><span class="line">所以就会有第二个参数GetComponentsInChildren&lt;组件&gt;(true);</span><br><span class="line"></span><br><span class="line">includeInactive =true;</span><br><span class="line">原文链接：https://blog.csdn.net/microsoftMSDNNET/article/details/48522817</span><br></pre></td></tr></table></figure><h1 id="通过二进制存储数据"><a href="#通过二进制存储数据" class="headerlink" title="通过二进制存储数据"></a>通过二进制存储数据</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 分析获取背包</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;data&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">unsafe</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Analyze</span>(<span class="params"><span class="built_in">byte</span>[] data</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">fixed</span> (<span class="built_in">byte</span>* pt = data)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.Unlocked;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            BagItem* item = (BagItem*)(pt + (i * <span class="keyword">sizeof</span>(BagItem)));</span><br><span class="line">            <span class="keyword">this</span>.items[i] = *item;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">unsafe</span> <span class="keyword">public</span> NBagInfo <span class="title">GetBagInfo</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Debug.LogError(<span class="string">&quot;BagManager-&gt;NBagInfo&quot;</span>);</span><br><span class="line">    <span class="keyword">fixed</span> (<span class="built_in">byte</span>* pt = info.Items)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.Unlocked; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            BagItem* item = (BagItem*)(pt + (i * <span class="keyword">sizeof</span>(BagItem)));</span><br><span class="line">            *item = items[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.info;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;数据库用二进制存储&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;更新协议 更新Define 制作背包UI 背包小格子脚本 背包数据库建立&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bagitem使用结构体，为了方便进行交换&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;背包作用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;背包系统组成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[StructLayout(LayoutKind.Sequential, Pack =1)]解释&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetComponentsInChildren(); 使用方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;通过二进制存储数据&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-道具系统</title>
    <link href="http://example.com/2022/12/21/%E6%9E%81%E4%B8%96%E7%95%8C-%E9%81%93%E5%85%B7%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2022/12/21/%E6%9E%81%E4%B8%96%E7%95%8C-%E9%81%93%E5%85%B7%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-12-21T14:25:18.000Z</published>
    <updated>2022-12-22T15:37:52.496Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">道具分类</span><br><span class="line">道具系统对外接口</span><br><span class="line">道具系统组成</span><br><span class="line"></span><br><span class="line">更新协议：道具类型，角色道具信息，登录时返回角色信息（包含道具）</span><br><span class="line">建立道具表数据库 角色与道具一对多 道具包含ID 数量</span><br><span class="line"></span><br><span class="line">服务端：道具管理器，道具实体类</span><br><span class="line">item:物品的增加删除和使用</span><br><span class="line">itemManager：物品所有者，物品列表，物品使用，是否持有物品，物品获取，物品添加，物品移除，获取物品列表</span><br><span class="line"></span><br><span class="line">DBservice:数据库保存</span><br><span class="line">Character：创建ItemManager，将道具读入Manager</span><br><span class="line"></span><br><span class="line">UserSerevice-角色进入：将角色信息填入</span><br><span class="line"></span><br><span class="line">客户端：item实体，itemManager</span><br><span class="line">item实体：存放 ID，数量</span><br><span class="line">ItemManager：Item字典，初始化Item，获取配置表中信息，使用逻辑</span><br><span class="line"></span><br><span class="line">UserSerevice：角色进入初始化道具表管理器</span><br><span class="line"></span><br><span class="line">道具实体类存在的意义：为了避免频繁操作数据库，登录时将道具信息拉出，之后操作本地数据，需要更新时更新数据库</span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;道具分类&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;道具系统对外接口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;道具系统组成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;更新协议：道具类型，角色道具信息，登录时返回角色信息（包含道具）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;建立道具表数据库 角色与道具一对多 道具包含ID 数量&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;服务端：道具管理器，道具实体类&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;item:物品的增加删除和使用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;itemManager：物品所有者，物品列表，物品使用，是否持有物品，物品获取，物品添加，物品移除，获取物品列表&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DBservice:数据库保存&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Character：创建ItemManager，将道具读入Manager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UserSerevice-角色进入：将角色信息填入&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;客户端：item实体，itemManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;item实体：存放 ID，数量&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ItemManager：Item字典，初始化Item，获取配置表中信息，使用逻辑&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UserSerevice：角色进入初始化道具表管理器&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;道具实体类存在的意义：为了避免频繁操作数据库，登录时将道具信息拉出，之后操作本地数据，需要更新时更新数据库&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-NPC系统</title>
    <link href="http://example.com/2022/12/20/%E6%9E%81%E4%B8%96%E7%95%8C-NPC%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2022/12/20/%E6%9E%81%E4%B8%96%E7%95%8C-NPC%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-12-20T12:30:01.000Z</published>
    <updated>2022-12-21T09:28:08.320Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">NPC分类</span><br><span class="line">NPC系统设计</span><br><span class="line">点击场景中的对象 OnMouseDown</span><br><span class="line">OnMouseDown 点击脚本GameObject碰撞体时触发</span><br><span class="line">NpcManager 管理NPC数据，功能事件</span><br><span class="line">NpcController 管理Npc的实体动作等</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="要点"><a href="#要点" class="headerlink" title="要点"></a>要点</h1><p><img src="/../images/image-20221220203332499.png" alt="image-20221220203332499"></p><h1 id="NPC分类"><a href="#NPC分类" class="headerlink" title="NPC分类"></a>NPC分类</h1><p><img src="/../images/image-20221220203051502.png" alt="image-20221220203051502"></p><h1 id="NPC系统设计"><a href="#NPC系统设计" class="headerlink" title="NPC系统设计"></a>NPC系统设计</h1><p><img src="/../images/image-20221220203139722.png" alt="image-20221220203139722"></p><h1 id="新增配置表"><a href="#新增配置表" class="headerlink" title="新增配置表"></a>新增配置表</h1><p>自动赋值json  编辑这个</p><p><img src="/../images/image-20221220205825505.png" alt="image-20221220205825505"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NPC分类&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NPC系统设计&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;点击场景中的对象 OnMouseDown&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OnMouseDown 点击脚本GameObject碰撞体时触发&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NpcManager 管理NPC数据，功能事件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NpcController 管理Npc的实体动作等&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-UI系统框架设计</title>
    <link href="http://example.com/2022/12/19/%E6%9E%81%E4%B8%96%E7%95%8C-UI%E7%B3%BB%E7%BB%9F%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/"/>
    <id>http://example.com/2022/12/19/%E6%9E%81%E4%B8%96%E7%95%8C-UI%E7%B3%BB%E7%BB%9F%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/</id>
    <published>2022-12-19T11:52:30.000Z</published>
    <updated>2022-12-21T04:37:21.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">直接断开连接玩家不退出</span><br><span class="line">mono单例当父对象被销毁的，子对象也会被销毁</span><br><span class="line"></span><br><span class="line">Type 类</span><br><span class="line">C# default(T)关键字</span><br><span class="line">加载游戏资源</span><br><span class="line"></span><br><span class="line">UIManager  UI的资源拉取，创建，销毁</span><br><span class="line">UIWindow   UI的父类，定义UI的关闭事件，UI的按钮关闭事件</span><br><span class="line">UIMain     UI管理的表层</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="直接断开连接玩家不退出"><a href="#直接断开连接玩家不退出" class="headerlink" title="直接断开连接玩家不退出"></a>直接断开连接玩家不退出</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在玩家断开连接信息发出时发送角色离开请求</span><br></pre></td></tr></table></figure><p><img src="/../images/image-20221219212108086.png" alt="image-20221219212108086"></p><p><img src="/../images/image-20221219212052895.png" alt="image-20221219212052895"></p><h1 id="Type-类"><a href="#Type-类" class="headerlink" title="Type 类"></a>Type 类</h1><pre><code>Type类，用来包含类型的特性。对于程序中的每一个类型，都会有一个包含这个类型的信息的Type类的对象，类型信息包含数据，属性和方法等信息。</code></pre><p>1.生成Type对象<br>      有两种方法可以生成Type类的对象：一种是Typeof(类名)，一种是对象调用GetType()函数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Type type = typeof(Person);</span><br><span class="line"></span><br><span class="line"> Person person = new Person();</span><br><span class="line"> Type type2 = person.GetType();</span><br></pre></td></tr></table></figure><p>2.获取类的信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//类的名称    </span><br><span class="line">string name = type.Name;           </span><br><span class="line">//类的命名空间</span><br><span class="line">string space = type.Namespace;</span><br><span class="line">//类的程序集</span><br><span class="line">Assembly assembly = type.Assembly;</span><br><span class="line">//类的共有字段</span><br><span class="line">FieldInfo[] fieldInfos = type.GetFields();</span><br><span class="line">//类的属性</span><br><span class="line">PropertyInfo[] propertyInfos = type.GetProperties();</span><br><span class="line">//类的方法</span><br><span class="line">MethodInfo[] methodInfos = type.GetMethods();</span><br></pre></td></tr></table></figure><p>原文链接：<a href="https://blog.csdn.net/liyazhen2011/article/details/81105717">https://blog.csdn.net/liyazhen2011/article/details/81105717</a></p><h1 id="C-default-T-关键字"><a href="#C-default-T-关键字" class="headerlink" title="C# default(T)关键字"></a>C# default(T)关键字</h1><p>C#中的关键词default函数，其作用是default(T)返回一个该类型T的默认值，一般情况下用于在不知道类型参数具体为值类型还是引用类型的情况下，为对象实例赋于初值。<br><strong>切记：在 C# 中不允许使用未初始化的变量。</strong></p><h1 id="加载游戏资源"><a href="#加载游戏资源" class="headerlink" title="加载游戏资源"></a>加载游戏资源</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载Resources目录下的预设体</span></span><br><span class="line">Resources.Load(info.Resources);</span><br><span class="line"><span class="comment">//加载某种类型的资源</span></span><br><span class="line">Resloader.Load&lt;Sprite&gt;(<span class="string">&quot;UI/Minimap/&quot;</span> + User.Instance.CurrentMapData.MiniMap);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;直接断开连接玩家不退出&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mono单例当父对象被销毁的，子对象也会被销毁&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Type 类&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;C# default(T)关键字&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;加载游戏资源&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UIManager  UI的资源拉取，创建，销毁&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UIWindow   UI的父类，定义UI的关闭事件，UI的按钮关闭事件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UIMain     UI管理的表层&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-地图传送</title>
    <link href="http://example.com/2022/12/18/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%9C%B0%E5%9B%BE%E4%BC%A0%E9%80%81/"/>
    <id>http://example.com/2022/12/18/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%9C%B0%E5%9B%BE%E4%BC%A0%E9%80%81/</id>
    <published>2022-12-18T14:10:59.000Z</published>
    <updated>2022-12-19T11:53:00.452Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">创建传送点</span><br><span class="line">传送点配置</span><br><span class="line">编辑器扩展：传送点数据生成</span><br><span class="line">传送协议与实现</span><br><span class="line">地图传送服务流程</span><br><span class="line"></span><br><span class="line">碰撞 触发失效解决</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="编辑器扩展：传送点数据生成"><a href="#编辑器扩展：传送点数据生成" class="headerlink" title="编辑器扩展：传送点数据生成"></a>编辑器扩展：传送点数据生成</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">目的：在配置表里生成传送点位置</span><br><span class="line">使用完成后生成到客户端配置表中，需复制到服务端</span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.SceneManagement;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> UnityEditor.SceneManagement;</span><br><span class="line"><span class="keyword">using</span> Common.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MapTools</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line"></span><br><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;Map Tools/Export Teleporters&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ExportTeleporters</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        DataManager.Instance.Load();</span><br><span class="line"></span><br><span class="line">        Scene scene = EditorSceneManager.GetActiveScene();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> currentScene = scene.name;</span><br><span class="line">        <span class="keyword">if</span>(scene.isDirty)</span><br><span class="line">        &#123;</span><br><span class="line">            EditorUtility.DisplayDialog(<span class="string">&quot;提示&quot;</span>, <span class="string">&quot;请先保存当前场景&quot;</span>, <span class="string">&quot;确定&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;TeleportObject&gt; allteleportObjects = <span class="keyword">new</span> List&lt;TeleportObject&gt;();</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="keyword">var</span> map <span class="keyword">in</span> DataManager.Instance.Maps)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//获取地图所在位置</span></span><br><span class="line">            <span class="built_in">string</span> sceneFile = <span class="string">&quot;Assets/Scenes/&quot;</span> + map.Value.Resource + <span class="string">&quot;.unity&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span>(!System.IO.File.Exists(sceneFile))</span><br><span class="line">            &#123;</span><br><span class="line">                Debug.LogErrorFormat(<span class="string">&quot;Scene :&#123;0&#125; not existed!&quot;</span>, sceneFile);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            EditorSceneManager.OpenScene(sceneFile, OpenSceneMode.Single);</span><br><span class="line"></span><br><span class="line">            TeleportObject[] teleports = FindObjectsOfType&lt;TeleportObject&gt;();</span><br><span class="line">            <span class="keyword">foreach</span>(<span class="keyword">var</span> teleporter <span class="keyword">in</span> teleports)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(!DataManager.Instance.Teleporters.ContainsKey(teleporter.ID))</span><br><span class="line">                &#123;</span><br><span class="line">                    EditorUtility.DisplayDialog(<span class="string">&quot;错误&quot;</span>,</span><br><span class="line">                        <span class="built_in">string</span>.Format(<span class="string">&quot;地图：&#123;0&#125;中配置的 TeleportID：&#123;1&#125;不存在！&quot;</span>, map.Value.ID, teleporter.ID),</span><br><span class="line">                        <span class="string">&quot; 确定&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                TeleporterDefine teleporter_Define = DataManager.Instance.Teleporters[teleporter.ID];</span><br><span class="line">                <span class="keyword">if</span>(teleporter_Define.MapID!=map.Value.ID)</span><br><span class="line">                &#123;</span><br><span class="line">                    EditorUtility.DisplayDialog(<span class="string">&quot;错误&quot;</span>,</span><br><span class="line">                        <span class="built_in">string</span>.Format(<span class="string">&quot;地图：&#123;0&#125;中不应存在的 TeleportID：&#123;1&#125;！&quot;</span>, map.Value.ID, teleporter.ID),</span><br><span class="line">                          <span class="string">&quot;确定&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                teleporter_Define.Position = GameObjectTool.WorldToLogicN(teleporter.transform.position);</span><br><span class="line">                teleporter_Define.Direction = GameObjectTool.WorldToLogicN(teleporter.transform.forward);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        DataManager.Instance.SaveTeleporters();</span><br><span class="line">        EditorSceneManager.OpenScene(<span class="string">&quot;Assets/Scenes/&quot;</span> + currentScene + <span class="string">&quot;.unity&quot;</span>);</span><br><span class="line">        EditorUtility.DisplayDialog(<span class="string">&quot;提示&quot;</span>, <span class="string">&quot;传送点导出完毕&quot;</span>, <span class="string">&quot;确定&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="传送点配置"><a href="#传送点配置" class="headerlink" title="传送点配置"></a>传送点配置</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Common.Data;</span><br><span class="line"><span class="keyword">using</span> Services;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TeleportObject</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> ID;</span><br><span class="line">    Mesh mesh = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// Use this for initialization</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span> ()</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.mesh = <span class="keyword">this</span>.GetComponent&lt;MeshFilter&gt;().sharedMesh;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Update is called once per frame</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span> ()</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnTriggerEnter</span>(<span class="params">Collider other</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.LogError(<span class="string">&quot;触发进行&quot;</span>);</span><br><span class="line">        PlayerInputController playerInputController = other.GetComponent&lt;PlayerInputController&gt;();</span><br><span class="line">        <span class="keyword">if</span>(playerInputController!=<span class="literal">null</span>&amp;&amp;playerInputController.isActiveAndEnabled)</span><br><span class="line">        &#123;</span><br><span class="line">            TeleporterDefine td = DataManager.Instance.Teleporters[<span class="keyword">this</span>.ID];</span><br><span class="line">            <span class="keyword">if</span>(td==<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Debug.LogErrorFormat(<span class="string">&quot;TeleportObject :Character:&#123;0&#125; Enter Teleporter&#123;1&#125; But not existed&quot;</span></span><br><span class="line">                    , playerInputController.character.Info.Name,<span class="keyword">this</span>.ID);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            Debug.LogFormat(<span class="string">&quot;TeleportObject :Character:&#123;0&#125; Enter Teleporter&#123;1&#125; &quot;</span></span><br><span class="line">                    , playerInputController.character.Info.Name, <span class="keyword">this</span>.ID);</span><br><span class="line">            <span class="keyword">if</span>(td.LinkTo&gt;<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (DataManager.Instance.Teleporters.ContainsKey(td.LinkTo))</span><br><span class="line">                &#123;</span><br><span class="line">                    MapService.Instance.SendMapTeleport(<span class="keyword">this</span>.ID);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> Debug.LogErrorFormat(<span class="string">&quot;Teleporter ID:&#123;0&#125; LinkID:&#123;1&#125; Error&quot;</span>, <span class="keyword">this</span>.ID, td.LinkTo);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> UNITY_EDITOR</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDrawGizmos</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Gizmos.color = Color.blue;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.mesh!=<span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Gizmos.DrawWireMesh(<span class="keyword">this</span>.mesh, </span><br><span class="line">                <span class="keyword">this</span>.transform.position + Vector3.up * <span class="keyword">this</span>.transform.localPosition.y * <span class="number">.5</span>f, </span><br><span class="line">                <span class="keyword">this</span>.transform.rotation, <span class="keyword">this</span>.transform.localScale);</span><br><span class="line">        &#125;</span><br><span class="line">        UnityEditor.Handles.color = Color.red;</span><br><span class="line">        UnityEditor.Handles.ArrowHandleCap(<span class="number">0</span>, <span class="keyword">this</span>.transform.position, <span class="keyword">this</span>.transform.rotation, <span class="number">1f</span>, EventType.Repaint);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="地图传送服务流程"><a href="#地图传送服务流程" class="headerlink" title="地图传送服务流程"></a>地图传送服务流程</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">玩家进入传送区域-&gt;发送传送请求-&gt;服务端响应传送请求：玩家离开旧地图，进入新地图，修改玩家位置-&gt;客户端响应玩家进入离开地图</span><br></pre></td></tr></table></figure><h1 id="碰撞-触发失效解决"><a href="#碰撞-触发失效解决" class="headerlink" title="碰撞 触发失效解决"></a>碰撞 触发失效解决</h1><p><img src="/../images/image-20221219135706570.png" alt="image-20221219135706570"></p><p><img src="/../images/image-20221219135714843.png" alt="image-20221219135714843"></p><p>全勾上</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;创建传送点&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;传送点配置&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;编辑器扩展：传送点数据生成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;传送协议与实现&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;地图传送服务流程&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;碰撞 触发失效解决&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-移动同步3</title>
    <link href="http://example.com/2022/12/17/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A53/"/>
    <id>http://example.com/2022/12/17/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A53/</id>
    <published>2022-12-17T09:06:12.000Z</published>
    <updated>2022-12-18T14:12:00.889Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-移动同步2</title>
    <link href="http://example.com/2022/12/16/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A52/"/>
    <id>http://example.com/2022/12/16/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A52/</id>
    <published>2022-12-16T02:26:54.000Z</published>
    <updated>2022-12-17T09:07:03.396Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">同步的目标对象</span><br><span class="line">同步的流程</span><br><span class="line"></span><br><span class="line">EntitySync协议</span><br><span class="line">EntitySync的影响和发送</span><br><span class="line"></span><br><span class="line">客户端 CharacterManager Id Info.id</span><br><span class="line">服务端地图 CharacterID EntityId</span><br><span class="line">服务端 CharacterManager Id Info.id</span><br><span class="line"></span><br><span class="line">同步步骤 </span><br><span class="line">客户端状态更新-&gt;玩家控制器发送同步请求-&gt; 服务端地图服务接受同步请求-&gt;地图管理器处理请求-&gt;发送请求的是本连接 同步不是本连接-&gt;向客户端发送同步请求-&gt;客户端处理同步-&gt;客户端EntityManager修改同步的属性</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="同步的流程"><a href="#同步的流程" class="headerlink" title="同步的流程"></a>同步的流程<img src="/../images/image-20221216112633439.png" alt="image-20221216112633439"></h1>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;同步的目标对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;同步的流程&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EntitySync协议&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EntitySync的影响和发送&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;客户端 CharacterManager Id Info.id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;服务端地图 CharacterID EntityId&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;服务端 CharacterManager Id Info.id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;同步步骤 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;客户端状态更新-&amp;gt;玩家控制器发送同步请求-&amp;gt; 服务端地图服务接受同步请求-&amp;gt;地图管理器处理请求-&amp;gt;发送请求的是本连接 同步不是本连接-&amp;gt;向客户端发送同步请求-&amp;gt;客户端处理同步-&amp;gt;客户端EntityManager修改同步的属性&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-移动同步1</title>
    <link href="http://example.com/2022/12/14/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A51/"/>
    <id>http://example.com/2022/12/14/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A51/</id>
    <published>2022-12-14T12:19:14.000Z</published>
    <updated>2022-12-15T15:37:51.074Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">帧同步</span><br><span class="line">状态同步</span><br><span class="line">状态帧同步</span><br><span class="line">完善角色进入及离开处理</span><br><span class="line"></span><br><span class="line">CharacterManager（C/S）</span><br><span class="line">EntityManager（C/S）</span><br><span class="line">打包运行Win客户端</span><br><span class="line"></span><br><span class="line">遇到问题 ：返回角色选择后再次进入游戏，小地图角色transformm为null</span><br><span class="line">解决 ：角色创建为携程创建，创建完一个角色后就执行了小地图的start，导致User的角色gameobject未赋值就使用，在User中创建事件即可</span><br><span class="line"></span><br><span class="line">Mono单例需要使用重载的start等回调函数</span><br><span class="line">游戏对象管理器 使用事件时， +=  -=</span><br><span class="line"></span><br><span class="line">ID类型</span><br><span class="line"></span><br><span class="line">DB_id，Entity_ID，Tid，ID</span><br><span class="line"></span><br><span class="line">将创建角色和销毁角色 使用的ID转为Entiy_Id;</span><br><span class="line"></span><br><span class="line">Entity中的删除通知： 在EntittController中实现接口，并将接口函数添加到字典中，角色需要删除血量条等</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="帧同步"><a href="#帧同步" class="headerlink" title="帧同步"></a>帧同步</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>由于不同的系统对浮点数的处理方式不同，导致在客户端进行处理时出现不同的结果</p><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p><img src="/../images/image-20221214204024923.png" alt="image-20221214204024923"></p><p><img src="/../images/image-20221214204034956.png" alt="image-20221214204034956"></p><h1 id="状态同步"><a href="#状态同步" class="headerlink" title="状态同步"></a>状态同步</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>只有状态数据改变时才进行同步</p><h2 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h2><p><img src="/../images/image-20221214204123586.png" alt="image-20221214204123586"></p><h1 id="状态帧同步"><a href="#状态帧同步" class="headerlink" title="状态帧同步"></a>状态帧同步</h1><h2 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h2><p>按固定的逻辑帧搜集变化的状态数据并进行网络同步</p><h2 id="例子-2"><a href="#例子-2" class="headerlink" title="例子"></a>例子</h2><p><img src="/../images/image-20221214204049216.png" alt="image-20221214204049216"></p><p><img src="/../images/image-20221215161643638.png" alt="image-20221215161643638"></p><p><img src="/../images/image-20221215164053593.png" alt="image-20221215164053593"></p><p>玩家进入： 客户端 UserService 发送玩家进入请求 服务端 响应，将进入的角色加入玩家管理器中 </p><p>并加入相应地图中，地图存储进入此地图的玩家，玩家进入时，通知此地图其他所有玩家新玩家进入地图</p><p>遍历创建角色，</p><h1 id="打包运行Win客户端"><a href="#打包运行Win客户端" class="headerlink" title="打包运行Win客户端"></a>打包运行Win客户端</h1><p>将 log4net.xml 文件放到打包到的目录下</p><p>将存放数据的Data目录放到打包文件下</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;帧同步&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;状态同步&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;状态帧同步&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;完善角色进入及离开处理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CharacterManager（C/S）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EntityManager（C/S）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;打包运行Win客户端&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;遇到问题 ：返回角色选择后再次进入游戏，小地图角色transformm为null&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;解决 ：角色创建为携程创建，创建完一个角色后就执行了小地图的start，导致User的角色gameobject未赋值就使用，在User中创建事件即可&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mono单例需要使用重载的start等回调函数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;游戏对象管理器 使用事件时， +=  -=&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ID类型&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DB_id，Entity_ID，Tid，ID&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;将创建角色和销毁角色 使用的ID转为Entiy_Id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Entity中的删除通知： 在EntittController中实现接口，并将接口函数添加到字典中，角色需要删除血量条等&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-小地图</title>
    <link href="http://example.com/2022/12/14/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%B0%8F%E5%9C%B0%E5%9B%BE/"/>
    <id>http://example.com/2022/12/14/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%B0%8F%E5%9C%B0%E5%9B%BE/</id>
    <published>2022-12-14T02:45:31.000Z</published>
    <updated>2022-12-14T12:20:26.317Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">小地图系统</span><br><span class="line">小地图的资源制作方式</span><br><span class="line">小地图的UI元素</span><br><span class="line">小地图的配置与加载</span><br><span class="line">小地图与场景的坐标映射</span><br><span class="line"></span><br><span class="line">修改配置表</span><br><span class="line">在uese中添加当前地图字段</span><br><span class="line">在正式加载场景之前进行赋值</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="小地图的资源制作方式"><a href="#小地图的资源制作方式" class="headerlink" title="小地图的资源制作方式"></a>小地图的资源制作方式</h1><p>1.实时渲染场景  使用摄像机渲染到材质上</p><p>2.预渲染顶视图 + 润色</p><p>  使用摄像机渲染后美术润色</p><p>3.纯美术制作</p><h1 id="修改配置表"><a href="#修改配置表" class="headerlink" title="修改配置表"></a>修改配置表</h1><p>配置表位置 E:\极世界MMORPG\mymmo\Src\Data\Tables</p><p>点击工具生成json，生成的json会同步到客户端，服务端需要自行复制</p><p>添加配置表元素需要到服务端 Common-Data 的定义类中添加字段后生成解决方案</p><p>复制E:\极世界MMORPG\mymmo\Src\Lib\Common\bin\Debug到E:\极世界MMORPG\mymmo\Src\Client\Assets\References 中</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;小地图系统&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;小地图的资源制作方式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;小地图的UI元素&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;小地图的配置与加载&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;小地图与场景的坐标映射&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;修改配置表&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在uese中添加当前地图字段&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在正式加载场景之前进行赋值&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-进入主城3-角色信息显示</title>
    <link href="http://example.com/2022/12/13/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%BF%9B%E5%85%A5%E4%B8%BB%E5%9F%8E3-%E8%A7%92%E8%89%B2%E4%BF%A1%E6%81%AF%E6%98%BE%E7%A4%BA/"/>
    <id>http://example.com/2022/12/13/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%BF%9B%E5%85%A5%E4%B8%BB%E5%9F%8E3-%E8%A7%92%E8%89%B2%E4%BF%A1%E6%81%AF%E6%98%BE%E7%A4%BA/</id>
    <published>2022-12-13T02:05:42.000Z</published>
    <updated>2022-12-14T02:46:51.585Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">第三人称自由视角实现</span><br><span class="line"></span><br><span class="line">主界面UI角色信息  UI与数据的交互</span><br><span class="line"></span><br><span class="line">角色头顶信息显示（名字和血条）</span><br><span class="line">世界空间UI  UI跟随角色</span><br><span class="line">四元数*Vector3 = Vector3向四元数方向旋转后的向量</span><br><span class="line"></span><br><span class="line">曲线</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="第三人称自由视角实现"><a href="#第三人称自由视角实现" class="headerlink" title="第三人称自由视角实现"></a>第三人称自由视角实现</h1><p><img src="/../images/image-20221213190527470.png" alt="image-20221213190527470"></p><p>通过键盘输入控制角色转向</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">direction = <span class="keyword">new</span> Vector3(Input.GetAxis(<span class="string">&quot;Vertical&quot;</span>), <span class="number">0</span>, -Input.GetAxis(<span class="string">&quot;Horizontal&quot;</span>)).normalized;</span><br><span class="line"></span><br><span class="line">target.transform.eulerAngles = <span class="keyword">new</span> Vector3(<span class="number">0</span>, Quaternion.FromToRotation(Vector3.forward, direction).eulerAngles.y, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>原文链接：<a href="https://blog.csdn.net/n_moling/article/details/82216655">https://blog.csdn.net/n_moling/article/details/82216655</a></p><p>在游戏对象创建的时候创建血条等，在游戏对象删除的时候删除血条等，删除时判断世界UI管理器是否存在</p><p><code>this.transform.forward = Camera.main.transform.forward;</code></p><p>调整摄像机的位置</p><h1 id="曲线"><a href="#曲线" class="headerlink" title="曲线"></a>曲线</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">定义</span><br><span class="line"><span class="keyword">public</span> AnimationCurve camera_curve;</span><br><span class="line">取值</span><br><span class="line">camera_curve.Evaluate(y);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;第三人称自由视角实现&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;主界面UI角色信息  UI与数据的交互&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;角色头顶信息显示（名字和血条）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;世界空间UI  UI跟随角色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;四元数*Vector3 = Vector3向四元数方向旋转后的向量&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;曲线&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
</feed>
