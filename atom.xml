<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>心梦</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2023-02-12T15:42:07.726Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>心梦</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Lua01</title>
    <link href="http://example.com/2023/02/12/Lua01/"/>
    <id>http://example.com/2023/02/12/Lua01/</id>
    <published>2023-02-12T12:32:09.000Z</published>
    <updated>2023-02-12T15:42:07.726Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="可传函数"><a href="#可传函数" class="headerlink" title="可传函数"></a>可传函数</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(a,b )</span></span></span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(ff,a,b )</span></span></span><br><span class="line">    <span class="keyword">return</span> ff(a,b)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(f(add,<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure><h2 id="可变长度"><a href="#可变长度" class="headerlink" title="可变长度"></a>可变长度</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">add</span><span class="params">( ... )</span></span></span><br><span class="line">    <span class="keyword">local</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">local</span> A=&#123;...&#125;</span><br><span class="line">    <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(A) <span class="keyword">do</span></span><br><span class="line">    sum=sum+v</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">1</span>,<span class="number">11</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure><h2 id="阿斯克吗转字符串"><a href="#阿斯克吗转字符串" class="headerlink" title="阿斯克吗转字符串"></a>阿斯克吗转字符串</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\x66&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">b=<span class="string">&quot;sdf&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">upper</span>(<span class="string">&quot;fds&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">upper</span>(b))</span><br><span class="line"><span class="built_in">print</span>(b:<span class="built_in">upper</span>())</span><br><span class="line"><span class="built_in">print</span>(b.<span class="built_in">upper</span>(b))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">A=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line"><span class="comment">--正向遍历</span></span><br><span class="line"><span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(A) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(i,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--反向遍历</span></span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(A) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--某位置插入</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(A,<span class="number">3</span>,<span class="number">5</span>)</span><br><span class="line"><span class="comment">--所以位置后插入</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.<span class="built_in">concat</span>(A, <span class="number">1</span>))</span><br><span class="line"><span class="comment">--排序</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">sort</span>(A)</span><br><span class="line"></span><br><span class="line"><span class="comment">--从大到小排序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">low</span><span class="params">( a,b )</span></span></span><br><span class="line">    <span class="keyword">return</span> a&gt;b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">sort</span>(A,up)</span><br><span class="line"></span><br><span class="line"><span class="comment">--输入的一行  io.lines()</span></span><br><span class="line"><span class="keyword">local</span> a=&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">x</span><span class="params">(a)</span></span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">concat</span>(a,<span class="string">&quot;+&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>() <span class="keyword">do</span></span><br><span class="line">  a[#a+<span class="number">1</span>]=line</span><br><span class="line">  <span class="built_in">print</span>(x(a))</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h2 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--随机数种子</span></span><br><span class="line"><span class="built_in">math</span>.<span class="built_in">randomseed</span>(<span class="built_in">os</span>.<span class="built_in">time</span>())</span><br><span class="line"><span class="comment">--随机数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>,<span class="number">100</span>))</span><br></pre></td></tr></table></figure><h2 id="协程"><a href="#协程" class="headerlink" title="协程"></a>协程</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">关于协程的操作作为基础库的一个子库， 被放在一个独立表 <span class="built_in">coroutine</span> 中。 协程的介绍参见 §<span class="number">2.6</span> 。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">create</span> (f)</span><br><span class="line">创建一个主体函数为 f 的新协程。 f 必须是一个 Lua 的函数。 返回这个新协程，它是一个类型为 <span class="string">&quot;thread&quot;</span> 的对象。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span> (co [, val1, ···])</span><br><span class="line">开始或继续协程 co 的运行。 当你第一次延续一个协程，它会从主体函数处开始运行。 val1, ... 这些值会以参数形式传入主体函数。 如果该协程被让出，<span class="built_in">resume</span> 会重新启动它； val1, ... 这些参数会作为让出点的返回值。</span><br><span class="line"></span><br><span class="line">如果协程运行起来没有错误， <span class="built_in">resume</span> 返回 <span class="literal">true</span> 加上传给 <span class="built_in">yield</span> 的所有值 （当协程让出）， 或是主体函数的所有返回值（当协程中止）。 如果有任何错误发生， <span class="built_in">resume</span> 返回 <span class="literal">false</span> 加错误消息。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">yield</span> (···)</span><br><span class="line">挂起正在调用的协程的执行。 传递给 <span class="built_in">yield</span> 的参数都会转为 <span class="built_in">resume</span> 的额外返回值。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">wrap</span> (f)</span><br><span class="line">创建一个主体函数为 f 的新协程。 f 必须是一个 Lua 的函数。 返回一个函数， 每次调用该函数都会延续该协程。 传给这个函数的参数都会作为 <span class="built_in">resume</span> 的额外参数。 和 <span class="built_in">resume</span> 返回相同的值， 只是没有第一个布尔量。 如果发生任何错误，抛出这个错误。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">status</span> (co)</span><br><span class="line">以字符串形式返回协程 co 的状态： 当协程正在运行（它就是调用 <span class="built_in">status</span> 的那个） ，返回 <span class="string">&quot;running&quot;</span>； 如果协程调用 <span class="built_in">yield</span> 挂起或是还没有开始运行，返回 <span class="string">&quot;suspended&quot;</span>； 如果协程是活动的，但并不在运行（即它正在延续其它协程），返回 <span class="string">&quot;normal&quot;</span>； 如果协程运行完主体函数或因错误停止，返回 <span class="string">&quot;dead&quot;</span>。</span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.isyieldable ()</span><br><span class="line">如果正在运行的协程可以让出，则返回真。</span><br><span class="line"></span><br><span class="line">不在主线程中或不在一个无法让出的 C 函数中时，当前协程是可让出的。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">running</span> ()</span><br><span class="line">返回当前正在运行的协程加一个布尔量。 如果当前运行的协程是主线程，其为真。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="协程创建执行与返回"><a href="#协程创建执行与返回" class="headerlink" title="协程创建执行与返回"></a>协程创建执行与返回</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--创建运行协程</span></span><br><span class="line"><span class="comment">--[[coroutine.create (f)</span></span><br><span class="line"><span class="comment">创建一个主体函数为 f 的新协程。 f 必须是一个 Lua 的函数。 返回这个新协程，它是一个类型为 &quot;thread&quot; 的对象。]]</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">( ... )</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;coroutine is running...&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>(co)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)</span><br><span class="line"></span><br><span class="line"><span class="comment">--返回值 coroutine.yield() 返回后再次执行时从返回处开始执行</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">( ... )</span></span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;start&quot;</span>)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">yield</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;coroutine1 is running...&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="协程传参返回值"><a href="#协程传参返回值" class="headerlink" title="协程传参返回值"></a>协程传参返回值</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--传参  coroutine.resume(co,1,2,3,41,1)</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">(...)</span></span></span><br><span class="line"><span class="keyword">local</span> a = &#123;...&#125;</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line">        <span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">print</span>(i,v)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">41</span>,<span class="number">1</span>)</span><br><span class="line"><span class="comment">--返回值  返回的第一个值为执行成功与否</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">(...)</span></span></span><br><span class="line">    <span class="built_in">coroutine</span>.<span class="built_in">yield</span>(<span class="string">&quot;saf&quot;</span>,<span class="number">123</span>,dffs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line">a,b ,c,d= <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">41</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(a,b,c,d)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--注意传值时第二次传值不会进行覆盖</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">(a,b)</span></span></span><br><span class="line">    <span class="built_in">print</span>(a,b)</span><br><span class="line">    c,d = <span class="built_in">coroutine</span>.<span class="built_in">yield</span>(a,b)</span><br><span class="line">    <span class="built_in">print</span>(a,b)</span><br><span class="line">    <span class="built_in">print</span>(c,d)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用coroutine.wrap创建的协程 返回值为function</span></span><br><span class="line"><span class="comment">--创建一个主体函数为 f 的新协程。 f 必须是一个 Lua 的函数。 返回一个函数， 每次调用该函数都会延续该协程。 传给这个函数的参数都会作为 resume 的额外参数。 和 resume 返回相同的值， 只是没有第一个布尔量。 如果发生任何错误，抛出这个错误。</span></span><br><span class="line">co= <span class="built_in">coroutine</span>.<span class="built_in">wrap</span>(</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">(a,b)</span></span></span><br><span class="line">    <span class="built_in">print</span>(a,b)</span><br><span class="line">    c,d=<span class="built_in">coroutine</span>.<span class="built_in">yield</span>(a,b)</span><br><span class="line">    <span class="built_in">print</span>(a,b)</span><br><span class="line">    <span class="built_in">print</span>(c,d)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(co))</span><br><span class="line">co(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">co(<span class="number">3</span>,<span class="number">4</span>);</span><br></pre></td></tr></table></figure><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> monster =&#123;</span><br><span class="line">    name=<span class="string">&quot;monster&quot;</span>,</span><br><span class="line">    Hp=<span class="number">100</span>,</span><br><span class="line">    pos=&#123;x=<span class="number">100</span>,y=<span class="number">200</span>&#125;,</span><br><span class="line">    <span class="string">[[</span></span><br><span class="line"><span class="string">    TakeDamage=function(self,demage)</span></span><br><span class="line"><span class="string">        self.Hp=self.Hp-demage</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">    ]]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(monster.Hp)</span><br><span class="line"><span class="comment">--定义函数加上self变量</span></span><br><span class="line">monster.TakeDamage=<span class="function"><span class="keyword">function</span><span class="params">(self,demage)</span></span></span><br><span class="line">        <span class="built_in">self</span>.Hp=<span class="built_in">self</span>.Hp-demage</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="string">[[</span></span><br><span class="line"><span class="string">使用语法糖改编 默认有self</span></span><br><span class="line"><span class="string">function monster:TakeDamage(demage)</span></span><br><span class="line"><span class="string">        self.Hp=self.Hp-demage</span></span><br><span class="line"><span class="string">        end</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line"></span><br><span class="line">monster.TakeDamage(monster,<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(monster.Hp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> monster1 =&#123;</span><br><span class="line">    name=<span class="string">&quot;monster&quot;</span>,</span><br><span class="line">    Hp=<span class="number">120</span>,</span><br><span class="line">    pos=&#123;x=<span class="number">100</span>,y=<span class="number">200</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--可进行传值</span></span><br><span class="line">monster.TakeDamage(monster1,<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(monster1.Hp)</span><br><span class="line"></span><br><span class="line"><span class="comment">--语法糖：将自身作为函数的第一个参数传入</span></span><br><span class="line">monster:TakeDamage(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--直接赋值为地址引用</span></span><br><span class="line"><span class="keyword">local</span> monster1 = monster</span><br><span class="line">monster1:TakeDamage(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(monster.Hp) <span class="comment">--输出为 0 </span></span><br></pre></td></tr></table></figure><h1 id="元表"><a href="#元表" class="headerlink" title="元表"></a>元表</h1><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--meta table 元表 原型</span></span><br><span class="line"></span><br><span class="line">monster =&#123;</span><br><span class="line">    name=<span class="string">&quot;monster&quot;</span>,</span><br><span class="line">    Hp=<span class="number">100</span>,</span><br><span class="line">    pos=&#123;x=<span class="number">100</span>,y=<span class="number">200</span>&#125;,</span><br><span class="line">    TakeDamage=<span class="function"><span class="keyword">function</span><span class="params">(self,demage)</span></span></span><br><span class="line">        <span class="built_in">self</span>.Hp=<span class="built_in">self</span>.Hp-demage</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">objMonster=&#123;x=<span class="number">1</span>,y=<span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">setmetatable</span>(objMonster, &#123;<span class="built_in">__index</span>=monster&#125;)</span><br><span class="line">objMonster:TakeDamage(<span class="number">11</span>)</span><br><span class="line"><span class="built_in">print</span>(objMonster.Hp)</span><br><span class="line"><span class="comment">--设置元表后不会修改元表值</span></span><br><span class="line"><span class="built_in">print</span>(monster.Hp)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="lua" scheme="http://example.com/categories/lua/"/>
    
    
    <category term="lua" scheme="http://example.com/tags/lua/"/>
    
  </entry>
  
  <entry>
    <title>极世界-好友系统</title>
    <link href="http://example.com/2023/01/16/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%A5%BD%E5%8F%8B%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2023/01/16/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%A5%BD%E5%8F%8B%E7%B3%BB%E7%BB%9F/</id>
    <published>2023-01-16T08:12:09.000Z</published>
    <updated>2023-01-17T02:48:24.566Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">好友添加流程：请求人添加好友，服务器向响应方发送请求消息，响应方发送响应信息，服务器根据响应信息向请求方和响应方添加信息</span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;好友添加流程：请求人添加好友，服务器向响应方发送请求消息，响应方发送响应信息，服务器根据响应信息向请求方和响应方添加信息&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-刷怪系统</title>
    <link href="http://example.com/2023/01/13/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%88%B7%E6%80%AA%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2023/01/13/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%88%B7%E6%80%AA%E7%B3%BB%E7%BB%9F/</id>
    <published>2023-01-13T03:27:36.000Z</published>
    <updated>2023-01-16T08:12:43.229Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">刷怪逻辑：</span><br><span class="line">地图创建刷怪管理，刷怪管理存储刷怪规则，刷怪规则每帧判断是否需要刷怪需要则，地图管理器刷怪，传递给地图通知地图中所有玩家</span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;刷怪逻辑：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;地图创建刷怪管理，刷怪管理存储刷怪规则，刷怪规则每帧判断是否需要刷怪需要则，地图管理器刷怪，传递给地图通知地图中所有玩家&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-任务系统</title>
    <link href="http://example.com/2023/01/11/%E6%9E%81%E4%B8%96%E7%95%8C-%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2023/01/11/%E6%9E%81%E4%B8%96%E7%95%8C-%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/</id>
    <published>2023-01-11T08:30:08.000Z</published>
    <updated>2023-01-13T03:26:48.077Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><p><img src="/../images/image-20230113112519212.png" alt="image-20230113112519212"></p><p><img src="/../images/image-20230113112533890.png" alt="image-20230113112533890"></p><p><img src="/../images/image-20230113112546424.png" alt="image-20230113112546424"></p><p><img src="/../images/image-20230113112556148.png" alt="image-20230113112556148"></p><p><img src="/../images/image-20230113112606055.png" alt="image-20230113112606055"></p><p><img src="/../images/image-20230113112615013.png" alt="image-20230113112615013"></p><p><img src="/../images/image-20230113112624099.png" alt="image-20230113112624099"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-装备系统</title>
    <link href="http://example.com/2023/01/04/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%A3%85%E5%A4%87%E7%B3%BB%E7%BB%9F-1/"/>
    <id>http://example.com/2023/01/04/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%A3%85%E5%A4%87%E7%B3%BB%E7%BB%9F-1/</id>
    <published>2023-01-04T11:06:07.000Z</published>
    <updated>2023-01-04T11:06:07.269Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>极世界-装备系统</title>
    <link href="http://example.com/2023/01/03/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%A3%85%E5%A4%87%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2023/01/03/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%A3%85%E5%A4%87%E7%B3%BB%E7%BB%9F/</id>
    <published>2023-01-03T03:33:05.000Z</published>
    <updated>2023-01-05T03:53:04.593Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">接口 IPointerClickHandler</span><br></pre></td></tr></table></figure><span id="more"></span><p><img src="/../images/image-20230104190912135.png" alt="image-20230104190912135"></p><p><img src="/../images/image-20230104190925642.png" alt="image-20230104190925642"></p><p><img src="/../images/image-20230104190938466.png" alt="image-20230104190938466"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;接口 IPointerClickHandler&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-商店系统</title>
    <link href="http://example.com/2022/12/30/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%95%86%E5%BA%97%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2022/12/30/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%95%86%E5%BA%97%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-12-30T02:11:09.000Z</published>
    <updated>2023-01-03T03:36:41.243Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">选择时组件 Selectable</span><br><span class="line">当绑定组件后，继承 ISelectHandler 接口 实现 OnSelect函数，当选择时则执行此函数</span><br></pre></td></tr></table></figure><span id="more"></span><p><img src="/../images/image-20230103113612563.png" alt="image-20230103113612563"></p><p><img src="/../images/image-20230103113626905.png" alt="image-20230103113626905"></p><p><img src="/../images/image-20230103113635096.png" alt="image-20230103113635096"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;选择时组件 Selectable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;当绑定组件后，继承 ISelectHandler 接口 实现 OnSelect函数，当选择时则执行此函数&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-背包系统</title>
    <link href="http://example.com/2022/12/28/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%83%8C%E5%8C%85%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2022/12/28/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%83%8C%E5%8C%85%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-12-28T02:14:02.000Z</published>
    <updated>2022-12-29T04:47:06.729Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">数据库用二进制存储</span><br><span class="line"></span><br><span class="line">更新协议 更新Define 制作背包UI 背包小格子脚本 背包数据库建立</span><br><span class="line"></span><br><span class="line">bagitem使用结构体，为了方便进行交换</span><br><span class="line"></span><br><span class="line">背包作用</span><br><span class="line">背包系统组成</span><br><span class="line"></span><br><span class="line">[StructLayout(LayoutKind.Sequential, Pack =1)]解释</span><br><span class="line"></span><br><span class="line">GetComponentsInChildren(); 使用方法</span><br><span class="line"></span><br><span class="line">通过二进制存储数据</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="背包作用"><a href="#背包作用" class="headerlink" title="背包作用"></a>背包作用</h1><p><img src="/../images/image-20221228162200670.png" alt="image-20221228162200670"></p><h1 id="背包系统组成"><a href="#背包系统组成" class="headerlink" title="背包系统组成"></a>背包系统组成</h1><p><img src="/../images/image-20221228162225821.png" alt="image-20221228162225821"></p><h1 id="StructLayout-LayoutKind-Sequential-Pack-x3D-1-解释"><a href="#StructLayout-LayoutKind-Sequential-Pack-x3D-1-解释" class="headerlink" title="[StructLayout(LayoutKind.Sequential, Pack &#x3D;1)]解释"></a>[StructLayout(LayoutKind.Sequential, Pack &#x3D;1)]解释</h1><p><code>[StructLayout(LayoutKind.Sequential)]</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">结构体是由若干成员组成的.布局有两种</span><br><span class="line">1.Sequential,顺序布局,比如</span><br><span class="line">struct S1</span><br><span class="line">&#123;</span><br><span class="line">  int a;</span><br><span class="line">  int b;</span><br><span class="line">&#125;</span><br><span class="line">那么默认情况下在内存里是先排a,再排b</span><br><span class="line">也就是如果能取到a的地址,和b的地址,则相差一个int类型的长度,4字节</span><br><span class="line">[StructLayout(LayoutKind.Sequential)] </span><br><span class="line">struct S1</span><br><span class="line">&#123;</span><br><span class="line">  int a;</span><br><span class="line">  int b;</span><br><span class="line">&#125;</span><br><span class="line">这样和上一个是一样的.因为默认的内存排列就是Sequential,也就是按成员的先后顺序排列.</span><br><span class="line">2.Explicit,精确布局</span><br><span class="line">需要用FieldOffset()设置每个成员的位置</span><br><span class="line">这样就可以实现类似c的公用体的功能</span><br><span class="line">[StructLayout(LayoutKind.Explicit)] </span><br><span class="line">struct S1</span><br><span class="line">&#123;</span><br><span class="line">  [FieldOffset(0)]</span><br><span class="line">  int a;</span><br><span class="line">  [FieldOffset(0)]</span><br><span class="line">  int b;</span><br><span class="line">&#125;</span><br><span class="line">这样a和b在内存中地址相同</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">StructLayout特性支持三种附加字段：CharSet、Pack、Size。     </span><br></pre></td></tr></table></figure><p>·  CharSet定义在结构中的字符串成员在结构被传给DLL时的排列方式。可以是Unicode、Ansi或Auto。<br> 默认为Auto，在WIN  NT&#x2F;2000&#x2F;XP中表示字符串按照Unicode字符串进行排列，在WIN  95&#x2F;98&#x2F;Me中则表示按照ANSI字符串进行排列。<br>·  Pack定义了结构的封装大小。可以是1、2、4、8、16、32、64、128或特殊值0。特殊值0表示当前操作平台默认的压缩大小。   </p><h1 id="c-GetComponentsInChildren-lt-组件-gt"><a href="#c-GetComponentsInChildren-lt-组件-gt" class="headerlink" title="c# GetComponentsInChildren&lt;组件&gt;();"></a>c# <code>GetComponentsInChildren</code>&lt;组件&gt;();</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">c# GetComponentsInChildren&lt;组件&gt;();</span><br><span class="line">这种方式是 大家经常用到的，这种是获取自己和它的孩子有同样的组件（比如 Rigidbody），返回一个数组，数组包括自己和它的孩子。如果他的孩子里面有的是不活跃SetActive(false);则获取不到。</span><br><span class="line">所以就会有第二个参数GetComponentsInChildren&lt;组件&gt;(true);</span><br><span class="line"></span><br><span class="line">includeInactive =true;</span><br><span class="line">原文链接：https://blog.csdn.net/microsoftMSDNNET/article/details/48522817</span><br></pre></td></tr></table></figure><h1 id="通过二进制存储数据"><a href="#通过二进制存储数据" class="headerlink" title="通过二进制存储数据"></a>通过二进制存储数据</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 分析获取背包</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;data&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">unsafe</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Analyze</span>(<span class="params"><span class="built_in">byte</span>[] data</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">fixed</span> (<span class="built_in">byte</span>* pt = data)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.Unlocked;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            BagItem* item = (BagItem*)(pt + (i * <span class="keyword">sizeof</span>(BagItem)));</span><br><span class="line">            <span class="keyword">this</span>.items[i] = *item;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">unsafe</span> <span class="keyword">public</span> NBagInfo <span class="title">GetBagInfo</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Debug.LogError(<span class="string">&quot;BagManager-&gt;NBagInfo&quot;</span>);</span><br><span class="line">    <span class="keyword">fixed</span> (<span class="built_in">byte</span>* pt = info.Items)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.Unlocked; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            BagItem* item = (BagItem*)(pt + (i * <span class="keyword">sizeof</span>(BagItem)));</span><br><span class="line">            *item = items[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.info;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;数据库用二进制存储&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;更新协议 更新Define 制作背包UI 背包小格子脚本 背包数据库建立&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bagitem使用结构体，为了方便进行交换&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;背包作用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;背包系统组成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[StructLayout(LayoutKind.Sequential, Pack =1)]解释&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetComponentsInChildren(); 使用方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;通过二进制存储数据&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-道具系统</title>
    <link href="http://example.com/2022/12/21/%E6%9E%81%E4%B8%96%E7%95%8C-%E9%81%93%E5%85%B7%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2022/12/21/%E6%9E%81%E4%B8%96%E7%95%8C-%E9%81%93%E5%85%B7%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-12-21T14:25:18.000Z</published>
    <updated>2022-12-22T15:37:52.496Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">道具分类</span><br><span class="line">道具系统对外接口</span><br><span class="line">道具系统组成</span><br><span class="line"></span><br><span class="line">更新协议：道具类型，角色道具信息，登录时返回角色信息（包含道具）</span><br><span class="line">建立道具表数据库 角色与道具一对多 道具包含ID 数量</span><br><span class="line"></span><br><span class="line">服务端：道具管理器，道具实体类</span><br><span class="line">item:物品的增加删除和使用</span><br><span class="line">itemManager：物品所有者，物品列表，物品使用，是否持有物品，物品获取，物品添加，物品移除，获取物品列表</span><br><span class="line"></span><br><span class="line">DBservice:数据库保存</span><br><span class="line">Character：创建ItemManager，将道具读入Manager</span><br><span class="line"></span><br><span class="line">UserSerevice-角色进入：将角色信息填入</span><br><span class="line"></span><br><span class="line">客户端：item实体，itemManager</span><br><span class="line">item实体：存放 ID，数量</span><br><span class="line">ItemManager：Item字典，初始化Item，获取配置表中信息，使用逻辑</span><br><span class="line"></span><br><span class="line">UserSerevice：角色进入初始化道具表管理器</span><br><span class="line"></span><br><span class="line">道具实体类存在的意义：为了避免频繁操作数据库，登录时将道具信息拉出，之后操作本地数据，需要更新时更新数据库</span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;道具分类&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;道具系统对外接口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;道具系统组成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;更新协议：道具类型，角色道具信息，登录时返回角色信息（包含道具）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;建立道具表数据库 角色与道具一对多 道具包含ID 数量&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;服务端：道具管理器，道具实体类&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;item:物品的增加删除和使用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;itemManager：物品所有者，物品列表，物品使用，是否持有物品，物品获取，物品添加，物品移除，获取物品列表&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DBservice:数据库保存&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Character：创建ItemManager，将道具读入Manager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UserSerevice-角色进入：将角色信息填入&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;客户端：item实体，itemManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;item实体：存放 ID，数量&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ItemManager：Item字典，初始化Item，获取配置表中信息，使用逻辑&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UserSerevice：角色进入初始化道具表管理器&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;道具实体类存在的意义：为了避免频繁操作数据库，登录时将道具信息拉出，之后操作本地数据，需要更新时更新数据库&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-NPC系统</title>
    <link href="http://example.com/2022/12/20/%E6%9E%81%E4%B8%96%E7%95%8C-NPC%E7%B3%BB%E7%BB%9F/"/>
    <id>http://example.com/2022/12/20/%E6%9E%81%E4%B8%96%E7%95%8C-NPC%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-12-20T12:30:01.000Z</published>
    <updated>2022-12-21T09:28:08.320Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">NPC分类</span><br><span class="line">NPC系统设计</span><br><span class="line">点击场景中的对象 OnMouseDown</span><br><span class="line">OnMouseDown 点击脚本GameObject碰撞体时触发</span><br><span class="line">NpcManager 管理NPC数据，功能事件</span><br><span class="line">NpcController 管理Npc的实体动作等</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="要点"><a href="#要点" class="headerlink" title="要点"></a>要点</h1><p><img src="/../images/image-20221220203332499.png" alt="image-20221220203332499"></p><h1 id="NPC分类"><a href="#NPC分类" class="headerlink" title="NPC分类"></a>NPC分类</h1><p><img src="/../images/image-20221220203051502.png" alt="image-20221220203051502"></p><h1 id="NPC系统设计"><a href="#NPC系统设计" class="headerlink" title="NPC系统设计"></a>NPC系统设计</h1><p><img src="/../images/image-20221220203139722.png" alt="image-20221220203139722"></p><h1 id="新增配置表"><a href="#新增配置表" class="headerlink" title="新增配置表"></a>新增配置表</h1><p>自动赋值json  编辑这个</p><p><img src="/../images/image-20221220205825505.png" alt="image-20221220205825505"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NPC分类&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NPC系统设计&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;点击场景中的对象 OnMouseDown&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OnMouseDown 点击脚本GameObject碰撞体时触发&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NpcManager 管理NPC数据，功能事件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NpcController 管理Npc的实体动作等&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-UI系统框架设计</title>
    <link href="http://example.com/2022/12/19/%E6%9E%81%E4%B8%96%E7%95%8C-UI%E7%B3%BB%E7%BB%9F%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/"/>
    <id>http://example.com/2022/12/19/%E6%9E%81%E4%B8%96%E7%95%8C-UI%E7%B3%BB%E7%BB%9F%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/</id>
    <published>2022-12-19T11:52:30.000Z</published>
    <updated>2022-12-21T04:37:21.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">直接断开连接玩家不退出</span><br><span class="line">mono单例当父对象被销毁的，子对象也会被销毁</span><br><span class="line"></span><br><span class="line">Type 类</span><br><span class="line">C# default(T)关键字</span><br><span class="line">加载游戏资源</span><br><span class="line"></span><br><span class="line">UIManager  UI的资源拉取，创建，销毁</span><br><span class="line">UIWindow   UI的父类，定义UI的关闭事件，UI的按钮关闭事件</span><br><span class="line">UIMain     UI管理的表层</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="直接断开连接玩家不退出"><a href="#直接断开连接玩家不退出" class="headerlink" title="直接断开连接玩家不退出"></a>直接断开连接玩家不退出</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在玩家断开连接信息发出时发送角色离开请求</span><br></pre></td></tr></table></figure><p><img src="/../images/image-20221219212108086.png" alt="image-20221219212108086"></p><p><img src="/../images/image-20221219212052895.png" alt="image-20221219212052895"></p><h1 id="Type-类"><a href="#Type-类" class="headerlink" title="Type 类"></a>Type 类</h1><pre><code>Type类，用来包含类型的特性。对于程序中的每一个类型，都会有一个包含这个类型的信息的Type类的对象，类型信息包含数据，属性和方法等信息。</code></pre><p>1.生成Type对象<br>      有两种方法可以生成Type类的对象：一种是Typeof(类名)，一种是对象调用GetType()函数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Type type = typeof(Person);</span><br><span class="line"></span><br><span class="line"> Person person = new Person();</span><br><span class="line"> Type type2 = person.GetType();</span><br></pre></td></tr></table></figure><p>2.获取类的信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//类的名称    </span><br><span class="line">string name = type.Name;           </span><br><span class="line">//类的命名空间</span><br><span class="line">string space = type.Namespace;</span><br><span class="line">//类的程序集</span><br><span class="line">Assembly assembly = type.Assembly;</span><br><span class="line">//类的共有字段</span><br><span class="line">FieldInfo[] fieldInfos = type.GetFields();</span><br><span class="line">//类的属性</span><br><span class="line">PropertyInfo[] propertyInfos = type.GetProperties();</span><br><span class="line">//类的方法</span><br><span class="line">MethodInfo[] methodInfos = type.GetMethods();</span><br></pre></td></tr></table></figure><p>原文链接：<a href="https://blog.csdn.net/liyazhen2011/article/details/81105717">https://blog.csdn.net/liyazhen2011/article/details/81105717</a></p><h1 id="C-default-T-关键字"><a href="#C-default-T-关键字" class="headerlink" title="C# default(T)关键字"></a>C# default(T)关键字</h1><p>C#中的关键词default函数，其作用是default(T)返回一个该类型T的默认值，一般情况下用于在不知道类型参数具体为值类型还是引用类型的情况下，为对象实例赋于初值。<br><strong>切记：在 C# 中不允许使用未初始化的变量。</strong></p><h1 id="加载游戏资源"><a href="#加载游戏资源" class="headerlink" title="加载游戏资源"></a>加载游戏资源</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载Resources目录下的预设体</span></span><br><span class="line">Resources.Load(info.Resources);</span><br><span class="line"><span class="comment">//加载某种类型的资源</span></span><br><span class="line">Resloader.Load&lt;Sprite&gt;(<span class="string">&quot;UI/Minimap/&quot;</span> + User.Instance.CurrentMapData.MiniMap);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;直接断开连接玩家不退出&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mono单例当父对象被销毁的，子对象也会被销毁&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Type 类&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;C# default(T)关键字&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;加载游戏资源&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UIManager  UI的资源拉取，创建，销毁&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UIWindow   UI的父类，定义UI的关闭事件，UI的按钮关闭事件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UIMain     UI管理的表层&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-地图传送</title>
    <link href="http://example.com/2022/12/18/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%9C%B0%E5%9B%BE%E4%BC%A0%E9%80%81/"/>
    <id>http://example.com/2022/12/18/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%9C%B0%E5%9B%BE%E4%BC%A0%E9%80%81/</id>
    <published>2022-12-18T14:10:59.000Z</published>
    <updated>2022-12-19T11:53:00.452Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">创建传送点</span><br><span class="line">传送点配置</span><br><span class="line">编辑器扩展：传送点数据生成</span><br><span class="line">传送协议与实现</span><br><span class="line">地图传送服务流程</span><br><span class="line"></span><br><span class="line">碰撞 触发失效解决</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="编辑器扩展：传送点数据生成"><a href="#编辑器扩展：传送点数据生成" class="headerlink" title="编辑器扩展：传送点数据生成"></a>编辑器扩展：传送点数据生成</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">目的：在配置表里生成传送点位置</span><br><span class="line">使用完成后生成到客户端配置表中，需复制到服务端</span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.SceneManagement;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> UnityEditor.SceneManagement;</span><br><span class="line"><span class="keyword">using</span> Common.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MapTools</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line"></span><br><span class="line">[<span class="meta">MenuItem(<span class="string">&quot;Map Tools/Export Teleporters&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ExportTeleporters</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        DataManager.Instance.Load();</span><br><span class="line"></span><br><span class="line">        Scene scene = EditorSceneManager.GetActiveScene();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> currentScene = scene.name;</span><br><span class="line">        <span class="keyword">if</span>(scene.isDirty)</span><br><span class="line">        &#123;</span><br><span class="line">            EditorUtility.DisplayDialog(<span class="string">&quot;提示&quot;</span>, <span class="string">&quot;请先保存当前场景&quot;</span>, <span class="string">&quot;确定&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;TeleportObject&gt; allteleportObjects = <span class="keyword">new</span> List&lt;TeleportObject&gt;();</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="keyword">var</span> map <span class="keyword">in</span> DataManager.Instance.Maps)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//获取地图所在位置</span></span><br><span class="line">            <span class="built_in">string</span> sceneFile = <span class="string">&quot;Assets/Scenes/&quot;</span> + map.Value.Resource + <span class="string">&quot;.unity&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span>(!System.IO.File.Exists(sceneFile))</span><br><span class="line">            &#123;</span><br><span class="line">                Debug.LogErrorFormat(<span class="string">&quot;Scene :&#123;0&#125; not existed!&quot;</span>, sceneFile);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            EditorSceneManager.OpenScene(sceneFile, OpenSceneMode.Single);</span><br><span class="line"></span><br><span class="line">            TeleportObject[] teleports = FindObjectsOfType&lt;TeleportObject&gt;();</span><br><span class="line">            <span class="keyword">foreach</span>(<span class="keyword">var</span> teleporter <span class="keyword">in</span> teleports)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(!DataManager.Instance.Teleporters.ContainsKey(teleporter.ID))</span><br><span class="line">                &#123;</span><br><span class="line">                    EditorUtility.DisplayDialog(<span class="string">&quot;错误&quot;</span>,</span><br><span class="line">                        <span class="built_in">string</span>.Format(<span class="string">&quot;地图：&#123;0&#125;中配置的 TeleportID：&#123;1&#125;不存在！&quot;</span>, map.Value.ID, teleporter.ID),</span><br><span class="line">                        <span class="string">&quot; 确定&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                TeleporterDefine teleporter_Define = DataManager.Instance.Teleporters[teleporter.ID];</span><br><span class="line">                <span class="keyword">if</span>(teleporter_Define.MapID!=map.Value.ID)</span><br><span class="line">                &#123;</span><br><span class="line">                    EditorUtility.DisplayDialog(<span class="string">&quot;错误&quot;</span>,</span><br><span class="line">                        <span class="built_in">string</span>.Format(<span class="string">&quot;地图：&#123;0&#125;中不应存在的 TeleportID：&#123;1&#125;！&quot;</span>, map.Value.ID, teleporter.ID),</span><br><span class="line">                          <span class="string">&quot;确定&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                teleporter_Define.Position = GameObjectTool.WorldToLogicN(teleporter.transform.position);</span><br><span class="line">                teleporter_Define.Direction = GameObjectTool.WorldToLogicN(teleporter.transform.forward);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        DataManager.Instance.SaveTeleporters();</span><br><span class="line">        EditorSceneManager.OpenScene(<span class="string">&quot;Assets/Scenes/&quot;</span> + currentScene + <span class="string">&quot;.unity&quot;</span>);</span><br><span class="line">        EditorUtility.DisplayDialog(<span class="string">&quot;提示&quot;</span>, <span class="string">&quot;传送点导出完毕&quot;</span>, <span class="string">&quot;确定&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="传送点配置"><a href="#传送点配置" class="headerlink" title="传送点配置"></a>传送点配置</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Common.Data;</span><br><span class="line"><span class="keyword">using</span> Services;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TeleportObject</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> ID;</span><br><span class="line">    Mesh mesh = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// Use this for initialization</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span> ()</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.mesh = <span class="keyword">this</span>.GetComponent&lt;MeshFilter&gt;().sharedMesh;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Update is called once per frame</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span> ()</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OnTriggerEnter</span>(<span class="params">Collider other</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.LogError(<span class="string">&quot;触发进行&quot;</span>);</span><br><span class="line">        PlayerInputController playerInputController = other.GetComponent&lt;PlayerInputController&gt;();</span><br><span class="line">        <span class="keyword">if</span>(playerInputController!=<span class="literal">null</span>&amp;&amp;playerInputController.isActiveAndEnabled)</span><br><span class="line">        &#123;</span><br><span class="line">            TeleporterDefine td = DataManager.Instance.Teleporters[<span class="keyword">this</span>.ID];</span><br><span class="line">            <span class="keyword">if</span>(td==<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Debug.LogErrorFormat(<span class="string">&quot;TeleportObject :Character:&#123;0&#125; Enter Teleporter&#123;1&#125; But not existed&quot;</span></span><br><span class="line">                    , playerInputController.character.Info.Name,<span class="keyword">this</span>.ID);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            Debug.LogFormat(<span class="string">&quot;TeleportObject :Character:&#123;0&#125; Enter Teleporter&#123;1&#125; &quot;</span></span><br><span class="line">                    , playerInputController.character.Info.Name, <span class="keyword">this</span>.ID);</span><br><span class="line">            <span class="keyword">if</span>(td.LinkTo&gt;<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (DataManager.Instance.Teleporters.ContainsKey(td.LinkTo))</span><br><span class="line">                &#123;</span><br><span class="line">                    MapService.Instance.SendMapTeleport(<span class="keyword">this</span>.ID);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> Debug.LogErrorFormat(<span class="string">&quot;Teleporter ID:&#123;0&#125; LinkID:&#123;1&#125; Error&quot;</span>, <span class="keyword">this</span>.ID, td.LinkTo);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> UNITY_EDITOR</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDrawGizmos</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Gizmos.color = Color.blue;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.mesh!=<span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Gizmos.DrawWireMesh(<span class="keyword">this</span>.mesh, </span><br><span class="line">                <span class="keyword">this</span>.transform.position + Vector3.up * <span class="keyword">this</span>.transform.localPosition.y * <span class="number">.5</span>f, </span><br><span class="line">                <span class="keyword">this</span>.transform.rotation, <span class="keyword">this</span>.transform.localScale);</span><br><span class="line">        &#125;</span><br><span class="line">        UnityEditor.Handles.color = Color.red;</span><br><span class="line">        UnityEditor.Handles.ArrowHandleCap(<span class="number">0</span>, <span class="keyword">this</span>.transform.position, <span class="keyword">this</span>.transform.rotation, <span class="number">1f</span>, EventType.Repaint);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="地图传送服务流程"><a href="#地图传送服务流程" class="headerlink" title="地图传送服务流程"></a>地图传送服务流程</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">玩家进入传送区域-&gt;发送传送请求-&gt;服务端响应传送请求：玩家离开旧地图，进入新地图，修改玩家位置-&gt;客户端响应玩家进入离开地图</span><br></pre></td></tr></table></figure><h1 id="碰撞-触发失效解决"><a href="#碰撞-触发失效解决" class="headerlink" title="碰撞 触发失效解决"></a>碰撞 触发失效解决</h1><p><img src="/../images/image-20221219135706570.png" alt="image-20221219135706570"></p><p><img src="/../images/image-20221219135714843.png" alt="image-20221219135714843"></p><p>全勾上</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;创建传送点&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;传送点配置&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;编辑器扩展：传送点数据生成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;传送协议与实现&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;地图传送服务流程&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;碰撞 触发失效解决&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-移动同步3</title>
    <link href="http://example.com/2022/12/17/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A53/"/>
    <id>http://example.com/2022/12/17/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A53/</id>
    <published>2022-12-17T09:06:12.000Z</published>
    <updated>2022-12-18T14:12:00.889Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-移动同步2</title>
    <link href="http://example.com/2022/12/16/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A52/"/>
    <id>http://example.com/2022/12/16/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A52/</id>
    <published>2022-12-16T02:26:54.000Z</published>
    <updated>2022-12-17T09:07:03.396Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">同步的目标对象</span><br><span class="line">同步的流程</span><br><span class="line"></span><br><span class="line">EntitySync协议</span><br><span class="line">EntitySync的影响和发送</span><br><span class="line"></span><br><span class="line">客户端 CharacterManager Id Info.id</span><br><span class="line">服务端地图 CharacterID EntityId</span><br><span class="line">服务端 CharacterManager Id Info.id</span><br><span class="line"></span><br><span class="line">同步步骤 </span><br><span class="line">客户端状态更新-&gt;玩家控制器发送同步请求-&gt; 服务端地图服务接受同步请求-&gt;地图管理器处理请求-&gt;发送请求的是本连接 同步不是本连接-&gt;向客户端发送同步请求-&gt;客户端处理同步-&gt;客户端EntityManager修改同步的属性</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="同步的流程"><a href="#同步的流程" class="headerlink" title="同步的流程"></a>同步的流程<img src="/../images/image-20221216112633439.png" alt="image-20221216112633439"></h1>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;同步的目标对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;同步的流程&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EntitySync协议&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EntitySync的影响和发送&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;客户端 CharacterManager Id Info.id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;服务端地图 CharacterID EntityId&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;服务端 CharacterManager Id Info.id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;同步步骤 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;客户端状态更新-&amp;gt;玩家控制器发送同步请求-&amp;gt; 服务端地图服务接受同步请求-&amp;gt;地图管理器处理请求-&amp;gt;发送请求的是本连接 同步不是本连接-&amp;gt;向客户端发送同步请求-&amp;gt;客户端处理同步-&amp;gt;客户端EntityManager修改同步的属性&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-移动同步1</title>
    <link href="http://example.com/2022/12/14/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A51/"/>
    <id>http://example.com/2022/12/14/%E6%9E%81%E4%B8%96%E7%95%8C-%E7%A7%BB%E5%8A%A8%E5%90%8C%E6%AD%A51/</id>
    <published>2022-12-14T12:19:14.000Z</published>
    <updated>2022-12-15T15:37:51.074Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">帧同步</span><br><span class="line">状态同步</span><br><span class="line">状态帧同步</span><br><span class="line">完善角色进入及离开处理</span><br><span class="line"></span><br><span class="line">CharacterManager（C/S）</span><br><span class="line">EntityManager（C/S）</span><br><span class="line">打包运行Win客户端</span><br><span class="line"></span><br><span class="line">遇到问题 ：返回角色选择后再次进入游戏，小地图角色transformm为null</span><br><span class="line">解决 ：角色创建为携程创建，创建完一个角色后就执行了小地图的start，导致User的角色gameobject未赋值就使用，在User中创建事件即可</span><br><span class="line"></span><br><span class="line">Mono单例需要使用重载的start等回调函数</span><br><span class="line">游戏对象管理器 使用事件时， +=  -=</span><br><span class="line"></span><br><span class="line">ID类型</span><br><span class="line"></span><br><span class="line">DB_id，Entity_ID，Tid，ID</span><br><span class="line"></span><br><span class="line">将创建角色和销毁角色 使用的ID转为Entiy_Id;</span><br><span class="line"></span><br><span class="line">Entity中的删除通知： 在EntittController中实现接口，并将接口函数添加到字典中，角色需要删除血量条等</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="帧同步"><a href="#帧同步" class="headerlink" title="帧同步"></a>帧同步</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>由于不同的系统对浮点数的处理方式不同，导致在客户端进行处理时出现不同的结果</p><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p><img src="/../images/image-20221214204024923.png" alt="image-20221214204024923"></p><p><img src="/../images/image-20221214204034956.png" alt="image-20221214204034956"></p><h1 id="状态同步"><a href="#状态同步" class="headerlink" title="状态同步"></a>状态同步</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>只有状态数据改变时才进行同步</p><h2 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h2><p><img src="/../images/image-20221214204123586.png" alt="image-20221214204123586"></p><h1 id="状态帧同步"><a href="#状态帧同步" class="headerlink" title="状态帧同步"></a>状态帧同步</h1><h2 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h2><p>按固定的逻辑帧搜集变化的状态数据并进行网络同步</p><h2 id="例子-2"><a href="#例子-2" class="headerlink" title="例子"></a>例子</h2><p><img src="/../images/image-20221214204049216.png" alt="image-20221214204049216"></p><p><img src="/../images/image-20221215161643638.png" alt="image-20221215161643638"></p><p><img src="/../images/image-20221215164053593.png" alt="image-20221215164053593"></p><p>玩家进入： 客户端 UserService 发送玩家进入请求 服务端 响应，将进入的角色加入玩家管理器中 </p><p>并加入相应地图中，地图存储进入此地图的玩家，玩家进入时，通知此地图其他所有玩家新玩家进入地图</p><p>遍历创建角色，</p><h1 id="打包运行Win客户端"><a href="#打包运行Win客户端" class="headerlink" title="打包运行Win客户端"></a>打包运行Win客户端</h1><p>将 log4net.xml 文件放到打包到的目录下</p><p>将存放数据的Data目录放到打包文件下</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;帧同步&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;状态同步&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;状态帧同步&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;完善角色进入及离开处理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CharacterManager（C/S）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EntityManager（C/S）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;打包运行Win客户端&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;遇到问题 ：返回角色选择后再次进入游戏，小地图角色transformm为null&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;解决 ：角色创建为携程创建，创建完一个角色后就执行了小地图的start，导致User的角色gameobject未赋值就使用，在User中创建事件即可&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mono单例需要使用重载的start等回调函数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;游戏对象管理器 使用事件时， +=  -=&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ID类型&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DB_id，Entity_ID，Tid，ID&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;将创建角色和销毁角色 使用的ID转为Entiy_Id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Entity中的删除通知： 在EntittController中实现接口，并将接口函数添加到字典中，角色需要删除血量条等&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-小地图</title>
    <link href="http://example.com/2022/12/14/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%B0%8F%E5%9C%B0%E5%9B%BE/"/>
    <id>http://example.com/2022/12/14/%E6%9E%81%E4%B8%96%E7%95%8C-%E5%B0%8F%E5%9C%B0%E5%9B%BE/</id>
    <published>2022-12-14T02:45:31.000Z</published>
    <updated>2022-12-14T12:20:26.317Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">小地图系统</span><br><span class="line">小地图的资源制作方式</span><br><span class="line">小地图的UI元素</span><br><span class="line">小地图的配置与加载</span><br><span class="line">小地图与场景的坐标映射</span><br><span class="line"></span><br><span class="line">修改配置表</span><br><span class="line">在uese中添加当前地图字段</span><br><span class="line">在正式加载场景之前进行赋值</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="小地图的资源制作方式"><a href="#小地图的资源制作方式" class="headerlink" title="小地图的资源制作方式"></a>小地图的资源制作方式</h1><p>1.实时渲染场景  使用摄像机渲染到材质上</p><p>2.预渲染顶视图 + 润色</p><p>  使用摄像机渲染后美术润色</p><p>3.纯美术制作</p><h1 id="修改配置表"><a href="#修改配置表" class="headerlink" title="修改配置表"></a>修改配置表</h1><p>配置表位置 E:\极世界MMORPG\mymmo\Src\Data\Tables</p><p>点击工具生成json，生成的json会同步到客户端，服务端需要自行复制</p><p>添加配置表元素需要到服务端 Common-Data 的定义类中添加字段后生成解决方案</p><p>复制E:\极世界MMORPG\mymmo\Src\Lib\Common\bin\Debug到E:\极世界MMORPG\mymmo\Src\Client\Assets\References 中</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;小地图系统&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;小地图的资源制作方式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;小地图的UI元素&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;小地图的配置与加载&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;小地图与场景的坐标映射&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;修改配置表&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在uese中添加当前地图字段&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在正式加载场景之前进行赋值&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-进入主城3-角色信息显示</title>
    <link href="http://example.com/2022/12/13/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%BF%9B%E5%85%A5%E4%B8%BB%E5%9F%8E3-%E8%A7%92%E8%89%B2%E4%BF%A1%E6%81%AF%E6%98%BE%E7%A4%BA/"/>
    <id>http://example.com/2022/12/13/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%BF%9B%E5%85%A5%E4%B8%BB%E5%9F%8E3-%E8%A7%92%E8%89%B2%E4%BF%A1%E6%81%AF%E6%98%BE%E7%A4%BA/</id>
    <published>2022-12-13T02:05:42.000Z</published>
    <updated>2022-12-14T02:46:51.585Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">第三人称自由视角实现</span><br><span class="line"></span><br><span class="line">主界面UI角色信息  UI与数据的交互</span><br><span class="line"></span><br><span class="line">角色头顶信息显示（名字和血条）</span><br><span class="line">世界空间UI  UI跟随角色</span><br><span class="line">四元数*Vector3 = Vector3向四元数方向旋转后的向量</span><br><span class="line"></span><br><span class="line">曲线</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="第三人称自由视角实现"><a href="#第三人称自由视角实现" class="headerlink" title="第三人称自由视角实现"></a>第三人称自由视角实现</h1><p><img src="/../images/image-20221213190527470.png" alt="image-20221213190527470"></p><p>通过键盘输入控制角色转向</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">direction = <span class="keyword">new</span> Vector3(Input.GetAxis(<span class="string">&quot;Vertical&quot;</span>), <span class="number">0</span>, -Input.GetAxis(<span class="string">&quot;Horizontal&quot;</span>)).normalized;</span><br><span class="line"></span><br><span class="line">target.transform.eulerAngles = <span class="keyword">new</span> Vector3(<span class="number">0</span>, Quaternion.FromToRotation(Vector3.forward, direction).eulerAngles.y, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>原文链接：<a href="https://blog.csdn.net/n_moling/article/details/82216655">https://blog.csdn.net/n_moling/article/details/82216655</a></p><p>在游戏对象创建的时候创建血条等，在游戏对象删除的时候删除血条等，删除时判断世界UI管理器是否存在</p><p><code>this.transform.forward = Camera.main.transform.forward;</code></p><p>调整摄像机的位置</p><h1 id="曲线"><a href="#曲线" class="headerlink" title="曲线"></a>曲线</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">定义</span><br><span class="line"><span class="keyword">public</span> AnimationCurve camera_curve;</span><br><span class="line">取值</span><br><span class="line">camera_curve.Evaluate(y);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;第三人称自由视角实现&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;主界面UI角色信息  UI与数据的交互&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;角色头顶信息显示（名字和血条）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;世界空间UI  UI跟随角色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;四元数*Vector3 = Vector3向四元数方向旋转后的向量&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;曲线&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-进入主城2-角色控制</title>
    <link href="http://example.com/2022/12/11/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%BF%9B%E5%85%A5%E4%B8%BB%E5%9F%8E2-%E8%A7%92%E8%89%B2%E6%8E%A7%E5%88%B6/"/>
    <id>http://example.com/2022/12/11/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%BF%9B%E5%85%A5%E4%B8%BB%E5%9F%8E2-%E8%A7%92%E8%89%B2%E6%8E%A7%E5%88%B6/</id>
    <published>2022-12-11T12:59:55.000Z</published>
    <updated>2022-12-13T02:06:16.957Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">客户端 地图服务</span><br><span class="line">客户端 角色管理器</span><br><span class="line">游戏对象管理器</span><br><span class="line">玩家控制器</span><br><span class="line">主角摄像机</span><br><span class="line"></span><br><span class="line">进入游戏层次</span><br><span class="line"></span><br><span class="line">将动画和刚体组件放到不同的位置避免冲突</span><br><span class="line">为角色创建新的父节点，为父节点添加刚体组件和碰撞盒，将脚本添加到角色中，注意角色预制体位置与加载路径相同，在LoadingManage中初始化地图服务</span><br></pre></td></tr></table></figure><span id="more"></span><p><img src="/../images/image-20221211210845192.png" alt="image-20221211210845192"></p><p><img src="/../images/image-20221211211830392.png" alt="image-20221211211830392"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;客户端 地图服务&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;客户端 角色管理器&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;游戏对象管理器&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;玩家控制器&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;主角摄像机&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;进入游戏层次&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;将动画和刚体组件放到不同的位置避免冲突&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;为角色创建新的父节点，为父节点添加刚体组件和碰撞盒，将脚本添加到角色中，注意角色预制体位置与加载路径相同，在LoadingManage中初始化地图服务&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-进入主城1</title>
    <link href="http://example.com/2022/12/11/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%BF%9B%E5%85%A5%E4%B8%BB%E5%9F%8E1/"/>
    <id>http://example.com/2022/12/11/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%BF%9B%E5%85%A5%E4%B8%BB%E5%9F%8E1/</id>
    <published>2022-12-11T01:57:37.000Z</published>
    <updated>2022-12-11T13:01:03.724Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">选择角色加载进入主城的步骤</span><br></pre></td></tr></table></figure><span id="more"></span><p>客户端发送进入游戏信息  使用在玩家中的位置作为索引</p><p>服务端处理收到的信息，将进入的玩家加入到玩家管理器，设定sender中的玩家，地图管理器中加入此玩家，地图将此玩家的加入广播给其他所有玩家</p><p>服务端中的单位为cm，客户端中的单位为米，服务端与客户端通信需要进行转化</p><p>注意dataManage MapManage的初始化</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;选择角色加载进入主城的步骤&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
  <entry>
    <title>极世界-角色创建与数据加载</title>
    <link href="http://example.com/2022/12/06/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%A7%92%E8%89%B2%E5%88%9B%E5%BB%BA%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD/"/>
    <id>http://example.com/2022/12/06/%E6%9E%81%E4%B8%96%E7%95%8C-%E8%A7%92%E8%89%B2%E5%88%9B%E5%BB%BA%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD/</id>
    <published>2022-12-06T03:42:50.000Z</published>
    <updated>2022-12-10T14:57:58.757Z</updated>
    
    <content type="html"><![CDATA[<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">配置表读取</span><br><span class="line">Renderer Texture   在UI上显示3D动画</span><br><span class="line"></span><br><span class="line">DataManager  读取 json所有类</span><br><span class="line"></span><br><span class="line">生成json步骤</span><br><span class="line"></span><br><span class="line">新加字段步骤</span><br><span class="line"></span><br><span class="line">移动UI位置    需要使用Transform.localPosition</span><br><span class="line"></span><br><span class="line">关闭协程</span><br><span class="line">UGUI回调函数</span><br><span class="line"></span><br><span class="line">使用EF访问数据库</span><br><span class="line">应用通信协议</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="DataManager"><a href="#DataManager" class="headerlink" title="DataManager"></a>DataManager</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"> <span class="comment"><span class="doctag">///</span> 给服务端用的</span></span><br><span class="line"> <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Load</span>()</span></span><br><span class="line"> &#123;</span><br><span class="line">     <span class="built_in">string</span> json = File.ReadAllText(<span class="keyword">this</span>.DataPath + <span class="string">&quot;MapDefine.txt&quot;</span>);</span><br><span class="line">     <span class="keyword">this</span>.Maps = JsonConvert.DeserializeObject&lt;Dictionary&lt;<span class="built_in">int</span>, MapDefine&gt;&gt;(json);</span><br><span class="line"></span><br><span class="line">     json = File.ReadAllText(<span class="keyword">this</span>.DataPath + <span class="string">&quot;CharacterDefine.txt&quot;</span>);</span><br><span class="line">     <span class="keyword">this</span>.Characters = JsonConvert.DeserializeObject&lt;Dictionary&lt;<span class="built_in">int</span>, CharacterDefine&gt;&gt;(json);</span><br><span class="line"></span><br><span class="line">     json = File.ReadAllText(<span class="keyword">this</span>.DataPath + <span class="string">&quot;TeleporterDefine.txt&quot;</span>);</span><br><span class="line">     <span class="keyword">this</span>.Teleporters = JsonConvert.DeserializeObject&lt;Dictionary&lt;<span class="built_in">int</span>, TeleporterDefine&gt;&gt;(json);</span><br><span class="line"></span><br><span class="line">     json = File.ReadAllText(<span class="keyword">this</span>.DataPath + <span class="string">&quot;SpawnPointDefine.txt&quot;</span>);</span><br><span class="line">     <span class="keyword">this</span>.SpawnPoints = JsonConvert.DeserializeObject&lt;Dictionary&lt;<span class="built_in">int</span>, Dictionary&lt;<span class="built_in">int</span>, SpawnPointDefine&gt;&gt;&gt; (json);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"> <span class="comment"><span class="doctag">///</span> 给客户端用的</span></span><br><span class="line"> <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"> <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> IEnumerator <span class="title">LoadData</span>()</span></span><br><span class="line"> &#123;</span><br><span class="line">     <span class="built_in">string</span> json = File.ReadAllText(<span class="keyword">this</span>.DataPath + <span class="string">&quot;MapDefine.txt&quot;</span>);</span><br><span class="line">     <span class="keyword">this</span>.Maps = JsonConvert.DeserializeObject&lt;Dictionary&lt;<span class="built_in">int</span>, MapDefine&gt;&gt;(json);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">     json = File.ReadAllText(<span class="keyword">this</span>.DataPath + <span class="string">&quot;CharacterDefine.txt&quot;</span>);</span><br><span class="line">     <span class="keyword">this</span>.Characters = JsonConvert.DeserializeObject&lt;Dictionary&lt;<span class="built_in">int</span>, CharacterDefine&gt;&gt;(json);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">     json = File.ReadAllText(<span class="keyword">this</span>.DataPath + <span class="string">&quot;TeleporterDefine.txt&quot;</span>);</span><br><span class="line">     <span class="keyword">this</span>.Teleporters = JsonConvert.DeserializeObject&lt;Dictionary&lt;<span class="built_in">int</span>, TeleporterDefine&gt;&gt;(json);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">     json = File.ReadAllText(<span class="keyword">this</span>.DataPath + <span class="string">&quot;SpawnPointDefine.txt&quot;</span>);</span><br><span class="line">     <span class="keyword">this</span>.SpawnPoints = JsonConvert.DeserializeObject&lt;Dictionary&lt;<span class="built_in">int</span>, Dictionary&lt;<span class="built_in">int</span>, SpawnPointDefine&gt;&gt;&gt;(json);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h1 id="生成json"><a href="#生成json" class="headerlink" title="生成json"></a>生成json</h1><p>1.点击E:\极世界MMORPG\mymmo\Src\Data\Excel2Json.cmd 生成json.txt</p><p>2.将E:\极世界MMORPG\mymmo\Src\Data\Data 下的text文件复制到 服务端 端   E:\极世界MMORPG\mymmo\Src\Server\GameServer\GameServer\bin\Debug\Data </p><p>3.将E:\极世界MMORPG\mymmo\Src\Data\Data 下的text文件复制到 客户端 E:\极世界MMORPG\mymmo\Src\Client\Data</p><h1 id="Renderer-Texture"><a href="#Renderer-Texture" class="headerlink" title="Renderer Texture"></a>Renderer Texture</h1><h2 id="创建-RawImage"><a href="#创建-RawImage" class="headerlink" title="创建 RawImage"></a>创建 RawImage</h2><p><img src="/../images/image-20221206172522451.png" alt="image-20221206172522451"></p><h1 id="新加字段步骤"><a href="#新加字段步骤" class="headerlink" title="新加字段步骤"></a>新加字段步骤</h1><h2 id="数据字段没有在服务器data中相应Define中添加"><a href="#数据字段没有在服务器data中相应Define中添加" class="headerlink" title="数据字段没有在服务器data中相应Define中添加"></a>数据字段没有在服务器data中相应Define中添加</h2><p><img src="/../images/image-20221206195012441.png" alt="image-20221206195012441"></p><h2 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h2><p>将E:\极世界MMORPG\mymmo\Src\Lib\Common\bin\Debug下的五个文件复制到</p><p>E:\极世界MMORPG\mymmo\Src\Client\Assets\References 中</p><p><img src="/../images/image-20221206195137062.png" alt="image-20221206195137062"></p><h1 id="关闭协程"><a href="#关闭协程" class="headerlink" title="关闭协程"></a>关闭协程</h1><p><a href="https://blog.csdn.net/qq_37032670/article/details/119220404?ops_request_misc=%7B%22request_id%22:%22167042090516800180645862%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=167042090516800180645862&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-119220404-null-null.142%5Ev68%5Epc_new_rank,201%5Ev4%5Eadd_ask,213%5Ev2%5Et3_control2&utm_term=unity%E5%81%9C%E6%AD%A2%E6%90%BA%E7%A8%8B&spm=1018.2226.3001.4187">(37条消息) Unity 之 关于停止协程的五种方式解析_qq_37032670的博客-CSDN博客_unity关闭协程</a></p><h1 id="接收返回值"><a href="#接收返回值" class="headerlink" title="接收返回值"></a>接收返回值</h1><p>不管使用下面哪种方式启动协程，都可以结束其返回值用以停止对应协程；</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Coroutine stopCor_1;</span><br><span class="line"><span class="keyword">private</span> Coroutine stopCor_2;</span><br><span class="line">stopCor_1 = StartCoroutine(<span class="string">&quot;Cor_1&quot;</span>);</span><br><span class="line">stopCor_2 = StartCoroutine(Cor_2());</span><br></pre></td></tr></table></figure><p>停止协程：</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">StopCoroutine(stopCor_1);</span><br><span class="line">StopCoroutine(stopCor_2);</span><br></pre></td></tr></table></figure><h1 id="UGUI回调函数"><a href="#UGUI回调函数" class="headerlink" title="UGUI回调函数"></a>UGUI回调函数</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.EventSystems;</span><br><span class="line"></span><br><span class="line"><span class="comment">//句柄</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UGUI_back</span> : <span class="title">MonoBehaviour</span>,</span><br><span class="line"><span class="title">IPointerEnterHandler</span>, <span class="title">IPointerExitHandler</span>,<span class="comment">//进入，离开</span></span><br><span class="line"><span class="title">IPointerDownHandler</span>, <span class="title">IPointerUpHandler</span>,<span class="comment">//按下抬起</span></span><br><span class="line"><span class="title">IPointerClickHandler</span>,<span class="comment">//点击</span></span><br><span class="line"><span class="title">IBeginDragHandler</span>, <span class="title">IDragHandler</span>, <span class="title">IEndDragHandler</span><span class="comment">//拖拽</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 鼠标进入</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;eventData&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnPointerEnter</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Debug.Log(&quot;Enter&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 鼠标退出</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;eventData&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnPointerExit</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Debug.Log(&quot;Exit&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 鼠标按下</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;eventData&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnPointerDown</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Debug.Log(&quot;Down&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 鼠标抬起</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;eventData&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnPointerUp</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">       <span class="comment">// Debug.Log(&quot;Up&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 鼠标点击</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;eventData&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnPointerClick</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Debug.Log(&quot;Click&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 开始拖拽</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;eventData&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnBeginDrag</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Debug.Log(&quot;BeginDrag&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 拖拽中</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;eventData&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnDrag</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Debug.Log(&quot;Drag&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 结束拖拽</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;eventData&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnEndDrag</span>(<span class="params">PointerEventData eventData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Debug.Log(&quot;EndDrag&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="使用EF访问数据库"><a href="#使用EF访问数据库" class="headerlink" title="使用EF访问数据库"></a>使用EF访问数据库</h1><h1 id="应用通信协议"><a href="#应用通信协议" class="headerlink" title="应用通信协议"></a>应用通信协议</h1><h2 id="发送信息"><a href="#发送信息" class="headerlink" title="发送信息"></a>发送信息</h2><p>设置发送信息函数  –&gt; 设置接收信息函数 –&gt; 设置角色创建事件–&gt; 订阅和删除接收信息函数</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;内容&quot;&gt;&lt;a href=&quot;#内容&quot; class=&quot;headerlink&quot; title=&quot;内容&quot;&gt;&lt;/a&gt;内容&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;配置表读取&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Renderer Texture   在UI上显示3D动画&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DataManager  读取 json所有类&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;生成json步骤&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;新加字段步骤&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;移动UI位置    需要使用Transform.localPosition&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;关闭协程&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UGUI回调函数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;使用EF访问数据库&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;应用通信协议&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="unity" scheme="http://example.com/categories/unity/"/>
    
    
    <category term="极世界" scheme="http://example.com/tags/%E6%9E%81%E4%B8%96%E7%95%8C/"/>
    
  </entry>
  
</feed>
